(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},50008:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},61437:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=String.fromCodePoint||function(){var e,t,n=16384,r=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||Math.floor(s)!=s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===o||r.length>n)&&(a+=String.fromCharCode.apply(null,r),r.length=0)}return a};t.default=n},13969:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uncompress=t.compress=t.buildSearch=void 0;var n={name:"a",unified:"b",non_qualified:"c",has_img_apple:"d",has_img_google:"e",has_img_twitter:"f",has_img_facebook:"h",keywords:"j",sheet:"k",emoticons:"l",text:"m",short_names:"n",added_in:"o"},r=function(e){var t=[],n=function(e,n){e&&(Array.isArray(e)?e:[e]).forEach((function(e){(n?e.split(/[-|_|\s]+/):[e]).forEach((function(e){e=e.toLowerCase(),-1==t.indexOf(e)&&t.push(e)}))}))};return n(e.short_names,!0),n(e.name,!0),n(e.keywords,!1),n(e.emoticons,!1),t.join(",")};t.buildSearch=r;t.compress=function(e){for(var t in e.short_names=e.short_names.filter((function(t){return t!==e.short_name})),delete e.short_name,e.sheet=[e.sheet_x,e.sheet_y],delete e.sheet_x,delete e.sheet_y,e.added_in=parseInt(e.added_in),6===e.added_in&&delete e.added_in,n)e[n[t]]=e[t],delete e[t];for(var r in e){var i=e[r];Array.isArray(i)&&!i.length?delete e[r]:"string"!==typeof i||i.length?null===i&&delete e[r]:delete e[r]}};t.uncompress=function(e){for(var t in e.compressed=!1,e.emojis){var i=e.emojis[t];for(var o in n)i[o]=i[n[o]],delete i[n[o]];i.short_names||(i.short_names=[]),i.short_names.unshift(t),i.sheet_x=i.sheet[0],i.sheet_y=i.sheet[1],delete i.sheet,i.text||(i.text=""),i.added_in||(i.added_in=6),i.added_in=i.added_in.toFixed(1),i.search=r(i)}}},27938:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(34575)),o=r(n(93913)),a=n(93274),s=n(13969),l=r(n(49202)),u=function(){function e(t,n){(0,i.default)(this,e),t.compressed&&(0,s.uncompress)(t),this.data=t||{},this.set=n||null,this.originalPool={},this.index={},this.emojis={},this.emoticons={},this.customEmojisList=[],this.buildIndex()}return(0,o.default)(e,[{key:"buildIndex",value:function(){var e=this,t=function(t){var n=e.data.emojis[t],r=n.short_names,i=n.emoticons,o=n.skin_variations,s=r[0];if(i&&i.forEach((function(t){e.emoticons[t]||(e.emoticons[t]=s)})),o){e.emojis[s]={};for(var l=1;l<=6;l++)e.emojis[s][l]=(0,a.getSanitizedData)({id:s,skin:l},l,e.set,e.data)}else e.emojis[s]=(0,a.getSanitizedData)(s,null,e.set,e.data);e.originalPool[s]=n};for(var n in this.data.emojis)t(n)}},{key:"clearCustomEmojis",value:function(e){var t=this;this.customEmojisList.forEach((function(n){var r=n.id||n.short_names[0];delete e[r],delete t.emojis[r]}))}},{key:"addCustomToPool",value:function(e,t){var n=this;this.customEmojisList.length&&this.clearCustomEmojis(t),e.forEach((function(e){var r=e.id||e.short_names[0];r&&!t[r]&&(t[r]=(0,a.getData)(e,null,null,n.data),n.emojis[r]=(0,a.getSanitizedData)(e,null,null,n.data))})),this.customEmojisList=e,this.index={}}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.emojisToShowFilter,i=n.maxResults,o=n.include,s=n.exclude,u=n.custom,c=void 0===u?[]:u;this.customEmojisList!=c&&this.addCustomToPool(c,this.originalPool);var d=l.default.get("skin")||1;i||(i=75),o||(o=[]),s||(s=[]);var f=null,h=this.originalPool;if(e.length){if("-"==e||"-1"==e)return[this.emojis[-1][d]];var m=e.toLowerCase().split(/[\s|,|\-|_]+/),p=[];if(m.length>2&&(m=[m[0],m[1]]),(o.length||s.length)&&(h={},this.data.categories.forEach((function(e){var n=!o||!o.length||o.indexOf(e.id)>-1,r=!(!s||!s.length)&&s.indexOf(e.id)>-1;n&&!r&&e.emojis.forEach((function(e){return h[e]=t.data.emojis[e]}))})),c.length)){var g=!o||!o.length||o.indexOf("custom")>-1,v=!(!s||!s.length)&&s.indexOf("custom")>-1;g&&!v&&this.addCustomToPool(c,h)}f=(p=m.map((function(e){for(var n=h,r=t.index,i=0,o=0;o<e.length;o++){var a=e[o];i++,r[a]||(r[a]={}),(r=r[a]).results||function(){var o={};for(var a in r.results=[],r.pool={},n){var s=n[a],l=s.search,u=e.substr(0,i),c=l.indexOf(u);if(-1!=c){var f=c+1;u==a&&(f=0),t.emojis[a]&&t.emojis[a][d]?r.results.push(t.emojis[a][d]):r.results.push(t.emojis[a]),r.pool[a]=s,o[a]=f}}r.results.sort((function(e,t){var n=o[e.id],r=o[t.id];return n==r?e.id.localeCompare(t.id):n-r}))}(),n=r.pool}return r.results})).filter((function(e){return e}))).length>1?a.intersect.apply(null,p):p.length?p[0]:[]}return f&&(r&&(f=f.filter((function(e){return r(h[e.id])}))),f&&f.length>i&&(f=f.slice(0,i))),f}}]),e}();t.default=u},93274:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getData=f,t.getEmojiDataFromNative=function(e,t,n){n.compressed&&(0,o.uncompress)(n);var r,i,a,s=["1F3FB","1F3FC","1F3FD","1F3FE","1F3FF"],l=e;for(var c in["\ud83c\udffb","\ud83c\udffc","\ud83c\udffd","\ud83c\udffe","\ud83c\udfff"].forEach((function(t,n){e.indexOf(t)>0&&(r=n+2,i=s[n])})),n.emojis){var f=n.emojis[c],h=f.unified;f.variations&&f.variations.length&&(h=f.variations.shift()),r&&f.skin_variations&&f.skin_variations[i]&&(h=f.skin_variations[i].unified),u(h)===l&&(a=f)}if(!a)return null;return a.id=a.short_names[0],d(a,r,t,n)},t.getSanitizedData=d,t.uniq=h,t.intersect=function(e,t){var n=h(e),r=h(t);return n.filter((function(e){return r.indexOf(e)>=0}))},t.deepMerge=function e(t,n){var r={};for(var o in t){var a=t[o],s=a;n.hasOwnProperty(o)&&(s=n[o]),"object"===(0,i.default)(s)&&(s=e(a,s)),r[o]=s}return r},t.unifiedToNative=u,t.measureScrollbar=function(){if("undefined"==typeof document)return 0;var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},t.throttleIdleTask=function(e){var t="function"===typeof requestIdleCallback?requestIdleCallback:setTimeout,n=!1;return function(){n||(n=!0,t((function(){n=!1,e()})))}};var i=r(n(50008)),o=n(13969),a=r(n(61437)),s=/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/,l=["1F3FA","1F3FB","1F3FC","1F3FD","1F3FE","1F3FF"];function u(e){var t=e.split("-").map((function(e){return"0x".concat(e)}));return a.default.apply(null,t)}function c(e){var t=e.name,n=e.short_names,r=e.skin_tone,i=e.skin_variations,o=e.emoticons,a=e.unified,s=e.custom,l=e.customCategory,c=e.imageUrl,d=e.id||n[0],f=":".concat(d,":");return s?{id:d,name:t,short_names:n,colons:f,emoticons:o,custom:s,customCategory:l,imageUrl:c}:(r&&(f+=":skin-tone-".concat(r,":")),{id:d,name:t,short_names:n,colons:f,emoticons:o,unified:a.toLowerCase(),skin:r||(i?1:null),native:u(a)})}function d(){return c(f.apply(void 0,arguments))}function f(e,t,n,r){var i={};if("string"==typeof e){var a=e.match(s);if(a&&(e=a[1],a[2]&&(t=parseInt(a[2],10))),r.aliases.hasOwnProperty(e)&&(e=r.aliases[e]),!r.emojis.hasOwnProperty(e))return null;i=r.emojis[e]}else e.id&&(r.aliases.hasOwnProperty(e.id)&&(e.id=r.aliases[e.id]),r.emojis.hasOwnProperty(e.id)&&(i=r.emojis[e.id],t||(t=e.skin)));if(Object.keys(i).length||((i=e).custom=!0,i.search||(i.search=(0,o.buildSearch)(e))),i.emoticons||(i.emoticons=[]),i.variations||(i.variations=[]),i.skin_variations&&t>1){i=JSON.parse(JSON.stringify(i));var u=l[t-1],c=i.skin_variations[u];if(c&&(!c.variations&&i.variations&&delete i.variations,n&&(void 0==c["has_img_".concat(n)]||c["has_img_".concat(n)])||!n))for(var d in i.skin_tone=t,c){var f=c[d];i[d]=f}}return i.variations&&i.variations.length&&((i=JSON.parse(JSON.stringify(i))).unified=i.variations.shift()),i}function h(e){return e.reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),[])}},49202:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r,i="emoji-mart",o="undefined"!==typeof window&&"localStorage"in window;function a(e,t){if(r)r(e,t);else{if(!o)return;try{window.localStorage["".concat(i,".").concat(e)]=JSON.stringify(t)}catch(n){}}}var s={update:function(e){for(var t in e){a(t,e[t])}},set:a,get:function(e){if(n)return n(e);if(o)try{var t=window.localStorage["".concat(i,".").concat(e)];if(t)return JSON.parse(t)}catch(r){return}},setNamespace:function(e){i=e},setHandlers:function(e){e||(e={}),n=e.getter,r=e.setter}};t.default=s},55733:function(e,t,n){var r=n(48764).Buffer,i=n(34155);e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,l,u,c=[],d=0,f=e.length,h=f,m="string"!==r.getTypeOf(e);d<e.length;)h=f-d,i=m?(t=e[d++],n=d<f?e[d++]:0,d<f?e[d++]:0):(t=e.charCodeAt(d++),n=d<f?e.charCodeAt(d++):0,d<f?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,l=1<h?(15&n)<<2|i>>6:64,u=2<h?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},n.decode=function(e){var t,n,r,a,s,l,u=0,c=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var f,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|h):new Array(0|h);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(l=o.indexOf(e.charAt(u++))),f[c++]=t,64!==s&&(f[c++]=n),64!==l&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,c){var d,f,h=e.file,m=e.compression,p=c!==s.utf8encode,g=o.transformTo("string",c(h.name)),v=o.transformTo("string",s.utf8encode(h.name)),y=h.comment,b=o.transformTo("string",c(y)),_=o.transformTo("string",s.utf8encode(y)),w=v.length!==h.name.length,E=_.length!==y.length,x="",k="",C="",S=h.dir,T=h.date,M={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(M.crc32=e.crc32,M.compressedSize=e.compressedSize,M.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),p||!w&&!E||(I|=2048);var O=0,R=0;S&&(O|=16),"UNIX"===a?(R=798,O|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,S)):(R=20,O|=function(e){return 63&(e||0)}(h.dosPermissions)),d=T.getUTCHours(),d<<=6,d|=T.getUTCMinutes(),d<<=5,d|=T.getUTCSeconds()/2,f=T.getUTCFullYear()-1980,f<<=4,f|=T.getUTCMonth()+1,f<<=5,f|=T.getUTCDate(),w&&(k=r(1,1)+r(l(g),4)+v,x+="up"+r(k.length,2)+k),E&&(C=r(1,1)+r(l(b),4)+_,x+="uc"+r(C.length,2)+C);var N="";return N+="\n\0",N+=r(I,2),N+=m.magic,N+=r(d,2),N+=r(f,2),N+=r(M.crc32,4),N+=r(M.compressedSize,4),N+=r(M.uncompressedSize,4),N+=r(g.length,2),N+=r(x.length,2),{fileRecord:u.LOCAL_FILE_HEADER+N+g+x,dirRecord:u.CENTRAL_FILE_HEADER+r(R,2)+N+r(b.length,2)+"\0\0\0\0"+r(O,4)+r(i,4)+g+x+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),u=e("../signature");function c(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var s=o.transformTo("string",a(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.0",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(u(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof r,newBufferFrom:function(e,t){if(r.from&&r.from!==Uint8Array.from)return r.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new r(e,t)},allocBuffer:function(e){if(r.alloc)return r.alloc(e);var t=new r(e);return t.fill(0),t},isBuffer:function(e){return r.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=p(e)),s.createFolders&&(r=m(e))&&g.call(this,r,!0);var d="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var v=null;v=t instanceof u||t instanceof a?t:f.isNode&&f.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new c(e,v,s);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=p(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(v(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),l=e("../support"),u=e("../external"),c=null;if(l.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t){return new u.Promise((function(n,o){var a=[],l=e._internalType,u=e._outputType,c=e._mimeType;e.on("data",(function(e,n){a.push(e),t&&t(n)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(u,function(e,t){var n,i=0,o=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(a),n=0;n<t.length;n++)o.set(t[n],i),i+=t[n].length;return o;case"nodebuffer":return r.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,a),c);n(e)}catch(e){o(e)}a=[]})).resume()}))}function f(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof r,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),n.blob=0===o.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)l[n++]=i;else if(4<(o=s[i]))l[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(u,a),u.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;a!==t.length&&(i.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=c;var f={};f.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},f.array={string:c,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return f[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,s,u){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var c=n.getTypeOf(t);return c?("arraybuffer"===c?t=n.transformTo("uint8array",t):"string"===c&&(u?t=i.decode(t):o&&!0!==s&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=m((function(){t(i,r)}));"error"===a.status&&r(a.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=m(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(i);++l<n;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))}),(function(e){r||(r=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(i);++s<n;)a=e[s],t.resolve(a).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,u=0,c=-1,d=0,f=8;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var m;if(m="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,m))!==u)throw new Error(a[n]);this._dict_set=!0}}function m(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&n!==u)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),!(s.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=h,n.deflate=m,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,m(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,m(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,u,d,f,h=this.strm,m=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(m),h.next_out=0,h.avail_out=m),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&p&&(f="string"==typeof p?o.string2buf(p):"[object ArrayBuffer]"===c.call(p)?new Uint8Array(p):p,n=r.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),u=h.next_out-l,d=o.buf2string(h.output,l),h.next_out=u,h.avail_out=m-u,u&&i.arraySet(h.output,h.output,l,u,0),this.onData(d)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=f,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)u[r++]=i;else if(4<(o=a[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),u=0,c=4,d=0,f=-2,h=-1,m=4,p=2,g=8,v=9,y=286,b=30,_=19,w=2*y+1,E=15,x=3,k=258,C=k+x+1,S=42,T=113,M=1,I=2,O=3,R=4;function N(e,t){return e.msg=l[t],t}function z(e){return(e<<1)-(4<e?9:0)}function L(e){for(var t=e.length;0<=--t;)e[t]=0}function A(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function F(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,A(e.strm)}function P(e,t){e.pending_buf[e.pending++]=t}function j(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function D(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,u=e.window,c=e.w_mask,d=e.prev,f=e.strstart+k,h=u[o+a-1],m=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===m&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=k-(f-o),o=f-k,a<r){if(e.match_start=t,s<=(a=r))break;h=u[o+a-1],m=u[o+a]}}}while((t=d[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function B(e){var t,n,r,o,l,u,c,d,f,h,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-C)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);o+=m}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,h=void 0,(f=o)<(h=u.avail_in)&&(h=f),n=0===h?0:(u.avail_in-=h,i.arraySet(c,u.input,u.next_in,h,d),1===u.state.wrap?u.adler=a(u.adler,c,h,d):2===u.state.wrap&&(u.adler=s(u.adler,c,h,d)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<C){if(B(e),e.lookahead<C&&t===u)return M;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=D(e,n)),e.match_length>=x)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(F(e,!1),0===e.strm.avail_out))return M}return e.insert=e.strstart<x-1?e.strstart:x-1,t===c?(F(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?M:I}function H(e,t){for(var n,r,i;;){if(e.lookahead<C){if(B(e),e.lookahead<C&&t===u)return M;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=D(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-x,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return M}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return M}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===c?(F(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?M:I}function W(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*_+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(E+1),this.heap=new i.Buf16(2*y+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=p,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:T,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),d):N(e,f)}function Z(e){var t=G(e);return t===d&&function(e){e.window_size=2*e.w_size,L(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function V(e,t,n,r,o,a){if(!e)return f;var s=1;if(t===h&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||v<o||n!==g||r<8||15<r||t<0||9<t||a<0||m<a)return N(e,f);8===r&&(r=9);var l=new q;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,Z(e)}r=[new W(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&t===u)return M;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,F(e,!1),0===e.strm.avail_out))return M;if(e.strstart-e.block_start>=e.w_size-C&&(F(e,!1),0===e.strm.avail_out))return M}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:R):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),M)})),new W(4,4,8,4,U),new W(4,5,16,8,U),new W(4,6,32,32,U),new W(4,4,16,16,H),new W(8,16,32,32,H),new W(8,16,128,128,H),new W(8,32,128,256,H),new W(32,128,258,1024,H),new W(32,258,258,4096,H)],n.deflateInit=function(e,t){return V(e,t,g,15,8,0)},n.deflateInit2=V,n.deflateReset=Z,n.deflateResetKeep=G,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,d):f},n.deflate=function(e,t){var n,i,a,l;if(!e||!e.state||5<t||t<0)return e?N(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==c)return N(e,0===e.avail_out?-5:f);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===S)if(2===i.wrap)e.adler=0,P(i,31),P(i,139),P(i,8),i.gzhead?(P(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),P(i,255&i.gzhead.time),P(i,i.gzhead.time>>8&255),P(i,i.gzhead.time>>16&255),P(i,i.gzhead.time>>24&255),P(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),P(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(P(i,255&i.gzhead.extra.length),P(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(P(i,0),P(i,0),P(i,0),P(i,0),P(i,0),P(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),P(i,3),i.status=T);else{var h=g+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=T,j(i,h),0!==i.strstart&&(j(i,e.adler>>>16),j(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),A(e),a=i.pending,i.pending!==i.pending_buf_size));)P(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),A(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,P(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),A(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,P(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&A(e),i.pending+2<=i.pending_buf_size&&(P(i,255&e.adler),P(i,e.adler>>8&255),e.adler=0,i.status=T)):i.status=T),0!==i.pending){if(A(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&z(t)<=z(n)&&t!==c)return N(e,-5);if(666===i.status&&0!==e.avail_in)return N(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var m=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(t===u)return M;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return M}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?M:I}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=k){if(B(e),e.lookahead<=k&&t===u)return M;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+k;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=k-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(n=o._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(F(e,!1),0===e.strm.avail_out))return M}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?M:I}(i,t):r[i.level].func(i,t);if(m!==O&&m!==R||(i.status=666),m===M||m===O)return 0===e.avail_out&&(i.last_flush=-1),d;if(m===I&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(L(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),A(e),0===e.avail_out))return i.last_flush=-1,d}return t!==c?d:i.wrap<=0?1:(2===i.wrap?(P(i,255&e.adler),P(i,e.adler>>8&255),P(i,e.adler>>16&255),P(i,e.adler>>24&255),P(i,255&e.total_in),P(i,e.total_in>>8&255),P(i,e.total_in>>16&255),P(i,e.total_in>>24&255)):(j(i,e.adler>>>16),j(i,65535&e.adler)),A(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&103!==t&&t!==T&&666!==t?N(e,f):(e.state=null,t===T?N(e,-3):d):f},n.deflateSetDictionary=function(e,t){var n,r,o,s,l,u,c,h,m=t.length;if(!e||!e.state)return f;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==S||n.lookahead)return f;for(1===s&&(e.adler=a(e.adler,t,m,0)),n.wrap=0,m>=n.w_size&&(0===s&&(L(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,m-n.w_size,n.w_size,0),t=h,m=n.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=m,e.next_in=0,e.input=t,B(n);n.lookahead>=x;){for(r=n.strstart,o=n.lookahead-(x-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+x-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=x-1,B(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,m,p,g,v,y,b,_,w,E,x,k,C,S;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,f=n.window,h=n.hold,m=n.bits,p=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{m<15&&(h+=C[r++]<<m,m+=8,h+=C[r++]<<m,m+=8),b=p[h&v];t:for(;;){if(h>>>=_=b>>>24,m-=_,0===(_=b>>>16&255))S[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=p[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(_&=15)&&(m<_&&(h+=C[r++]<<m,m+=8),w+=h&(1<<_)-1,h>>>=_,m-=_),m<15&&(h+=C[r++]<<m,m+=8,h+=C[r++]<<m,m+=8),b=g[h&y];n:for(;;){if(h>>>=_=b>>>24,m-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&b,m<(_&=15)&&(h+=C[r++]<<m,(m+=8)<_&&(h+=C[r++]<<m,m+=8)),l<(E+=h&(1<<_)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=_,m-=_,(_=o-a)<E){if(c<(_=E-_)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=f,(x=0)===d){if(x+=u-_,_<w){for(w-=_;S[o++]=f[x++],--_;);x=o-E,k=S}}else if(d<_){if(x+=u+d-_,(_-=d)<w){for(w-=_;S[o++]=f[x++],--_;);if(x=0,d<w){for(w-=_=d;S[o++]=f[x++],--_;);x=o-E,k=S}}}else if(x+=d-_,_<w){for(w-=_;S[o++]=f[x++],--_;);x=o-E,k=S}for(;2<w;)S[o++]=k[x++],S[o++]=k[x++],S[o++]=k[x++],w-=3;w&&(S[o++]=k[x++],1<w&&(S[o++]=k[x++]))}else{for(x=o-E;S[o++]=S[x++],S[o++]=S[x++],S[o++]=S[x++],2<(w-=3););w&&(S[o++]=S[x++],1<w&&(S[o++]=S[x++]))}break}}break}}while(r<i&&o<s);r-=w=m>>3,h&=(1<<(m-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=m}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,u=2,c=0,d=-2,f=1,h=852,m=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(m),t.sane=1,t.back=-1,c):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):d}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):d}function _(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=b(e,t))!==c&&(e.state=null),n):d}var w,E,x=!0;function k(e){if(x){var t;for(w=new r.Buf32(512),E=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,E,0,e.work,{bits:5}),x=!1}e.lencode=w,e.lenbits=9,e.distcode=E,e.distbits=5}function C(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=v,n.inflateInit=function(e){return _(e,15)},n.inflateInit2=_,n.inflate=function(e,t){var n,h,m,g,v,y,b,_,w,E,x,S,T,M,I,O,R,N,z,L,A,F,P,j,D=0,B=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),v=e.next_out,m=e.output,b=e.avail_out,g=e.next_in,h=e.input,y=e.avail_in,_=n.hold,w=n.bits,E=y,x=b,F=c;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(2&n.wrap&&35615===_){B[n.check=0]=255&_,B[1]=_>>>8&255,n.check=o(n.check,B,2,0),w=_=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",n.mode=30;break}if(w-=4,A=8+(15&(_>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&_?10:12,w=_=0;break;case 2:for(;w<16;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(n.flags=_,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=_>>8&1),512&n.flags&&(B[0]=255&_,B[1]=_>>>8&255,n.check=o(n.check,B,2,0)),w=_=0,n.mode=3;case 3:for(;w<32;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.head&&(n.head.time=_),512&n.flags&&(B[0]=255&_,B[1]=_>>>8&255,B[2]=_>>>16&255,B[3]=_>>>24&255,n.check=o(n.check,B,4,0)),w=_=0,n.mode=4;case 4:for(;w<16;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.head&&(n.head.xflags=255&_,n.head.os=_>>8),512&n.flags&&(B[0]=255&_,B[1]=_>>>8&255,n.check=o(n.check,B,2,0)),w=_=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.length=_,n.head&&(n.head.extra_len=_),512&n.flags&&(B[0]=255&_,B[1]=_>>>8&255,n.check=o(n.check,B,2,0)),w=_=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(S=n.length)&&(S=y),S&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,g,S,A)),512&n.flags&&(n.check=o(n.check,h,S,g)),y-=S,g+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(S=0;A=h[g+S++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A)),A&&S<y;);if(512&n.flags&&(n.check=o(n.check,h,S,g)),y-=S,g+=S,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(S=0;A=h[g+S++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A)),A&&S<y;);if(512&n.flags&&(n.check=o(n.check,h,S,g)),y-=S,g+=S,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(_!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}w=_=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;w<32;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}e.adler=n.check=p(_),w=_=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=_,n.bits=w,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){_>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}switch(n.last=1&_,w-=1,3&(_>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6!==t)break;_>>>=2,w-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}_>>>=2,w-=2;break;case 14:for(_>>>=7&w,w-=7&w;w<32;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&_,w=_=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(y<S&&(S=y),b<S&&(S=b),0===S)break e;r.arraySet(m,h,g,S,v),y-=S,g+=S,b-=S,v+=S,n.length-=S;break}n.mode=12;break;case 17:for(;w<14;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(n.nlen=257+(31&_),_>>>=5,w-=5,n.ndist=1+(31&_),_>>>=5,w-=5,n.ncode=4+(15&_),_>>>=4,w-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.lens[U[n.have++]]=7&_,_>>>=3,w-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},F=s(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,F){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(D=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,R=65535&D,!((I=D>>>24)<=w);){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(R<16)_>>>=I,w-=I,n.lens[n.have++]=R;else{if(16===R){for(j=I+2;w<j;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(_>>>=I,w-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],S=3+(3&_),_>>>=2,w-=2}else if(17===R){for(j=I+3;w<j;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}w-=I,A=0,S=3+(7&(_>>>=I)),_>>>=3,w-=3}else{for(j=I+7;w<j;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}w-=I,A=0,S=11+(127&(_>>>=I)),_>>>=7,w-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},F=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,F){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},F=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,F){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=b){e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=_,n.bits=w,a(e,x),v=e.next_out,m=e.output,b=e.avail_out,g=e.next_in,h=e.input,y=e.avail_in,_=n.hold,w=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(D=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,R=65535&D,!((I=D>>>24)<=w);){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(O&&0==(240&O)){for(N=I,z=O,L=R;O=(D=n.lencode[L+((_&(1<<N+z)-1)>>N)])>>>16&255,R=65535&D,!(N+(I=D>>>24)<=w);){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}_>>>=N,w-=N,n.back+=N}if(_>>>=I,w-=I,n.back+=I,n.length=R,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(j=n.extra;w<j;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.length+=_&(1<<n.extra)-1,_>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(D=n.distcode[_&(1<<n.distbits)-1])>>>16&255,R=65535&D,!((I=D>>>24)<=w);){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(0==(240&O)){for(N=I,z=O,L=R;O=(D=n.distcode[L+((_&(1<<N+z)-1)>>N)])>>>16&255,R=65535&D,!(N+(I=D>>>24)<=w);){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}_>>>=N,w-=N,n.back+=N}if(_>>>=I,w-=I,n.back+=I,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=R,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(j=n.extra;w<j;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}n.offset+=_&(1<<n.extra)-1,_>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(S=x-b,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}T=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),M=n.window}else M=m,T=v-n.offset,S=n.length;for(b<S&&(S=b),b-=S,n.length-=S;m[v++]=M[T++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;m[v++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===y)break e;y--,_|=h[g++]<<w,w+=8}if(x-=b,e.total_out+=x,n.total+=x,x&&(e.adler=n.check=n.flags?o(n.check,m,x,v-x):i(n.check,m,x,v-x)),x=b,(n.flags?_:p(_))!==n.check){e.msg="incorrect data check",n.mode=30;break}w=_=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===y)break e;y--,_+=h[g++]<<w,w+=8}if(_!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}w=_=0}n.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;case 32:default:return d}return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=_,n.bits=w,(n.wsize||x!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&C(e,e.output,e.next_out,x-e.avail_out)?(n.mode=31,-4):(E-=e.avail_in,x-=e.avail_out,e.total_in+=E,e.total_out+=x,n.total+=x,n.wrap&&x&&(e.adler=n.check=n.flags?o(n.check,m,x,e.next_out-x):i(n.check,m,x,e.next_out-x)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==E&&0===x||4===t)&&F===c&&(F=-5),F)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,c},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,c):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:C(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,c):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,d,f){var h,m,p,g,v,y,b,_,w,E=f.bits,x=0,k=0,C=0,S=0,T=0,M=0,I=0,O=0,R=0,N=0,z=null,L=0,A=new r.Buf16(16),F=new r.Buf16(16),P=null,j=0;for(x=0;x<=15;x++)A[x]=0;for(k=0;k<l;k++)A[t[n+k]]++;for(T=E,S=15;1<=S&&0===A[S];S--);if(S<T&&(T=S),0===S)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(C=1;C<S&&0===A[C];C++);for(T<C&&(T=C),x=O=1;x<=15;x++)if(O<<=1,(O-=A[x])<0)return-1;if(0<O&&(0===e||1!==S))return-1;for(F[1]=0,x=1;x<15;x++)F[x+1]=F[x]+A[x];for(k=0;k<l;k++)0!==t[n+k]&&(d[F[t[n+k]]++]=k);if(y=0===e?(z=P=d,19):1===e?(z=i,L-=257,P=o,j-=257,256):(z=a,P=s,-1),x=C,v=c,I=k=N=0,p=-1,g=(R=1<<(M=T))-1,1===e&&852<R||2===e&&592<R)return 1;for(;;){for(b=x-I,w=d[k]<y?(_=0,d[k]):d[k]>y?(_=P[j+d[k]],z[L+d[k]]):(_=96,0),h=1<<x-I,C=m=1<<M;u[v+(N>>I)+(m-=h)]=b<<24|_<<16|w|0,0!==m;);for(h=1<<x-1;N&h;)h>>=1;if(0!==h?(N&=h-1,N+=h):N=0,k++,0==--A[x]){if(x===S)break;x=t[n+d[k]]}if(T<x&&(N&g)!==p){for(0===I&&(I=T),v+=C,O=1<<(M=x-I);M+I<S&&!((O-=A[M+I])<=0);)M++,O<<=1;if(R+=1<<M,1===e&&852<R||2===e&&592<R)return 1;u[p=N&g]=T<<24|M<<16|v-c|0}}return 0!==N&&(u[v+N]=x-I<<24|64<<16|0),f.bits=T,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,o=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,u=256,c=u+1+l,d=30,f=19,h=2*c+1,m=15,p=16,g=7,v=256,y=16,b=17,_=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(c+2));a(C);var S=new Array(2*d);a(S);var T=new Array(512);a(T);var M=new Array(256);a(M);var I=new Array(l);a(I);var O,R,N,z=new Array(d);function L(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function A(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?T[e]:T[256+(e>>>7)]}function P(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,n){e.bi_valid>p-n?(e.bi_buf|=t<<e.bi_valid&65535,P(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=n-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function D(e,t,n){j(e,n[2*t],n[2*t+1])}function B(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function U(e,t,n){var r,i,o=new Array(m+1),a=0;for(r=1;r<=m;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=B(o[s]++,s))}}function H(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function W(e){8<e.bi_valid?P(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function q(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function G(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&q(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!q(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function Z(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?D(e,i,t):(D(e,(o=M[i])+u+1,t),0!==(a=w[o])&&j(e,i-=I[o],a),D(e,o=F(--r),n),0!==(a=E[o])&&j(e,r-=z[o],a)),s<e.last_lit;);D(e,v,t)}function V(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)G(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,G(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(o=0;o<=m;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)g<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=g,v++),l[2*r+1]=o,u<r||(e.bl_count[o]++,a=0,p<=r&&(a=f[r-p]),s=l[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==v){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,v-=2}while(0<v);for(o=g;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),U(o,u,e.bl_count)}function K(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*_]++,o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function $(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;D(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(D(e,i,e.bl_tree),s--),D(e,y,e.bl_tree),j(e,s-3,2)):s<=10?(D(e,b,e.bl_tree),j(e,s-3,3)):(D(e,_,e.bl_tree),j(e,s-11,7));o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}a(z);var Y=!1;function Q(e,t,n,i){j(e,(s<<1)+(i?1:0),3),function(e,t,n,i){W(e),i&&(P(e,n),P(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Y||(function(){var e,t,n,r,i,o=new Array(m+1);for(r=n=0;r<l-1;r++)for(I[r]=n,e=0;e<1<<w[r];e++)M[n++]=r;for(M[n-1]=r,r=i=0;r<16;r++)for(z[r]=i,e=0;e<1<<E[r];e++)T[i++]=r;for(i>>=7;r<d;r++)for(z[r]=i<<7,e=0;e<1<<E[r]-7;e++)T[256+i++]=r;for(t=0;t<=m;t++)o[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,o[8]++;for(;e<=255;)C[2*e+1]=9,e++,o[9]++;for(;e<=279;)C[2*e+1]=7,e++,o[7]++;for(;e<=287;)C[2*e+1]=8,e++,o[8]++;for(U(C,c+1,o),e=0;e<d;e++)S[2*e+1]=5,S[2*e]=B(e,5);O=new L(C,w,u+1,c,m),R=new L(S,E,0,d,m),N=new L(new Array(0),x,0,f,g)}(),Y=!0),e.l_desc=new A(e.dyn_ltree,O),e.d_desc=new A(e.dyn_dtree,R),e.bl_desc=new A(e.bl_tree,N),e.bi_buf=0,e.bi_valid=0,H(e)},n._tr_stored_block=Q,n._tr_flush_block=function(e,t,n,r){var a,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),V(e,e.l_desc),V(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),V(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?Q(e,t,n,r):4===e.strategy||s===a?(j(e,2+(r?1:0),3),Z(e,C,S)):(j(e,4+(r?1:0),3),function(e,t,n,r){var i;for(j(e,t-257,5),j(e,n-1,5),j(e,r-4,4),i=0;i<r;i++)j(e,e.bl_tree[2*k[i]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),Z(e,e.dyn_ltree,e.dyn_dtree)),H(e),r&&W(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(M[n]+u+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){j(e,2,3),D(e,v,C),function(e){16===e.bi_valid?(P(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,o,a,s=1,l={},u=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,n="[object process]"==={}.toString.call(e.process)?function(e){i.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",m,!1):e.attachEvent("onmessage",m),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){o.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[s]=i,n(s),s++},d.clearImmediate=f}function f(e){delete l[e]}function h(e){if(u)setTimeout(h,0,e);else{var n=l[e];if(n){u=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{f(e),u=!1}}}}function m(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},91296:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,h=Math.min,m=function(){return c.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function b(e){return u=e,s=setTimeout(w,t),c?y(e):a}function _(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function w(){var e=m();if(_(e))return E(e);s=setTimeout(w,function(e){var n=t-(e-l);return d?h(n,o-(e-u)):n}(e))}function E(e){return s=void 0,v&&r?y(e):(r=i=void 0,a)}function x(){var e=m(),n=_(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return b(l);if(d)return s=setTimeout(w,t),y(l)}return void 0===s&&(s=setTimeout(w,t)),a}return t=g(t)||0,p(n)&&(c=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),x.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},x.flush=function(){return void 0===s?a:E(m())},x}},92167:function(e,t,n){"use strict";var r=n(53848);t.default=void 0;var i,o=(i=n(67294))&&i.__esModule?i:{default:i},a=n(21063),s=n(34651),l=n(7426);var u={};function c(e,t,n,r){if(e&&a.isLocalURL(t)){e.prefetch(t,n,r).catch((function(e){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;u[t+"%"+n+(i?"%"+i:"")]=!0}}var d=function(e){var t,n=!1!==e.prefetch,i=s.useRouter(),d=o.default.useMemo((function(){var t=a.resolveHref(i,e.href,!0),n=r(t,2),o=n[0],s=n[1];return{href:o,as:e.as?a.resolveHref(i,e.as):s||o}}),[i,e.href,e.as]),f=d.href,h=d.as,m=e.children,p=e.replace,g=e.shallow,v=e.scroll,y=e.locale;"string"===typeof m&&(m=o.default.createElement("a",null,m));var b=(t=o.default.Children.only(m))&&"object"===typeof t&&t.ref,_=l.useIntersection({rootMargin:"200px"}),w=r(_,2),E=w[0],x=w[1],k=o.default.useCallback((function(e){E(e),b&&("function"===typeof b?b(e):"object"===typeof b&&(b.current=e))}),[b,E]);o.default.useEffect((function(){var e=x&&n&&a.isLocalURL(f),t="undefined"!==typeof y?y:i&&i.locale,r=u[f+"%"+h+(t?"%"+t:"")];e&&!r&&c(i,f,h,{locale:t})}),[h,f,x,y,n,i]);var C={ref:k,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,r,i,o,s,l){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&a.isLocalURL(n))&&(e.preventDefault(),null==s&&r.indexOf("#")>=0&&(s=!1),t[i?"replace":"push"](n,r,{shallow:o,locale:l,scroll:s}))}(e,i,f,h,p,g,v,y)},onMouseEnter:function(e){a.isLocalURL(f)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),c(i,f,h,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var S="undefined"!==typeof y?y:i&&i.locale,T=i&&i.isLocaleDomain&&a.getDomainLocale(h,S,i&&i.locales,i&&i.domainLocales);C.href=T||a.addBasePath(a.addLocale(h,S,i&&i.defaultLocale))}return o.default.cloneElement(t,C)};t.default=d},7426:function(e,t,n){"use strict";var r=n(53848);Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!a,l=i.useRef(),u=i.useState(!1),c=r(u,2),d=c[0],f=c[1],h=i.useCallback((function(e){l.current&&(l.current(),l.current=void 0),n||d||e&&e.tagName&&(l.current=function(e,t,n){var r=function(e){var t=e.rootMargin||"",n=s.get(t);if(n)return n;var r=new Map,i=new IntersectionObserver((function(e){e.forEach((function(e){var t=r.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return s.set(t,n={id:t,observer:i,elements:r}),n}(n),i=r.id,o=r.observer,a=r.elements;return a.set(e,t),o.observe(e),function(){a.delete(e),o.unobserve(e),0===a.size&&(o.disconnect(),s.delete(i))}}(e,(function(e){return e&&f(e)}),{rootMargin:t}))}),[n,t,d]);return i.useEffect((function(){if(!a&&!d){var e=o.requestIdleCallback((function(){return f(!0)}));return function(){return o.cancelIdleCallback(e)}}}),[d]),[h,d]};var i=n(67294),o=n(73447),a="undefined"!==typeof IntersectionObserver;var s=new Map},41664:function(e,t,n){e.exports=n(92167)},73386:function(e,t,n){"use strict";n.d(t,{M:function(){return c}});var r=n(67294),i=n(13308),o=n(13643);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=r.memo(r.forwardRef((function(e,t){var s=r.useRef(null),l=r.useRef(null),d=r.useRef(null),f=r.useRef(!1),h=function(){return d.current};(0,i.nw)((function(){f.current||(n.e(937).then(n.t.bind(n,76095,23)).then((function(t){t&&t.default&&o.p7.isExist(s.current)&&(d.current=new t.default(s.current,{modules:u({toolbar:!!e.showHeader&&l.current},e.modules),placeholder:e.placeholder,readOnly:e.readOnly,theme:e.theme,formats:e.formats}),e.value&&d.current.setContents(d.current.clipboard.convert(e.value)),d.current.on("text-change",(function(t,n){var r=s.current.children[0],i=r?r.innerHTML:null,o=d.current.getText();"<p><br></p>"===i&&(i=null),e.onTextChange&&e.onTextChange({htmlValue:i,textValue:o,delta:t,source:n})})),d.current.on("selection-change",(function(t,n,r){e.onSelectionChange&&e.onSelectionChange({range:t,oldRange:n,source:r})})))})).then((function(){d.current&&d.current.getModule("toolbar")&&e.onLoad&&e.onLoad(d.current)})),f.current=!0)})),(0,i.rf)((function(){d.current&&!d.current.hasFocus()&&(e.value?d.current.setContents(d.current.clipboard.convert(e.value)):d.current.setText(""))}),[e.value]),r.useImperativeHandle(t,(function(){return{getQuill:h}}));var m=o.gb.findDiffKeys(e,c.defaultProps),p=(0,o.AK)("p-component p-editor-container",e.className),g=!1===e.showHeader?null:e.headerTemplate?r.createElement("div",{ref:l,className:"p-editor-toolbar"},e.headerTemplate):r.createElement("div",{ref:l,className:"p-editor-toolbar"},r.createElement("span",{className:"ql-formats"},r.createElement("select",{className:"ql-header",defaultValue:"0"},r.createElement("option",{value:"1"},"Heading"),r.createElement("option",{value:"2"},"Subheading"),r.createElement("option",{value:"0"},"Normal")),r.createElement("select",{className:"ql-font"},r.createElement("option",null),r.createElement("option",{value:"serif"}),r.createElement("option",{value:"monospace"}))),r.createElement("span",{className:"ql-formats"},r.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),r.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),r.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),r.createElement("span",{className:"ql-formats"},r.createElement("select",{className:"ql-color"}),r.createElement("select",{className:"ql-background"})),r.createElement("span",{className:"ql-formats"},r.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),r.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),r.createElement("select",{className:"ql-align"},r.createElement("option",{defaultValue:!0}),r.createElement("option",{value:"center"}),r.createElement("option",{value:"right"}),r.createElement("option",{value:"justify"}))),r.createElement("span",{className:"ql-formats"},r.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),r.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),r.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),r.createElement("span",{className:"ql-formats"},r.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),v=r.createElement("div",{ref:s,className:"p-editor-content",style:e.style});return r.createElement("div",a({id:e.id,className:p},m),g,v)})));c.displayName="Editor",c.defaultProps={__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null}},46148:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(67294),i=n(69868),o=n(13643);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=r.memo(r.forwardRef((function(e,t){var n=l(r.useState(e.activeIndex),2),s=n[0],c=n[1],d=r.useRef(null),f=r.useRef(null),h=r.useRef({}),m=e.onTabChange?e.activeIndex:s,p=function(t,n,r){n.disabled?t.preventDefault():(n.url||t.preventDefault(),n.command&&n.command({originalEvent:t,item:n}),e.onTabChange?e.onTabChange({originalEvent:t,value:n,index:r}):c(r))};r.useEffect((function(){!function(){var e=h.current["tab_".concat(m)];d.current.style.width=o.p7.getWidth(e)+"px",d.current.style.left=o.p7.getOffset(e).left-o.p7.getOffset(f.current).left+"px"}()}));var g=function(t,n){var a=t.className,s=t.style,l=t.disabled,u=t.icon,c=t.label,d=t.template,f=t.url,g=t.target,v=c+"_"+n,y=function(e){return e===(m||0)}(n),b=(0,o.AK)("p-tabmenuitem",{"p-highlight":y,"p-disabled":l},a),_=(0,o.AK)("p-menuitem-icon",u),w=o.Cz.getJSXIcon(u,{className:"p-menuitem-icon"},{props:e}),E=c&&r.createElement("span",{className:"p-menuitem-text"},c),x=r.createElement("a",{href:f||"#",className:"p-menuitem-link",target:g,onClick:function(e){return p(e,t,n)},role:"presentation"},w,E,r.createElement(i.H,null));if(d){var k={onClick:function(e){return p(e,t,n)},className:"p-menuitem-link",labelClassName:"p-menuitem-text",iconClassName:_,element:x,props:e,active:y,index:n};x=o.gb.getJSXElement(d,t,k)}return r.createElement("li",{ref:h.current["tab_".concat(n)],key:v,className:b,style:s,role:"tab","aria-selected":y,"aria-expanded":y,"aria-disabled":l},x)};if(e.model){var v=o.gb.findDiffKeys(e,u.defaultProps),y=(0,o.AK)("p-tabmenu p-component",e.className),b=e.model.map(g);return r.createElement("div",a({id:e.id,className:y,style:e.style},v),r.createElement("ul",{ref:f,className:"p-tabmenu-nav p-reset",role:"tablist"},b,r.createElement("li",{ref:d,className:"p-tabmenu-ink-bar"})))}return null})));u.displayName="TabMenu",u.defaultProps={__TYPE:"TabMenu",id:null,model:null,activeIndex:0,style:null,className:null,onTabChange:null}},20348:function(e,t,n){"use strict";n.d(t,{OO:function(){return Pn}});var r=n(67294);function i(e,t){return function(n){return e(t(n))}}function o(e,t){return t(e)}function a(e,t){return function(n){return e(t,n)}}function s(e,t){return function(){return e(t)}}function l(e){return function(t){return t[e]}}function u(e,t){return t(e),e}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function d(e){e()}function f(e){return function(){return e}}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.map(d)}}function m(){}function p(e,t){return e(1,t)}function g(e,t){e(0,t)}function v(e){e(2)}function y(e){return e(4)}function b(e,t){return p(e,a(t,0))}function _(e,t){var n=e(1,(function(e){n(),t(e)}));return n}function w(){var e=[];return function(t,n){switch(t){case 2:return void e.splice(0,e.length);case 1:return e.push(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)};case 0:return void e.slice().forEach((function(e){e(n)}));default:throw new Error("unrecognized action "+t)}}}function E(e){var t=e,n=w();return function(e,r){switch(e){case 1:r(t);break;case 0:t=r;break;case 4:return t}return n(e,r)}}function x(e){return u(w(),(function(t){return b(e,t)}))}function k(e,t){return u(E(t),(function(t){return b(e,t)}))}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(o,e)}}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=C.apply(void 0,n);return function(t,n){switch(t){case 1:return p(e,i(n));case 2:return void v(e);default:throw new Error("unrecognized action "+t)}}}function T(e,t){return e===t}function M(e){var t;return void 0===e&&(e=T),function(n){return function(r){e(t,r)||(t=r,n(r))}}}function I(e){return function(t){return function(n){e(n)&&t(n)}}}function O(e){return function(t){return i(t,e)}}function R(e){return function(t){return function(){return t(e)}}}function N(e,t){return function(n){return function(r){return n(t=e(t,r))}}}function z(e){return function(t){return function(n){e>0?e--:t(n)}}}function L(e){var t,n;return function(r){return function(i){t=i,n||(n=setTimeout((function(){n=void 0,r(t)}),e))}}}function A(e){var t,n;return function(r){return function(i){t=i,n&&clearTimeout(n),n=setTimeout((function(){r(t)}),e)}}}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Array(t.length),i=0,o=null,a=Math.pow(2,t.length)-1;return t.forEach((function(e,t){var n=Math.pow(2,t);p(e,(function(e){var s=i;i|=n,r[t]=e,s!==a&&i===a&&o&&(o(),o=null)}))})),function(e){return function(t){var n=function(){return e([t].concat(r))};i===a?n():o=n}}}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){switch(e){case 1:return h.apply(void 0,t.map((function(e){return p(e,n)})));case 2:return;default:throw new Error("unrecognized action "+e)}}}function j(e,t){return void 0===t&&(t=T),S(e,M(t))}function D(){for(var e=w(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=new Array(n.length),o=0,a=Math.pow(2,n.length)-1;return n.forEach((function(t,n){var r=Math.pow(2,n);p(t,(function(t){i[n]=t,(o|=r)===a&&g(e,i)}))})),function(t,n){switch(t){case 1:return o===a&&n(i),p(e,n);case 2:return v(e);default:throw new Error("unrecognized action "+t)}}}function B(e,t,n){void 0===t&&(t=[]);var r=(void 0===n?{singleton:!0}:n).singleton;return{id:U(),constructor:e,dependencies:t,singleton:r}}var U=function(){return Symbol()};function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var q=["children"];var G="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;function Z(e,t,n){var i=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),l=Object.keys(t.methods||{}),c=Object.keys(t.events||{}),d=(0,r.createContext)({});function h(e,n){e.propsReady&&g(e.propsReady,!1);for(var r,a=W(i);!(r=a()).done;){var s=r.value;g(e[t.required[s]],n[s])}for(var l,u=W(o);!(l=u()).done;){var c=l.value;if(c in n)g(e[t.optional[c]],n[c])}e.propsReady&&g(e.propsReady,!0)}function b(e){return c.reduce((function(n,r){return n[r]=function(e){var t,n,r=function(){return t&&t()};return function(i,o){switch(i){case 1:if(o){if(n===o)return;return r(),n=o,t=p(e,o)}return r(),m;case 2:return r(),void(n=null);default:throw new Error("unrecognized action "+i)}}}(e[t.events[r]]),n}),{})}return{Component:(0,r.forwardRef)((function(a,m){var y=a.children,_=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(a,q),w=(0,r.useState)((function(){return u(function(e){var t=new Map;return function e(n){var r=n.id,i=n.constructor,o=n.dependencies,a=n.singleton;if(a&&t.has(r))return t.get(r);var s=i(o.map((function(t){return e(t)})));return a&&t.set(r,s),s}(e)}(e),(function(e){return h(e,_)}))}))[0],E=(0,r.useState)(s(b,w))[0];return G((function(){for(var e,t=W(c);!(e=t()).done;){var n=e.value;n in _&&p(E[n],_[n])}return function(){Object.values(E).map(v)}}),[_,E,w]),G((function(){h(w,_)})),(0,r.useImperativeHandle)(m,f(function(e){return l.reduce((function(n,r){return n[r]=function(n){g(e[t.methods[r]],n)},n}),{})}(w))),(0,r.createElement)(d.Provider,{value:w},n?(0,r.createElement)(n,function(e,t){for(var n={},r={},i=0,o=e.length;i<o;)r[e[i]]=1,i+=1;for(var a in t)r.hasOwnProperty(a)||(n[a]=t[a]);return n}([].concat(i,o,c),_),y):y)})),usePublisher:function(e){return(0,r.useCallback)(a(g,(0,r.useContext)(d)[e]),[e])},useEmitterValue:function(e){var t=(0,r.useContext)(d)[e],n=(0,r.useState)(s(y,t)),i=n[0],o=n[1];return G((function(){return p(t,(function(e){e!==i&&o(f(e))}))}),[t,i]),i},useEmitter:function(e,t){var n=(0,r.useContext)(d)[e];G((function(){return p(n,t)}),[t,n])}}}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Q,J,X,ee="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;(X=J||(J={}))[X.DEBUG=0]="DEBUG",X[X.INFO=1]="INFO",X[X.WARN=2]="WARN",X[X.ERROR=3]="ERROR";var te=((Q={})[J.DEBUG]="debug",Q[J.INFO]="log",Q[J.WARN]="warn",Q[J.ERROR]="error",Q),ne=B((function(){var e=E(J.ERROR);return{log:E((function(t,n,r){var i;void 0===r&&(r=J.INFO),r>=(null!=(i=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?i:y(e))&&console[te[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function re(e,t){void 0===t&&(t=!0);var n=(0,r.useRef)(null),i=function(e){};if("undefined"!=typeof ResizeObserver){var o=new ResizeObserver((function(t){var n=t[0].target;null!==n.offsetParent&&e(n)}));i=function(e){e&&t?(o.observe(e),n.current=e):(n.current&&o.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:i}}function ie(e,t){return void 0===t&&(t=!0),re(e,t).callbackRef}function oe(e,t,n,r,i,o){return re((function(n){for(var a=function(e,t,n,r){var i=e.length;if(0===i)return null;for(var o=[],a=0;a<i;a++){var s=e.item(a);if(s&&void 0!==s.dataset.index){var l=parseInt(s.dataset.index),u=parseFloat(s.dataset.knownSize),c=t(s,"offsetHeight");if(0===c&&r("Zero-sized element, this should not happen",{child:s},J.ERROR),c!==u){var d=o[o.length-1];0===o.length||d.size!==c||d.endIndex!==l-1?o.push({startIndex:l,endIndex:l,size:c}):o[o.length-1].endIndex++}}}return o}(n.children,t,0,i),s=n.parentElement;!s.dataset.virtuosoScroller;)s=s.parentElement;var l=o?o.scrollTop:"window"===s.firstElementChild.dataset.viewportType?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop;r({scrollTop:Math.max(l,0),scrollHeight:(null!=o?o:s).scrollHeight,viewportHeight:(null!=o?o:s).offsetHeight}),null!==a&&e(a)}),n)}function ae(e,t){return Math.round(e.getBoundingClientRect()[t])}function se(e,t,n,i,o){void 0===i&&(i=m);var a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(null),u=(0,r.useCallback)((function(n){var r=n.target,i=r===window||r===document?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,o=r===window?document.documentElement.scrollHeight:r.scrollHeight,a=r===window?window.innerHeight:r.offsetHeight;e({scrollTop:Math.max(i,0),scrollHeight:o,viewportHeight:a}),null!==s.current&&(i===s.current||i<=0||i===r.scrollHeight-ae(r,"height"))&&(s.current=null,t(!0),l.current&&(clearTimeout(l.current),l.current=null))}),[e,t]);return(0,r.useEffect)((function(){var e=o||a.current;return i(o||a.current),u({target:e}),e.addEventListener("scroll",u,{passive:!0}),function(){i(null),e.removeEventListener("scroll",u)}}),[a,u,n,i,o]),{scrollerRef:a,scrollByCallback:function(e){a.current.scrollBy(e)},scrollToCallback:function(n){var r=a.current;if(r&&(!("offsetHeight"in r)||0!==r.offsetHeight)){var i,o,u,c="smooth"===n.behavior;if(r===window?(o=Math.max(ae(document.documentElement,"height"),document.documentElement.scrollHeight),i=window.innerHeight,u=document.documentElement.scrollTop):(o=r.scrollHeight,i=ae(r,"height"),u=r.scrollTop),n.top=Math.ceil(Math.max(Math.min(o-i,n.top),0)),Math.abs(i-o)<1.01||n.top===u)return e({scrollTop:u,scrollHeight:o,viewportHeight:i}),void(c&&t(!0));c?(s.current=n.top,l.current&&clearTimeout(l.current),l.current=setTimeout((function(){l.current=null,s.current=null,t(!0)}),1e3)):s.current=null,r.scrollTo(n)}}}}var le=B((function(){var e=w(),t=w(),n=E(0),r=w(),i=E(0),o=w(),a=w(),s=E(0),l=E(0),u=w(),c=w(),d=E(!1),f=E(!1);return b(S(e,O((function(e){return e.scrollTop}))),t),b(S(e,O((function(e){return e.scrollHeight}))),a),b(t,i),{scrollContainerState:e,scrollTop:t,viewportHeight:o,headerHeight:s,footerHeight:l,scrollHeight:a,smoothScrollTargetReached:r,react18ConcurrentRendering:f,scrollTo:u,scrollBy:c,statefulScrollTop:i,deviation:n,scrollingInProgress:d}}),[],{singleton:!0}),ue={lvl:0};function ce(e,t,n,r,i){return void 0===r&&(r=ue),void 0===i&&(i=ue),{k:e,v:t,lvl:n,l:r,r:i}}function de(e){return e===ue}function fe(){return ue}function he(e,t){if(de(e))return ue;var n=e.k,r=e.l,i=e.r;if(t===n){if(de(r))return i;if(de(i))return r;var o=ye(r);return Ee(_e(e,{k:o[0],v:o[1],l:be(r)}))}return Ee(_e(e,t<n?{l:he(r,t)}:{r:he(i,t)}))}function me(e,t,n){if(void 0===n&&(n="k"),de(e))return[-1/0,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var r=me(e.r,t,n);return-1/0===r[0]?[e.k,e.v]:r}return me(e.l,t,n)}function pe(e,t,n){return de(e)?ce(t,n,1):t===e.k?_e(e,{k:t,v:n}):function(e){return Ce(Se(e))}(_e(e,t<e.k?{l:pe(e.l,t,n)}:{r:pe(e.r,t,n)}))}function ge(e,t,n){if(de(e))return[];var r=e.k,i=e.v,o=e.r,a=[];return r>t&&(a=a.concat(ge(e.l,t,n))),r>=t&&r<=n&&a.push({k:r,v:i}),r<=n&&(a=a.concat(ge(o,t,n))),a}function ve(e){return de(e)?[]:[].concat(ve(e.l),[{k:e.k,v:e.v}],ve(e.r))}function ye(e){return de(e.r)?[e.k,e.v]:ye(e.r)}function be(e){return de(e.r)?e.l:Ee(_e(e,{r:be(e.r)}))}function _e(e,t){return ce(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function we(e){return de(e)||e.lvl>e.r.lvl}function Ee(e){var t=e.l,n=e.r,r=e.lvl;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(we(t))return Se(_e(e,{lvl:r-1}));if(de(t)||de(t.r))throw new Error("Unexpected empty nodes");return _e(t.r,{l:_e(t,{r:t.r.l}),r:_e(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(we(e))return Ce(_e(e,{lvl:r-1}));if(de(n)||de(n.l))throw new Error("Unexpected empty nodes");var i=n.l,o=we(i)?n.lvl-1:n.lvl;return _e(i,{l:_e(e,{r:i.l,lvl:r-1}),r:Ce(_e(n,{l:i.r,lvl:o})),lvl:i.lvl+1})}function xe(e,t,n){return de(e)?[]:ke(ge(e,me(e,t)[0],n),(function(e){return{index:e.k,value:e.v}}))}function ke(e,t){var n=e.length;if(0===n)return[];for(var r=t(e[0]),i=r.index,o=r.value,a=[],s=1;s<n;s++){var l=t(e[s]),u=l.index,c=l.value;a.push({start:i,end:u-1,value:o}),i=u,o=c}return a.push({start:i,end:1/0,value:o}),a}function Ce(e){var t=e.r,n=e.lvl;return de(t)||de(t.r)||t.lvl!==n||t.r.lvl!==n?e:_e(t,{l:_e(e,{r:t.l}),lvl:n+1})}function Se(e){var t=e.l;return de(t)||t.lvl!==e.lvl?e:_e(t,{r:_e(e,{l:t.r})})}function Te(e,t,n,r){void 0===r&&(r=0);for(var i=e.length-1;r<=i;){var o=Math.floor((r+i)/2),a=n(e[o],t);if(0===a)return o;if(-1===a){if(i-r<2)return o-1;i=o-1}else{if(i===r)return o;r=o+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function Me(e,t,n){return e[Te(e,t,n)]}function Ie(e){var t=e.size,n=e.startIndex,r=e.endIndex;return function(e){return e.start===n&&(e.end===r||1/0===e.end)&&e.value===t}}function Oe(e,t){var n=e.index;return t===n?0:t<n?-1:1}function Re(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function Ne(e){return{index:e.index,value:e}}function ze(e,t,n){var r=e,i=0,o=0,a=0,s=0;if(0!==t){a=r[s=Te(r,t-1,Oe)].offset;var l=me(n,t-1);i=l[0],o=l[1],r.length&&r[s].size===me(n,t)[1]&&(s-=1),r=r.slice(0,s+1)}else r=[];for(var u,c=Y(xe(n,t,1/0));!(u=c()).done;){var d=u.value,f=d.start,h=d.value,m=(f-i)*o+a;r.push({offset:m,size:h,index:f}),i=f,a=m,o=h}return{offsetTree:r,lastIndex:i,lastOffset:a,lastSize:o}}function Le(e,t){var n=t[0],r=t[1];n.length>0&&(0,t[2])("received item sizes",n,J.DEBUG);var i=e.sizeTree,o=i,a=0;if(r.length>0&&de(i)&&2===n.length){var s=n[0].size,l=n[1].size;o=r.reduce((function(e,t){return pe(pe(e,t,s),t+1,l)}),o)}else{var u=function(e,t){for(var n,r=de(e)?0:1/0,i=Y(t);!(n=i()).done;){var o=n.value,a=o.size,s=o.startIndex,l=o.endIndex;if(r=Math.min(r,s),de(e))e=pe(e,0,a);else{var u=xe(e,s-1,l+1);if(!u.some(Ie(o))){for(var c,d=!1,f=!1,h=Y(u);!(c=h()).done;){var m=c.value,p=m.start,g=m.end,v=m.value;d?(l>=p||a===v)&&(e=he(e,p)):(f=v!==a,d=!0),g>l&&l>=p&&v!==a&&(e=pe(e,l+1,v))}f&&(e=pe(e,s,a))}}}return[e,r]}(o,n);o=u[0],a=u[1]}if(o===i)return e;var c=ze(e.offsetTree,a,o),d=c.offsetTree;return{sizeTree:o,offsetTree:d,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:r.reduce((function(e,t){return pe(e,t,Ae(t,d))}),fe()),groupIndices:r}}function Ae(e,t){if(0===t.length)return 0;var n=Me(t,e,Oe);return n.size*(e-n.index)+n.offset}function Fe(e,t){if(!Pe(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function Pe(e){return!de(e.groupOffsetTree)}var je={offsetHeight:"height",offsetWidth:"width"},De=B((function(e){var t=e[0].log,n=w(),r=w(),i=k(r,0),o=w(),a=w(),s=E(0),l=E([]),u=E(void 0),c=E(void 0),d=E((function(e,t){return ae(e,je[t])})),f=E(void 0),h={offsetTree:[],sizeTree:fe(),groupOffsetTree:fe(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},m=k(S(n,F(l,t),N(Le,h),M()),h);b(S(l,I((function(e){return e.length>0})),F(m),O((function(e){var t=e[0],n=e[1],r=t.reduce((function(e,t,r){return pe(e,t,Ae(t,n.offsetTree)||r)}),fe());return V({},n,{groupIndices:t,groupOffsetTree:r})}))),m),b(S(r,F(m),I((function(e){return e[0]<e[1].lastIndex})),O((function(e){var t=e[1];return[{startIndex:e[0],endIndex:t.lastIndex,size:t.lastSize}]}))),n),b(u,c);var v=k(S(u,O((function(e){return void 0===e}))),!0);b(S(c,I((function(e){return void 0!==e&&de(y(m).sizeTree)})),O((function(e){return[{startIndex:0,endIndex:0,size:e}]}))),n);var _=x(S(n,F(m),N((function(e,t){var n=t[1];return{changed:n!==e.sizes,sizes:n}}),{changed:!1,sizes:h}),O((function(e){return e.changed}))));p(S(s,N((function(e,t){return{diff:e.prev-t,prev:t}}),{diff:0,prev:0}),O((function(e){return e.diff}))),(function(e){e>0?g(o,e):e<0&&g(a,e)})),p(S(s,F(t)),(function(e){e[0]<0&&(0,e[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},J.ERROR)}));var C=x(o);b(S(o,F(m),O((function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return ve(n.sizeTree).reduce((function(e,n){var r=n.k,i=n.v;return{ranges:[].concat(e.ranges,[{startIndex:e.prevIndex,endIndex:r+t-1,size:e.prevSize}]),prevIndex:r+t,prevSize:i}}),{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges}))),n);var T=x(S(a,F(m),O((function(e){return Ae(-e[0],e[1].offsetTree)}))));return b(S(a,F(m),O((function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var r=ve(n.sizeTree).reduce((function(e,n){var r=n.v;return pe(e,Math.max(0,n.k+t),r)}),fe());return V({},n,{sizeTree:r},ze(n.offsetTree,0,r))}))),m),{data:f,totalCount:r,sizeRanges:n,groupIndices:l,defaultItemSize:c,fixedItemSize:u,unshiftWith:o,shiftWith:a,shiftWithOffset:T,beforeUnshiftWith:C,firstItemIndex:s,sizes:m,listRefresh:_,statefulTotalCount:i,trackItemSizes:v,itemSize:d}}),c(ne),{singleton:!0}),Be="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function Ue(e){var t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&Be||(t.behavior="auto"),t.offset||(t.offset=0),t}var He=B((function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=t.listRefresh,o=e[1],a=o.scrollingInProgress,s=o.viewportHeight,l=o.scrollTo,u=o.smoothScrollTargetReached,c=o.headerHeight,d=o.footerHeight,f=e[2].log,h=w(),m=E(0),v=null,y=null,x=null;function k(){v&&(v(),v=null),x&&(x(),x=null),y&&(clearTimeout(y),y=null),g(a,!1)}return b(S(h,F(n,s,r,m,c,d,f),O((function(e){var t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],l=e[5],c=e[6],d=e[7],f=Ue(t),m=f.align,b=f.behavior,w=f.offset,E=o-1,C=f.index;"LAST"===C&&(C=E),C=Fe(C,n);var T=Ae(C=Math.max(0,C,Math.min(E,C)),n.offsetTree)+l;"end"===m?(T=T-r+me(n.sizeTree,C)[1],C===E&&(T+=c)):"center"===m?T=T-r/2+me(n.sizeTree,C)[1]/2:T-=s,w&&(T+=w);var M=function(e){k(),e?(d("retrying to scroll to",{location:t},J.DEBUG),g(h,t)):d("list did not change, scroll successful",{},J.DEBUG)};if(k(),"smooth"===b){var I=!1;x=p(i,(function(e){I=I||e})),v=_(u,(function(){M(I)}))}else v=_(S(i,(function(e){var t=setTimeout((function(){e(!1)}),50);return function(n){n&&(e(!0),clearTimeout(t))}})),M);return y=setTimeout((function(){k()}),1200),g(a,!0),d("scrolling from index to",{index:C,top:T,behavior:b},J.DEBUG),{top:T,behavior:b}}))),l),{scrollToIndex:h,topListHeight:m}}),c(De,le,ne),{singleton:!0}),We="up",qe={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ge=B((function(e){var t=e[0],n=t.scrollContainerState,r=t.scrollTop,i=t.viewportHeight,o=t.headerHeight,a=t.footerHeight,s=t.scrollBy,l=E(!1),u=E(!0),c=w(),d=w(),f=E(4),h=x(S(P(S(j(r),z(1),R(!0)),S(j(r),z(1),R(!1),A(100))),M())),m=k(S(P(S(s,R(!0)),S(s,R(!1),A(200))),M()),!1);b(S(j(r),O((function(e){return 0===e})),M()),u),b(u,d);var p=x(S(D(n,j(i),j(o),j(a),j(f)),N((function(e,t){var n,r,i=t[0],o=i.scrollTop,a=i.scrollHeight,s=t[1],l={viewportHeight:s,scrollTop:o,scrollHeight:a};return o+s-a>-t[4]?(o>e.state.scrollTop?(n="SCROLLED_DOWN",r=e.state.scrollTop-o):(n="SIZE_DECREASED",r=e.state.scrollTop-o||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:n,scrollTopDelta:r}):{atBottom:!1,notAtBottomBecause:l.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":s<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":o<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:l}}),qe),M((function(e,t){return e&&e.atBottom===t.atBottom})))),g=k(S(n,N((function(e,t){var n=t.scrollTop,r=t.scrollHeight;return e.scrollHeight!==r?e.scrollTop!==n&&n===r-t.viewportHeight?{scrollHeight:r,scrollTop:n,jump:e.scrollTop-n,changed:!0}:{scrollHeight:r,scrollTop:n,jump:0,changed:!0}:{scrollTop:n,scrollHeight:r,jump:0,changed:!1}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),I((function(e){return e.changed})),O((function(e){return e.jump}))),0);b(S(p,O((function(e){return e.atBottom}))),l),b(S(l,L(50)),c);var v=E("down");b(S(n,O((function(e){return e.scrollTop})),M(),N((function(e,t){return y(m)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?We:"down",prevScrollTop:t}}),{direction:"down",prevScrollTop:0}),O((function(e){return e.direction}))),v),b(S(n,L(50),R("none")),v);var _=E(0);return b(S(h,I((function(e){return!e})),R(0)),_),b(S(r,L(100),F(h),I((function(e){return!!e[1]})),N((function(e,t){return[e[1],t[0]]}),[0,0]),O((function(e){return e[1]-e[0]}))),_),{isScrolling:h,isAtTop:u,isAtBottom:l,atBottomState:p,atTopStateChange:d,atBottomStateChange:c,scrollDirection:v,atBottomThreshold:f,scrollVelocity:_,lastJumpDueToItemResize:g}}),c(le)),Ze=B((function(e){var t=e[0].log,n=E(!1),r=x(S(n,I((function(e){return e})),M()));return p(n,(function(e){e&&y(t)("props updated",{},J.DEBUG)})),{propsReady:n,didMount:r}}),c(ne),{singleton:!0}),Ve=B((function(e){var t=e[0],n=t.sizes,r=t.listRefresh,i=t.defaultItemSize,o=e[1].scrollTop,a=e[2].scrollToIndex,s=e[3].didMount,l=E(!0),u=E(0);return b(S(s,F(u),I((function(e){return!!e[1]})),R(!1)),l),p(S(D(r,s),F(l,n,i),I((function(e){var t=e[1],n=e[3];return e[0][1]&&(!de(e[2].sizeTree)||void 0!==n)&&!t})),F(u)),(function(e){var t=e[1];setTimeout((function(){_(o,(function(){g(l,!0)})),g(a,t)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:u}}),c(De,le,He,Ze),{singleton:!0});function Ke(e){return!!e&&("smooth"===e?"smooth":"auto")}var $e=B((function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,i=e[1],o=i.isAtBottom,a=i.atBottomState,s=e[2].scrollToIndex,l=e[3].scrolledToInitialItem,u=e[4],c=u.propsReady,d=u.didMount,f=e[5].log,h=e[6].scrollingInProgress,m=E(!1),v=null;function b(e){g(s,{index:"LAST",align:"end",behavior:e})}return p(S(D(S(j(n),z(1)),d),F(j(m),o,l,h),O((function(e){var t=e[0],n=t[0],r=t[1]&&e[3],i="auto";return r&&(i=function(e,t){return"function"==typeof e?Ke(e(t)):t&&Ke(e)}(e[1],e[2]||e[4]),r=r&&!!i),{totalCount:n,shouldFollow:r,followOutputBehavior:i}})),I((function(e){return e.shouldFollow}))),(function(e){var t=e.totalCount,n=e.followOutputBehavior;v&&(v(),v=null),v=_(r,(function(){y(f)("following output to ",{totalCount:t},J.DEBUG),b(n),v=null}))})),p(S(D(j(m),n,c),I((function(e){return e[0]&&e[2]})),N((function(e,t){var n=t[1];return{refreshed:e.value===n,value:n}}),{refreshed:!1,value:0}),I((function(e){return e.refreshed})),F(m,n)),(function(e){var t=e[1],n=_(a,(function(e){!t||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||v||(y(f)("scrolling to bottom due to increased size",{},J.DEBUG),b("auto"))}));setTimeout(n,100)})),p(D(j(m),a),(function(e){var t=e[1];e[0]&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&b("auto")})),{followOutput:m}}),c(De,Ge,He,Ve,Ze,ne,le));function Ye(e){return e.reduce((function(e,t){return e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e}),{totalCount:0,groupIndices:[]})}var Qe=B((function(e){var t=e[0],n=t.totalCount,r=t.groupIndices,i=t.sizes,o=e[1],a=o.scrollTop,s=o.headerHeight,u=w(),c=w(),d=x(S(u,O(Ye)));return b(S(d,O(l("totalCount"))),n),b(S(d,O(l("groupIndices"))),r),b(S(D(a,i,s),I((function(e){return Pe(e[1])})),O((function(e){return me(e[1].groupOffsetTree,Math.max(e[0]-e[2],0),"v")[0]})),M(),O((function(e){return[e]}))),c),{groupCounts:u,topItemsIndexes:c}}),c(De,le));function Je(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function Xe(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function et(e,t,n){return"number"==typeof e?n===We&&"top"===t||"down"===n&&"bottom"===t?e:0:n===We?"top"===t?e.main:e.reverse:"bottom"===t?e.main:e.reverse}function tt(e,t){return"number"==typeof e?e:e[t]||0}var nt=B((function(e){var t=e[0],n=t.scrollTop,r=t.viewportHeight,i=t.deviation,o=t.headerHeight,a=w(),s=E(0),l=E(0),u=E(0),c=E(0);return{listBoundary:a,overscan:c,topListHeight:s,fixedHeaderHeight:l,increaseViewportBy:u,visibleRange:k(S(D(j(n),j(r),j(o),j(a,Je),j(c),j(s),j(l),j(i),j(u)),O((function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=i[0],a=i[1],s=e[4],l=e[6],u=e[7],c=e[8],d=t-u,f=e[5]+l,h=Math.max(r-d,0),m="none",p=tt(c,"top"),g=tt(c,"bottom");return o-=u,a+=r+l,(o+=r+l)>t+f-p&&(m=We),(a-=u)<t-h+n+g&&(m="down"),"none"!==m?[Math.max(d-r-et(s,"top",m)-p,0),d-h-l+n+et(s,"bottom",m)+g]:null})),I((function(e){return null!=e})),M(Je)),[0,0])}}),c(le),{singleton:!0}),rt={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function it(e,t,n){if(0===e.length)return[];if(!Pe(t))return e.map((function(e){return V({},e,{index:e.index+n,originalIndex:e.index})}));for(var r,i=[],o=xe(t.groupOffsetTree,e[0].index,e[e.length-1].index),a=void 0,s=0,l=Y(e);!(r=l()).done;){var u=r.value;(!a||a.end<u.index)&&(a=o.shift(),s=t.groupIndices.indexOf(a.start)),i.push(V({},u.index===a.start?{type:"group",index:s}:{index:u.index-(s+1)+n,groupIndex:s},{size:u.size,offset:u.offset,originalIndex:u.index,data:u.data}))}return i}function ot(e,t,n,r,i){var o=0,a=0;if(e.length>0){o=e[0].offset;var s=e[e.length-1];a=s.offset+s.size}var l=o,u=r.lastOffset+(n-r.lastIndex)*r.lastSize-a;return{items:it(e,r,i),topItems:it(t,r,i),topListHeight:t.reduce((function(e,t){return t.size+e}),0),offsetTop:o,offsetBottom:u,top:l,bottom:a,totalCount:n}}var at,st,lt,ut=B((function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=t.data,o=t.firstItemIndex,a=e[1],s=e[2],c=s.visibleRange,d=s.listBoundary,f=s.topListHeight,h=e[3],m=h.scrolledToInitialItem,p=h.initialTopMostItemIndex,g=e[4].topListHeight,v=e[5],y=e[6].didMount,_=E([]),C=w();b(a.topItemsIndexes,_);var T=k(S(D(y,j(c),j(r),j(n),j(p),m,j(_),j(o),i),I((function(e){return e[0]})),O((function(e){var t=e[1],n=t[0],r=t[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],d=e[3],f=d.sizeTree,h=d.offsetTree;if(0===i||0===n&&0===r)return rt;if(de(f))return ot(function(e,t,n){if(Pe(t)){var r=Fe(e,t);return[{index:me(t.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(function(e,t){return"number"==typeof e?e:"LAST"===e.index?t-1:e.index}(o,i),d,c),[],i,d,l);var m=[];if(s.length>0)for(var p,g=s[0],v=s[s.length-1],y=0,b=Y(xe(f,g,v));!(p=b()).done;)for(var _=p.value,w=_.value,E=Math.max(_.start,g),x=Math.min(_.end,v),k=E;k<=x;k++)m.push({index:k,size:w,offset:y,data:c&&c[k]}),y+=w;if(!a)return ot([],m,i,d,l);var C=s.length>0?s[s.length-1]+1:0,S=function(e,t,n,r){return void 0===r&&(r=0),r>0&&(t=Math.max(t,Me(e,r,Oe).offset)),ke((o=n,s=Te(i=e,t,a=Re),l=Te(i,o,a,s),i.slice(s,l+1)),Ne);var i,o,a,s,l}(h,n,r,C);if(0===S.length)return null;var T=i-1;return ot(u([],(function(e){for(var t,i=Y(S);!(t=i()).done;){var o=t.value,a=o.value,s=a.offset,l=o.start,u=a.size;a.offset<n&&(s+=((l+=Math.floor((n-a.offset)/u))-o.start)*u),l<C&&(s+=(C-l)*u,l=C);for(var d=Math.min(o.end,T),f=l;f<=d&&!(s>=r);f++)e.push({index:f,size:u,offset:s,data:c&&c[f]}),s+=u}})),m,i,d,l)})),I((function(e){return null!==e})),M()),rt);return b(S(i,I((function(e){return void 0!==e})),O((function(e){return e.length}))),r),b(S(T,O(l("topListHeight"))),g),b(g,f),b(S(T,O((function(e){return[e.top,e.bottom]}))),d),b(S(T,O((function(e){return e.items}))),C),V({listState:T,topItemsIndexes:_,endReached:x(S(T,I((function(e){return e.items.length>0})),F(r,i),I((function(e){var t=e[0].items;return t[t.length-1].originalIndex===e[1]-1})),O((function(e){return[e[1]-1,e[2]]})),M(Je),O((function(e){return e[0]})))),startReached:x(S(T,L(200),I((function(e){var t=e.items;return t.length>0&&t[0].originalIndex===e.topItems.length})),O((function(e){return e.items[0].index})),M())),rangeChanged:x(S(T,I((function(e){return e.items.length>0})),O((function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}})),M(Xe))),itemsRendered:C},v)}),c(De,Qe,nt,Ve,He,Ge,Ze),{singleton:!0}),ct=B((function(e){var t=e[0],n=t.sizes,r=t.firstItemIndex,i=t.data,o=e[1].listState,a=e[2].didMount,s=E(0);return b(S(a,F(s),I((function(e){return 0!==e[1]})),F(n,r,i),O((function(e){var t=e[0][1],n=e[1],r=e[2],i=e[3],o=void 0===i?[]:i,a=0;if(n.groupIndices.length>0)for(var s,l=Y(n.groupIndices);!((s=l()).done||s.value-a>=t);)a++;var u=t+a;return ot(Array.from({length:u}).map((function(e,t){return{index:t,size:0,offset:0,data:o[t]}})),[],u,n,r)}))),o),{initialItemCount:s}}),c(De,ut,Ze),{singleton:!0}),dt=B((function(e){var t=e[0].scrollVelocity,n=E(!1),r=w(),i=E(!1);return b(S(t,F(i,n,r),I((function(e){return!!e[1]})),O((function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=n.enter;if(r){if((0,n.exit)(t,i))return!1}else if(o(t,i))return!0;return r})),M()),n),p(S(D(n,t,r),F(i)),(function(e){var t=e[0],n=e[1];return t[0]&&n&&n.change&&n.change(t[1],t[2])})),{isSeeking:n,scrollSeekConfiguration:i,scrollVelocity:t,scrollSeekRangeChanged:r}}),c(Ge),{singleton:!0}),ft=B((function(e){var t=e[0].topItemsIndexes,n=E(0);return b(S(n,I((function(e){return e>0})),O((function(e){return Array.from({length:e}).map((function(e,t){return t}))}))),t),{topItemCount:n}}),c(ut)),ht=B((function(e){var t=e[0],n=t.footerHeight,r=t.headerHeight,i=e[1].listState,o=w(),a=k(S(D(n,r,i),O((function(e){var t=e[2];return e[0]+e[1]+t.offsetBottom+t.bottom}))),0);return b(j(a),o),{totalListHeight:a,totalListHeightChanged:o}}),c(le,ut),{singleton:!0}),mt=B((function(e){var t=e[0],n=t.scrollBy,r=t.scrollTop,i=t.deviation,o=t.scrollingInProgress,a=e[1],s=a.isScrolling,l=a.isAtBottom,u=a.atBottomState,c=a.scrollDirection,d=e[3],f=d.beforeUnshiftWith,h=d.shiftWithOffset,m=d.sizes,v=e[4].log,y=x(S(e[2].listState,F(a.lastJumpDueToItemResize),N((function(e,t){var n=e[1],r=t[0],i=r.items,o=r.totalCount,a=r.bottom+r.offsetBottom,s=0;return e[2]===o&&n.length>0&&i.length>0&&(0===i[0].originalIndex&&0===n[0].originalIndex||0!=(s=a-e[3])&&(s+=t[1])),[s,i,o,a]}),[0,[],0,0]),I((function(e){return 0!==e[0]})),F(r,c,o,v,l,u),I((function(e){return!e[3]&&0!==e[1]&&e[2]===We})),O((function(e){var t=e[0][0];return(0,e[4])("Upward scrolling compensation",{amount:t},J.DEBUG),t}))));return b(S(y,F(i),O((function(e){return e[1]-e[0]}))),i),p(S(D(k(s,!1),i),I((function(e){return!e[0]&&0!==e[1]})),O((function(e){return e[1]})),L(1)),(function(e){e>0?(g(n,{top:-e,behavior:"auto"}),g(i,0)):(g(i,0),g(n,{top:-e,behavior:"auto"}))})),b(S(h,O((function(e){return{top:-e}}))),n),b(S(f,F(m),O((function(e){return e[0]*e[1].lastSize}))),y),{deviation:i}}),c(le,Ge,ut,De,ne)),pt=B((function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,i=E(0);return p(S(n,F(i),I((function(e){return 0!==e[1]})),O((function(e){return{top:e[1]}}))),(function(e){_(S(t,I((function(e){return 0!==e}))),(function(){setTimeout((function(){g(r,e)}))}))})),{initialScrollTop:i}}),c(ht,Ze,le),{singleton:!0}),gt=B((function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=E(!1);return{alignToBottom:r,paddingTopAddition:k(S(D(r,t,n),I((function(e){return e[0]})),O((function(e){return Math.max(0,e[1]-e[2])})),M()),0)}}),c(le,ht),{singleton:!0}),vt=B((function(e){var t=e[0],n=t.scrollTo,r=t.scrollContainerState,i=w(),o=w(),a=w(),s=E(!1),l=E(void 0);return b(S(D(i,o),O((function(e){var t=e[0],n=t.viewportHeight,r=t.scrollHeight;return{scrollTop:Math.max(0,t.scrollTop-e[1].offsetTop),scrollHeight:r,viewportHeight:n}}))),r),b(S(n,F(o),O((function(e){var t=e[0];return V({},t,{top:t.top+e[1].offsetTop})}))),a),{useWindowScroll:s,customScrollParent:l,windowScrollContainerState:i,windowViewportRect:o,windowScrollTo:a}}),c(le)),yt=B((function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=e[1],o=i.scrollTop,a=i.viewportHeight,s=i.headerHeight,l=i.scrollingInProgress,u=e[2].scrollToIndex,c=w();return b(S(c,F(n,a,r,s,o),O((function(e){var t=e[0],n=t.index,r=t.behavior,i=void 0===r?"auto":r,o=t.done,a=e[1],s=e[2],u=e[4],c=e[5],d=e[3]-1,f=null;n=Fe(n,a);var h=Ae(n=Math.max(0,n,Math.min(d,n)),a.offsetTree)+u;return h<c?f={index:n,behavior:i,align:"start"}:h+me(a.sizeTree,n)[1]>c+s&&(f={index:n,behavior:i,align:"end"}),f?o&&_(S(l,z(1),I((function(e){return!1===e}))),o):o&&o(),f})),I((function(e){return null!==e}))),u),{scrollIntoView:c}}),c(De,le,He,ut,ne),{singleton:!0}),bt=["listState","topItemsIndexes"],_t=B((function(e){return V({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}),c(nt,ct,Ze,dt,ht,pt,gt,vt,yt)),wt=B((function(e){var t=e[0],n=t.totalCount,r=t.sizeRanges,i=t.fixedItemSize,o=t.defaultItemSize,a=t.trackItemSizes,s=t.itemSize,u=t.data,c=t.firstItemIndex,d=t.groupIndices,f=t.statefulTotalCount,h=e[1],m=h.initialTopMostItemIndex,p=h.scrolledToInitialItem,g=e[2],v=e[3],y=e[4],_=y.listState,w=y.topItemsIndexes,E=K(y,bt),x=e[5].scrollToIndex,k=e[7].topItemCount,C=e[8].groupCounts,T=e[9],M=e[10];return b(E.rangeChanged,T.scrollSeekRangeChanged),b(S(T.windowViewportRect,O(l("visibleHeight"))),g.viewportHeight),V({totalCount:n,data:u,firstItemIndex:c,sizeRanges:r,initialTopMostItemIndex:m,scrolledToInitialItem:p,topItemsIndexes:w,topItemCount:k,groupCounts:C,fixedItemHeight:i,defaultItemHeight:o},v,{statefulTotalCount:f,listState:_,scrollToIndex:x,trackItemSizes:a,itemSize:s,groupIndices:d},E,T,g,M)}),c(De,Ve,le,$e,ut,He,mt,ft,Qe,_t,ne)),Et=(at=function(){if("undefined"==typeof document)return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky","-webkit-sticky"===e.style.position?"-webkit-sticky":"sticky"},lt=!1,function(){return lt||(lt=!0,st=at()),st});function xt(e,t){var n=(0,r.useRef)(null),i=(0,r.useCallback)((function(r){if(null!==r){var i,o,a=r.getBoundingClientRect(),s=a.width;if(t){var l=t.getBoundingClientRect(),u=a.top-l.top;i=l.height-Math.max(0,u),o=u+t.scrollTop}else i=window.innerHeight-Math.max(0,a.top),o=a.top+window.pageYOffset;n.current={offsetTop:o,visibleHeight:i,visibleWidth:s},e(n.current)}}),[e,t]),o=re(i),a=o.callbackRef,s=o.ref,l=(0,r.useCallback)((function(){i(s.current)}),[i,s]);return(0,r.useEffect)((function(){if(t){t.addEventListener("scroll",l);var e=new ResizeObserver(l);return e.observe(t),function(){t.removeEventListener("scroll",l),e.unobserve(t)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),function(){window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}}),[l,t]),a}var kt=["placeholder"],Ct=["style","children"],St=["style","children"];function Tt(e){return e}var Mt=B((function(){var e=E((function(e){return"Item "+e})),t=E(null),n=E((function(e){return"Group "+e})),r=E({}),i=E(Tt),o=E("div"),a=E(m),s=function(e,t){return void 0===t&&(t=null),k(S(r,O((function(t){return t[e]})),M()),t)};return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:i,headerFooterTag:o,scrollerRef:a,FooterComponent:s("Footer"),HeaderComponent:s("Header"),TopItemListComponent:s("TopItemList"),ListComponent:s("List","div"),ItemComponent:s("Item","div"),GroupComponent:s("Group","div"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}}));function It(e,t){var n=w();return p(n,(function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")})),b(n,e),n}var Ot=B((function(e){var t=e[0],n=e[1],r={item:It(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:It(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:It(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:It(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:It(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:w(),maxHeightCacheSize:w(),footer:w(),header:w(),HeaderContainer:w(),FooterContainer:w(),ItemContainer:w(),ScrollContainer:w(),GroupContainer:w(),ListContainer:w(),emptyComponent:w(),scrollSeek:w()};function i(e,t,r){b(S(e,F(n.components),O((function(e){var n,i=e[0],o=e[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+t+" instead."),V({},o,((n={})[t]=i,n))}))),n.components)}return p(r.adjustForPrependedItems,(function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),p(r.maxHeightCacheSize,(function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),p(r.HeaderContainer,(function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),p(r.FooterContainer,(function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),p(r.scrollSeek,(function(e){var r=e.placeholder,i=K(e,kt);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),g(n.components,V({},y(n.components),{ScrollSeekPlaceholder:r})),g(t.scrollSeekConfiguration,i)})),i(r.footer,"Footer","footer"),i(r.header,"Header","header"),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),i(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),i(r.GroupContainer,"Group","GroupContainer"),V({},t,n,r)}),c(wt,Mt)),Rt=function(e){return r.createElement("div",{style:{height:e.height}})},Nt={position:Et(),zIndex:1,overflowAnchor:"none"},zt={overflowAnchor:"none"},Lt=r.memo((function(e){var t=e.showTopList,n=void 0!==t&&t,i=$t("listState"),o=Kt("sizeRanges"),a=$t("useWindowScroll"),s=$t("customScrollParent"),l=Kt("windowScrollContainerState"),u=Kt("scrollContainerState"),c=s||a?l:u,d=$t("itemContent"),f=$t("context"),h=$t("groupContent"),p=$t("trackItemSizes"),g=oe(o,$t("itemSize"),p,n?m:c,$t("log"),s),v=g.callbackRef,y=g.ref,b=r.useState(0),_=b[0],w=b[1];Yt("deviation",(function(e){_!==e&&(y.current.style.marginTop=e+"px",w(e))}));var E=$t("EmptyPlaceholder"),x=$t("ScrollSeekPlaceholder")||Rt,k=$t("ListComponent"),C=$t("ItemComponent"),S=$t("GroupComponent"),T=$t("computeItemKey"),M=$t("isSeeking"),I=$t("groupIndices").length>0,O=$t("paddingTopAddition"),R=$t("firstItemIndex"),N=$t("statefulTotalCount"),z=n?{}:{boxSizing:"border-box",paddingTop:i.offsetTop+O,paddingBottom:i.offsetBottom,marginTop:_};return!n&&0===N&&E?(0,r.createElement)(E,jt(E,f)):(0,r.createElement)(k,V({},jt(k,f),{ref:v,style:z,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?i.topItems:i.items).map((function(e){var t=e.originalIndex,n=T(t+R,e.data,f);return M?(0,r.createElement)(x,V({},jt(x,f),{key:n,index:e.index,height:e.size,type:e.type||"item"},"group"===e.type?{}:{groupIndex:e.groupIndex})):"group"===e.type?(0,r.createElement)(S,V({},jt(S,f),{key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:Nt}),h(e.index)):(0,r.createElement)(C,V({},jt(C,f),{key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:zt}),I?d(e.index,e.groupIndex,e.data,f):d(e.index,e.data,f))})))})),At={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Ft={width:"100%",height:"100%",position:"absolute",top:0},Pt={width:"100%",position:Et(),top:0};function jt(e,t){if("string"!=typeof e)return{context:t}}var Dt=r.memo((function(){var e=$t("HeaderComponent"),t=Kt("headerHeight"),n=$t("headerFooterTag"),i=ie((function(e){return t(ae(e,"height"))})),o=$t("context");return e?(0,r.createElement)(n,{ref:i},(0,r.createElement)(e,jt(e,o))):null})),Bt=r.memo((function(){var e=$t("FooterComponent"),t=Kt("footerHeight"),n=$t("headerFooterTag"),i=ie((function(e){return t(ae(e,"height"))})),o=$t("context");return e?(0,r.createElement)(n,{ref:i},(0,r.createElement)(e,jt(e,o))):null}));function Ut(e){var t=e.usePublisher,n=e.useEmitter,i=e.useEmitterValue;return r.memo((function(e){var o=e.style,a=e.children,s=K(e,Ct),l=t("scrollContainerState"),u=i("ScrollerComponent"),c=t("smoothScrollTargetReached"),d=i("scrollerRef"),f=i("context"),h=se(l,c,u,d),m=h.scrollerRef,p=h.scrollByCallback;return n("scrollTo",h.scrollToCallback),n("scrollBy",p),(0,r.createElement)(u,V({ref:m,style:V({},At,o),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},s,jt(u,f)),a)}))}function Ht(e){var t=e.usePublisher,n=e.useEmitter,i=e.useEmitterValue;return r.memo((function(e){var o=e.style,a=e.children,s=K(e,St),l=t("windowScrollContainerState"),u=i("ScrollerComponent"),c=t("smoothScrollTargetReached"),d=i("totalListHeight"),f=i("deviation"),h=i("customScrollParent"),p=i("context"),g=se(l,c,u,m,h),v=g.scrollerRef,y=g.scrollByCallback,b=g.scrollToCallback;return ee((function(){return v.current=h||window,function(){v.current=null}}),[v,h]),n("windowScrollTo",b),n("scrollBy",y),(0,r.createElement)(u,V({style:V({position:"relative"},o,0!==d?{height:d+f}:{}),"data-virtuoso-scroller":!0},s,jt(u,p)),a)}))}var Wt=function(e){var t=e.children,n=ie(i(Kt("viewportHeight"),(function(e){return ae(e,"height")})));return r.createElement("div",{style:Ft,ref:n,"data-viewport-type":"element"},t)},qt=function(e){var t=e.children,n=xt(Kt("windowViewportRect"),$t("customScrollParent"));return r.createElement("div",{ref:n,style:Ft,"data-viewport-type":"window"},t)},Gt=function(e){var t=e.children,n=$t("TopItemListComponent"),i=$t("headerHeight"),o=V({},Pt,{marginTop:i+"px"}),a=$t("context");return(0,r.createElement)(n||"div",{style:o,context:a},t)},Zt=Z(Ot,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},r.memo((function(e){var t=$t("useWindowScroll"),n=$t("topItemsIndexes").length>0,i=$t("customScrollParent"),o=i||t?qt:Wt;return r.createElement(i||t?Jt:Qt,V({},e),r.createElement(o,null,r.createElement(Dt,null),r.createElement(Lt,null),r.createElement(Bt,null)),n&&r.createElement(Gt,null,r.createElement(Lt,{showTopList:!0})))}))),Vt=Zt.Component,Kt=Zt.usePublisher,$t=Zt.useEmitterValue,Yt=Zt.useEmitter,Qt=Ut({usePublisher:Kt,useEmitterValue:$t,useEmitter:Yt}),Jt=Ht({usePublisher:Kt,useEmitterValue:$t,useEmitter:Yt}),Xt={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},en={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},tn=Math.round,nn=Math.ceil,rn=Math.floor,on=Math.min,an=Math.max;function sn(e,t){return Array.from({length:t-e+1}).map((function(t,n){return{index:n+e}}))}var ln=B((function(e){var t=e[0],n=t.overscan,r=t.visibleRange,i=t.listBoundary,o=e[1],a=o.scrollTop,s=o.viewportHeight,l=o.scrollBy,u=o.scrollTo,c=o.smoothScrollTargetReached,d=o.scrollContainerState,f=e[2],h=e[3],m=e[4],p=m.propsReady,g=m.didMount,v=e[5],y=v.windowViewportRect,_=v.windowScrollTo,C=v.useWindowScroll,T=v.customScrollParent,N=v.windowScrollContainerState,z=E(0),L=E(0),A=E(Xt),P=E({height:0,width:0}),B=E({height:0,width:0}),U=w(),H=w(),W=E(0);b(S(g,F(L),I((function(e){return 0!==e[1]})),O((function(e){return{items:sn(0,e[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),A),b(S(D(j(z),r,j(B,(function(e,t){return e&&e.width===t.width&&e.height===t.height}))),F(P),O((function(e){var t=e[0],n=t[0],r=t[1],i=r[0],o=r[1],a=t[2],s=e[1],l=a.height,u=a.width,c=s.width;if(0===n||0===c)return Xt;if(0===u)return en;var d=dn(c,u),f=d*rn(i/l),h=d*nn(o/l)-1;h=on(n-1,h);var m=sn(f=on(h,an(0,f)),h),p=un(s,a,m),g=p.top,v=p.bottom;return{items:m,offsetTop:g,offsetBottom:nn(n/d)*l-v,top:g,bottom:v,itemHeight:l,itemWidth:u}}))),A),b(S(P,O((function(e){return e.height}))),s),b(S(D(P,B,A),O((function(e){var t=un(e[0],e[1],e[2].items);return[t.top,t.bottom]})),M(Je)),i);var q=x(S(j(A),I((function(e){return e.items.length>0})),F(z),I((function(e){var t=e[0].items;return t[t.length-1].index===e[1]-1})),O((function(e){return e[1]-1})),M())),G=x(S(j(A),I((function(e){var t=e.items;return t.length>0&&0===t[0].index})),R(0),M())),Z=x(S(j(A),I((function(e){return e.items.length>0})),O((function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}})),M(Xe)));b(Z,h.scrollSeekRangeChanged),b(S(U,F(P,B,z),O((function(e){var t=e[1],n=e[2],r=e[3],i=Ue(e[0]),o=i.align,a=i.behavior,s=i.offset,l=i.index;"LAST"===l&&(l=r-1);var u=cn(t,n,l=an(0,l,on(r-1,l)));return"end"===o?u=tn(u-t.height+n.height):"center"===o&&(u=tn(u-t.height/2+n.height/2)),s&&(u+=s),{top:u,behavior:a}}))),u);var K=k(S(A,O((function(e){return e.offsetBottom+e.bottom}))),0);return b(S(y,O((function(e){return{width:e.visibleWidth,height:e.visibleHeight}}))),P),V({totalCount:z,viewportDimensions:P,itemDimensions:B,scrollTop:a,scrollHeight:H,overscan:n,scrollBy:l,scrollTo:u,scrollToIndex:U,smoothScrollTargetReached:c,windowViewportRect:y,windowScrollTo:_,useWindowScroll:C,customScrollParent:T,windowScrollContainerState:N,deviation:W,scrollContainerState:d,initialItemCount:L},h,{gridState:A,totalListHeight:K},f,{startReached:G,endReached:q,rangeChanged:Z,propsReady:p})}),c(nt,le,Ge,dt,Ze,vt));function un(e,t,n){var r=t.height;return void 0===r||0===n.length?{top:0,bottom:0}:{top:cn(e,t,n[0].index),bottom:cn(e,t,n[n.length-1].index)+r}}function cn(e,t,n){var r=dn(e.width,t.width);return rn(n/r)*t.height}function dn(e,t){return an(1,rn(e/t))}var fn=["placeholder"],hn=B((function(){var e=E((function(e){return"Item "+e})),t=E({}),n=E(null),r=E("virtuoso-grid-item"),i=E("virtuoso-grid-list"),o=E(Tt),a=E(m),s=function(e,n){return void 0===n&&(n=null),k(S(t,O((function(t){return t[e]})),M()),n)};return{context:n,itemContent:e,components:t,computeItemKey:o,itemClassName:r,listClassName:i,scrollerRef:a,ListComponent:s("List","div"),ItemComponent:s("Item","div"),ScrollerComponent:s("Scroller","div"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder","div")}})),mn=B((function(e){var t=e[0],n=e[1],r={item:It(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:w(),ScrollContainer:w(),ListContainer:w(),emptyComponent:w(),scrollSeek:w()};function i(e,t,r){b(S(e,F(n.components),O((function(e){var n,i=e[0],o=e[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+t+" instead."),V({},o,((n={})[t]=i,n))}))),n.components)}return p(r.scrollSeek,(function(e){var r=e.placeholder,i=K(e,fn);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),g(n.components,V({},y(n.components),{ScrollSeekPlaceholder:r})),g(t.scrollSeekConfiguration,i)})),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),V({},t,n,r)}),c(ln,hn)),pn=r.memo((function(){var e=_n("gridState"),t=_n("listClassName"),n=_n("itemClassName"),i=_n("itemContent"),o=_n("computeItemKey"),a=_n("isSeeking"),s=bn("scrollHeight"),l=_n("ItemComponent"),u=_n("ListComponent"),c=_n("ScrollSeekPlaceholder"),d=_n("context"),f=bn("itemDimensions"),h=ie((function(e){s(e.parentElement.parentElement.scrollHeight);var t=e.firstChild;t&&f(t.getBoundingClientRect())}));return(0,r.createElement)(u,V({ref:h,className:t},jt(u,d),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map((function(t){var s=o(t.index);return a?(0,r.createElement)(c,V({key:s},jt(c,d),{index:t.index,height:e.itemHeight,width:e.itemWidth})):(0,r.createElement)(l,V({},jt(l,d),{className:n,"data-index":t.index,key:s}),i(t.index,d))})))})),gn=function(e){var t=e.children,n=bn("viewportDimensions"),i=ie((function(e){n(e.getBoundingClientRect())}));return r.createElement("div",{style:Ft,ref:i},t)},vn=function(e){var t=e.children,n=xt(bn("windowViewportRect"),_n("customScrollParent"));return r.createElement("div",{ref:n,style:Ft},t)},yn=Z(mn,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},r.memo((function(e){var t=V({},e),n=_n("useWindowScroll"),i=_n("customScrollParent"),o=i||n?vn:gn;return r.createElement(i||n?xn:En,V({},t),r.createElement(o,null,r.createElement(pn,null)))}))),bn=(yn.Component,yn.usePublisher),_n=yn.useEmitterValue,wn=yn.useEmitter,En=Ut({usePublisher:bn,useEmitterValue:_n,useEmitter:wn}),xn=Ht({usePublisher:bn,useEmitterValue:_n,useEmitter:wn}),kn=B((function(){var e=E((function(e){return r.createElement("td",null,"Item $",e)})),t=E(null),n=E(null),i=E({}),o=E(Tt),a=E(m),s=function(e,t){return void 0===t&&(t=null),k(S(i,O((function(t){return t[e]})),M()),t)};return{context:t,itemContent:e,fixedHeaderContent:n,components:i,computeItemKey:o,scrollerRef:a,TableComponent:s("Table","table"),TableHeadComponent:s("TableHead","thead"),TableBodyComponent:s("TableBody","tbody"),TableRowComponent:s("TableRow","tr"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),FillerRow:s("FillerRow")}})),Cn=B((function(e){return V({},e[0],e[1])}),c(wt,kn)),Sn=function(e){return r.createElement("tr",null,r.createElement("td",{style:{height:e.height}}))},Tn=function(e){return r.createElement("tr",null,r.createElement("td",{style:{height:e.height,padding:0,border:0}}))},Mn=r.memo((function(){var e=zn("listState"),t=Nn("sizeRanges"),n=zn("useWindowScroll"),i=zn("customScrollParent"),o=Nn("windowScrollContainerState"),a=Nn("scrollContainerState"),s=i||n?o:a,l=zn("itemContent"),u=zn("trackItemSizes"),c=oe(t,zn("itemSize"),u,s,zn("log"),i),d=c.callbackRef,f=c.ref,h=r.useState(0),m=h[0],p=h[1];Ln("deviation",(function(e){m!==e&&(f.current.style.marginTop=e+"px",p(e))}));var g=zn("EmptyPlaceholder"),v=zn("ScrollSeekPlaceholder")||Sn,y=zn("FillerRow")||Tn,b=zn("TableBodyComponent"),_=zn("TableRowComponent"),w=zn("computeItemKey"),E=zn("isSeeking"),x=zn("paddingTopAddition"),k=zn("firstItemIndex"),C=zn("statefulTotalCount"),S=zn("context");if(0===C&&g)return(0,r.createElement)(g,jt(g,S));var T=e.offsetTop+x+m,M=e.offsetBottom,I=T>0?r.createElement(y,{height:T,key:"padding-top"}):null,O=M>0?r.createElement(y,{height:M,key:"padding-bottom"}):null,R=e.items.map((function(e){var t=e.originalIndex,n=w(t+k,e.data,S);return E?(0,r.createElement)(v,V({},jt(v,S),{key:n,index:e.index,height:e.size,type:e.type||"item"})):(0,r.createElement)(_,V({},jt(_,S),{key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:{overflowAnchor:"none"}}),l(e.index,e.data,S))}));return(0,r.createElement)(b,V({ref:d,"data-test-id":"virtuoso-item-list"},jt(b,S)),[I].concat(R,[O]))})),In=function(e){var t=e.children,n=ie(i(Nn("viewportHeight"),(function(e){return ae(e,"height")})));return r.createElement("div",{style:Ft,ref:n,"data-viewport-type":"element"},t)},On=function(e){var t=e.children,n=xt(Nn("windowViewportRect"),zn("customScrollParent"));return r.createElement("div",{ref:n,style:Ft,"data-viewport-type":"window"},t)},Rn=Z(Cn,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},r.memo((function(e){var t=zn("useWindowScroll"),n=zn("customScrollParent"),o=Nn("fixedHeaderHeight"),a=zn("fixedHeaderContent"),s=zn("context"),l=ie(i(o,(function(e){return ae(e,"height")}))),u=n||t?Fn:An,c=n||t?On:In,d=zn("TableComponent"),f=zn("TableHeadComponent"),h=a?r.createElement(f,V({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:l},jt(f,s)),a()):null;return r.createElement(u,V({},e),r.createElement(c,null,r.createElement(d,V({style:{borderSpacing:0}},jt(d,s)),[h,r.createElement(Mn,{key:"TableBody"})])))}))),Nn=(Rn.Component,Rn.usePublisher),zn=Rn.useEmitterValue,Ln=Rn.useEmitter,An=Ut({usePublisher:Nn,useEmitterValue:zn,useEmitter:Ln}),Fn=Ht({usePublisher:Nn,useEmitterValue:zn,useEmitter:Ln}),Pn=Vt},67615:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var r={ESC:27,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32},i={},o=function(){var e=this;this.startListen=function(){e.refCount||(document.addEventListener("keydown",e.f),document.addEventListener("keyup",e.f)),e.refCount++},this.stopListen=function(){e.refCount--,e.refCount||(document.removeEventListener("keydown",e.f),document.removeEventListener("keyup",e.f))},this.add=function(t,n){var r=t;return"object"!==typeof r&&(r=[r]),e.listeners[e.index]={keyCode:r,fn:n},e.index+=1,e.index},this.remove=function(t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];delete e.listeners[i]}},this.removeAll=function(){e.listeners={},e.index=0},this.index=0,this.listeners={},this.refCount=0,this.f=function(t){var n=t.keyCode||t.which;i[n]="keydown"===t.type,"keydown"===t.type?Object.values(e.listeners).forEach((function(e){var r=e.keyCode,o=e.fn;r.length>1?r.every((function(e){return i[e]}))&&o(t):r.includes(n)&&i[n]&&o(t)})):i[n]=!1}};t.Z=new o},13943:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});var r=n(67294),i=n(42613),o=function(e){var t=e.image,n=e.name,o=e.onClick,a=void 0===o?function(){}:o,s=e.onMouseOver,l=void 0===s?function(){}:s,u=e.shape,c=void 0===u?"circle":u,d=e.size,f=void 0===d?32:d,h=(0,r.useState)(!1),m=h[0],p=h[1],g=(0,r.useState)(!1),v=g[0],y=g[1];(0,r.useEffect)((function(){p(!1),y(!1)}),[t]);var b=(null===n||void 0===n?void 0:n.toString())||"",_=(0,i.XJ)(b,0);return r.createElement("div",{className:"str-chat__avatar str-chat__avatar--"+c,"data-testid":"avatar",onClick:a,onMouseOver:l,style:{flexBasis:f+"px",fontSize:f/2+"px",height:f+"px",lineHeight:f+"px",width:f+"px"},title:n},t&&!m?r.createElement("img",{alt:_,className:"str-chat__avatar-image"+(v?" str-chat__avatar-image--loaded":""),"data-testid":"avatar-img",onError:function(){return p(!0)},onLoad:function(){return y(!0)},src:t,style:{flexBasis:f+"px",height:f+"px",objectFit:"cover",width:f+"px"}}):r.createElement("div",{className:"str-chat__avatar-fallback","data-testid":"avatar-fallback"},_))}},52674:function(e,t,n){"use strict";n.d(t,{$:function(){return U}});var r=n(67294),i=n(91296),o=n.n(i),a=n(93096),s=n.n(a),l=n(74255),u=n(44586),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},f=function(e,t){var n;switch(t.type){case"closeThread":return c(c({},e),{thread:null,threadLoadingMore:!1,threadMessages:[]});case"copyMessagesFromChannel":var r=t.channel,i=t.parentId;return c(c({},e),{messages:d([],r.state.messages),pinnedMessages:d([],r.state.pinnedMessages),suppressAutoscroll:!1,threadMessages:i?c({},r.state.threads)[i]||[]:e.threadMessages});case"copyStateFromChannelOnEvent":r=t.channel;return c(c({},e),{members:c({},r.state.members),messages:d([],r.state.messages),pinnedMessages:d([],r.state.pinnedMessages),read:c({},r.state.read),watcherCount:r.state.watcher_count,watchers:c({},r.state.watchers)});case"initStateFromChannel":r=t.channel;return c(c({},e),{loading:!1,members:c({},r.state.members),messages:d([],r.state.messages),pinnedMessages:d([],r.state.pinnedMessages),read:c({},r.state.read),watcherCount:r.state.watcher_count,watchers:c({},r.state.watchers)});case"jumpToLatestMessage":return c(c({},e),{hasMoreNewer:!1,highlightedMessageId:void 0,loading:!1,suppressAutoscroll:!1});case"jumpToMessageFinished":return c(c({},e),{hasMoreNewer:t.hasMoreNewer,highlightedMessageId:t.highlightedMessageId});case"clearHighlightedMessage":return c(c({},e),{highlightedMessageId:void 0});case"loadMoreFinished":var o=t.hasMore,a=t.messages;return c(c({},e),{hasMore:o,loadingMore:!1,messages:a});case"loadMoreNewerFinished":var s=t.hasMoreNewer;a=t.messages;return c(c({},e),{hasMoreNewer:s,loadingMoreNewer:!1,messages:a});case"loadMoreThreadFinished":var l=t.threadHasMore,u=t.threadMessages;return c(c({},e),{threadHasMore:l,threadLoadingMore:!1,threadMessages:u});case"openThread":r=t.channel;var f=t.message;return c(c({},e),{thread:f,threadMessages:f.id&&c({},r.state.threads)[f.id]||[]});case"setError":var h=t.error;return c(c({},e),{error:h});case"setLoadingMore":var m=t.loadingMore;return c(c({},e),{loadingMore:m,suppressAutoscroll:!0});case"setLoadingMoreNewer":var p=t.loadingMoreNewer;return c(c({},e),{loadingMoreNewer:p});case"setThread":f=t.message;return c(c({},e),{thread:f});case"setTyping":r=t.channel;return c(c({},e),{typing:c({},r.state.typing)});case"startLoadingThread":return c(c({},e),{threadLoadingMore:!0});case"updateThreadOnEvent":r=t.channel,f=t.message;return e.thread?c(c({},e),{thread:(null===f||void 0===f?void 0:f.id)===e.thread.id?r.state.formatMessage(f):e.thread,threadMessages:(null===(n=e.thread)||void 0===n?void 0:n.id)&&c({},r.state.threads)[e.thread.id]||[]}):e;default:return e}},h={error:null,hasMore:!0,hasMoreNewer:!1,loading:!0,loadingMore:!1,members:{},messages:[],pinnedMessages:[],read:{},suppressAutoscroll:!1,thread:null,threadHasMore:!0,threadLoadingMore:!1,threadMessages:[],typing:{},watcherCount:0,watchers:{}},m=n(35676),p=n(21681),g=n(83156),v=n(89874),y=r.memo((function(e){var t=e.error,n=(0,p.Ht)("LoadingErrorIndicator").t;return t?r.createElement("div",null,n("Error: {{ errorMessage }}",{errorMessage:t.message})):null}),(function(e,t){var n,r;return(null===(n=e.error)||void 0===n?void 0:n.message)===(null===(r=t.error)||void 0===r?void 0:r.message)})),b=n(44498),_=n(58645),w=n(17157),E=n(96808),x=n(87182),k=n(18275),C=n(87029),S=n(21707),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},M=function(e){var t=e.children,n=(0,C.JN)("DropzoneProvider"),i=n.acceptedFiles,o=n.multipleUploads,a=(0,S.Nc)("DropzoneProvider"),s=a.cooldownRemaining,l=a.isUploadEnabled,u=a.maxFilesLeft,c=a.uploadNewFiles;return r.createElement(w.vR,{accept:i,disabled:!l||0===u||!!s,handleFiles:c,maxNumberOfFiles:u,multiple:o},t)},I=function(e){var t=(0,E._)(),n=(0,k.k)(e),i=(0,x.u)(T(T(T({},t),n),e));return r.createElement(S.G6,{value:i},r.createElement(M,null,e.children))},O=n(37495),R=n(40239),N=n(28292),z=n(61687),L=n(85394),A=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},P=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},B=function(e){var t,n=e.acceptedFiles,i=e.activeUnreadHandler,a=e.channel,c=e.children,d=e.doMarkReadRequest,w=e.doSendMessageRequest,E=e.doUpdateMessageRequest,x=e.dragAndDropWindow,k=void 0!==x&&x,S=e.emojiData,T=void 0===S?L:S,M=e.LoadingErrorIndicator,B=void 0===M?y:M,U=e.LoadingIndicator,H=void 0===U?b.T:U,W=e.maxNumberOfFiles,q=e.multipleUploads,G=void 0===q||q,Z=e.onMentionsClick,V=e.onMentionsHover,K=e.optionalMessageInputProps,$=void 0===K?{}:K,Y=e.skipMessageDataMemoization,Q=(0,g.mx)("Channel"),J=Q.client,X=Q.customClasses,ee=Q.latestMessageDatesByChannels,te=Q.mutes,ne=Q.theme,re=Q.useImageFlagEmojisOnWindows,ie=(0,p.Ht)("Channel").t,oe=(0,r.useState)(a.getConfig()),ae=oe[0],se=oe[1],le=(0,r.useState)([]),ue=le[0],ce=le[1],de=(0,r.useState)(),fe=de[0],he=de[1],me=[],pe=(0,r.useReducer)(f,h),ge=pe[0],ve=pe[1],ye=function(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),e}(),be=(0,r.useRef)(""),_e=(0,r.useRef)(new Date),we=(0,r.useRef)(!0),Ee=null===(t=a.data)||void 0===t?void 0:t.own_capabilities,xe={commonEmoji:m.Q9,defaultMinimalEmojis:m.R$,emojiData:T,emojiSetDef:m._},ke=s()((function(){return ve({channel:a,type:"copyStateFromChannelOnEvent"})}),500,{leading:!0,trailing:!0}),Ce=function(){!a.disconnected&&(null===ae||void 0===ae?void 0:ae.read_events)&&(_e.current=new Date,d?d(a):(0,l.t1)(a.markRead(),"mark read"),i?i(0,be.current):be.current&&(document.title=be.current))},Se=s()(Ce,500,{leading:!0,trailing:!0}),Te=function(e){var t,n,r,o,s,l,u,c;if(e.message&&ve({channel:a,message:e.message,type:"updateThreadOnEvent"}),"user.watching.start"!==e.type&&"user.watching.stop"!==e.type){if("typing.start"===e.type||"typing.stop"===e.type)return ve({channel:a,type:"setTyping"});if("connection.changed"===e.type&&"boolean"===typeof e.online&&(we.current=e.online),"message.new"===e.type){var d=!0;if((null===(t=e.message)||void 0===t?void 0:t.parent_id)&&!(null===(n=e.message)||void 0===n?void 0:n.show_in_channel)&&(d=!1),d&&(null===(o=null===(r=e.message)||void 0===r?void 0:r.user)||void 0===o?void 0:o.id)!==J.userID)if(document.hidden){if((null===ae||void 0===ae?void 0:ae.read_events)&&!a.muteStatus().muted){var f=a.countUnread(_e.current);i?i(f,be.current):document.title="("+f+") "+be.current}}else Se();if((null===(l=null===(s=e.message)||void 0===s?void 0:s.user)||void 0===l?void 0:l.id)===J.userID&&(null===(u=null===e||void 0===e?void 0:e.message)||void 0===u?void 0:u.created_at)&&(null===(c=null===e||void 0===e?void 0:e.message)||void 0===c?void 0:c.cid)){var h=new Date(e.message.created_at),m=e.message.cid;(!ee[m]||ee[m].getTime()<h.getTime())&&(ee[m]=h)}}ke()}};(0,r.useLayoutEffect)((function(){var e=!1,t=!1,n=function(){document.hidden||Ce()};return P(void 0,void 0,void 0,(function(){var r,i;return j(this,(function(o){switch(o.label){case 0:if(a.initialized)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.watch()];case 2:return o.sent(),r=a.getConfig(),se(r),[3,4];case 3:return i=o.sent(),ve({error:i,type:"setError"}),e=!0,[3,4];case 4:return t=!0,be.current=document.title,e||(ve({channel:a,type:"initStateFromChannel"}),a.countUnread()>0&&Ce(),document.addEventListener("visibilitychange",n),J.on("connection.changed",Te),J.on("connection.recovered",Te),J.on("user.updated",Te),J.on("user.deleted",Te),a.on(Te)),[2]}}))})),function(){!e&&t&&(document.removeEventListener("visibilitychange",n),null===a||void 0===a||a.off(Te),J.off("connection.changed",Te),J.off("connection.recovered",Te),J.off("user.updated",Te),J.off("user.deleted",Te),me.forEach(clearTimeout))}}),[a.cid,d]),(0,r.useEffect)((function(){var e;if(ge.thread){var t=null===(e=ge.messages)||void 0===e?void 0:e.find((function(e){var t;return e.id===(null===(t=ge.thread)||void 0===t?void 0:t.id)}));t&&ve({message:t,type:"setThread"})}}),[ge.messages,ge.thread]);var Me=function(e,t){return function(n,r){if("string"===typeof n&&("success"===r||"error"===r)){var i=(0,u.Z)();e((function(e){return A(A([],e),[{id:i,text:n,type:r}])}));var o=setTimeout((function(){return e((function(e){return e.filter((function(e){return e.id!==i}))}))}),5e3);t.push(o)}}}(ce,me),Ie=o()((function(e,t){ye.current&&ve({hasMore:e,messages:t,type:"loadMoreFinished"})}),2e3,{leading:!0,trailing:!0}),Oe=function(e){return void 0===e&&(e=100),P(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,l;return j(this,(function(u){switch(u.label){case 0:if(!we.current||!window.navigator.onLine)return[2,0];if(t=null===(l=null===ge||void 0===ge?void 0:ge.messages)||void 0===l?void 0:l[0],ge.loadingMore||ge.loadingMoreNewer||"received"!==(null===t||void 0===t?void 0:t.status))return[2,0];if(a.state.messages.length<25)return Ie(!1,a.state.messages),[2,a.state.messages.length];ve({loadingMore:!0,type:"setLoadingMore"}),n=null===t||void 0===t?void 0:t.id,r=e,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.query({messages:{id_lt:n,limit:r},watchers:{limit:r}})];case 2:return i=u.sent(),[3,4];case 3:return o=u.sent(),console.warn("message pagination request failed with error",o),ve({loadingMore:!1,type:"setLoadingMore"}),[2,0];case 4:return s=i.messages.length===r,Ie(s,a.state.messages),[2,i.messages.length]}}))}))},Re=function(e){return void 0===e&&(e=100),P(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,l,u;return j(this,(function(c){switch(c.label){case 0:if(!we.current||!window.navigator.onLine)return[2,0];if(t=null===(l=null===ge||void 0===ge?void 0:ge.messages)||void 0===l?void 0:l[(null===(u=null===ge||void 0===ge?void 0:ge.messages)||void 0===u?void 0:u.length)-1],ge.loadingMore||ge.loadingMoreNewer)return[2,0];ve({loadingMoreNewer:!0,type:"setLoadingMoreNewer"}),n=null===t||void 0===t?void 0:t.id,r=e,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.query({messages:{id_gt:n,limit:r},watchers:{limit:r}})];case 2:return i=c.sent(),[3,4];case 3:return o=c.sent(),console.warn("message pagination request failed with error",o),ve({loadingMoreNewer:!1,type:"setLoadingMoreNewer"}),[2,0];case 4:return s=a.state.messages!==a.state.latestMessages,ve({hasMoreNewer:s,messages:a.state.messages,type:"loadMoreNewerFinished"}),[2,i.messages.length]}}))}))},Ne=function(e){return P(void 0,void 0,void 0,(function(){var t,n;return j(this,(function(r){switch(r.label){case 0:return ve({loadingMore:!0,type:"setLoadingMore"}),[4,a.state.loadMessageIntoState(e)];case 1:return r.sent(),t=a.state.messages.findIndex((function(t){return t.id===e})),n=t>=Math.floor(12.5),Ie(n,a.state.messages),ve({hasMoreNewer:a.state.messages!==a.state.latestMessages,highlightedMessageId:e,type:"jumpToMessageFinished"}),setTimeout((function(){ve({type:"clearHighlightedMessage"})}),500),[2]}}))}))},ze=function(){return P(void 0,void 0,void 0,(function(){var e;return j(this,(function(t){switch(t.label){case 0:return[4,a.state.loadMessageIntoState("latest")];case 1:return t.sent(),e=a.state.messages.length>=25,Ie(e,a.state.messages),ve({type:"jumpToLatestMessage"}),[2]}}))}))},Le=function(e){a.state.addMessageSorted(e,!0),ve({channel:a,parentId:ge.thread&&e.parent_id,type:"copyMessagesFromChannel"})},Ae=function(e,t){return P(void 0,void 0,void 0,(function(){var n,r,i,o,s,l,u,c,d,f,h,m;return j(this,(function(p){switch(p.label){case 0:n=e.attachments,r=e.id,i=e.mentioned_users,o=void 0===i?[]:i,s=e.parent_id,l=e.text,u=function(e){var t;return null!=(null===(t=e[0])||void 0===t?void 0:t.id)}(o)?o.map((function(e){return e.id})):o,c=F({attachments:n,id:r,mentioned_users:u,parent_id:s,quoted_message_id:s===(null===fe||void 0===fe?void 0:fe.parent_id)?null===fe||void 0===fe?void 0:fe.id:void 0,text:l},t),p.label=1;case 1:return p.trys.push([1,6,,7]),d=void 0,w?[4,w(a.cid,c)]:[3,3];case 2:return d=p.sent(),[3,5];case 3:return[4,a.sendMessage(c)];case 4:d=p.sent(),p.label=5;case 5:return(null===d||void 0===d?void 0:d.message)&&Le(F(F({},d.message),{status:"received"})),fe&&s===(null===fe||void 0===fe?void 0:fe.parent_id)&&he(void 0),[3,7];case 6:return f=p.sent(),h=JSON.stringify(f),m=h?JSON.parse(h):{},Le(F(F({},e),{errorStatusCode:m.status||void 0,status:"failed"})),[3,7];case 7:return[2]}}))}))},Fe=function(e,t){var n=e.attachments,r=void 0===n?[]:n,i=e.mentioned_users,o=void 0===i?[]:i,s=e.parent,l=void 0===s?void 0:s,c=e.text,d=void 0===c?"":c;return P(void 0,void 0,void 0,(function(){var e;return j(this,(function(n){switch(n.label){case 0:return a.state.filterErrorMessages(),e=function(e,t,n,r){var i=J.userID+"-"+(0,u.Z)();return F({__html:e,attachments:t,created_at:new Date,html:e,id:i,mentioned_users:r,reactions:[],status:"sending",text:e,type:"regular",user:J.user},(null===n||void 0===n?void 0:n.id)?{parent_id:n.id}:null)}(d,r,l,o),Le(e),[4,Ae(e,t)];case 1:return n.sent(),[2]}}))}))},Pe=function(e){return P(void 0,void 0,void 0,(function(){return j(this,(function(t){switch(t.label){case 0:return Le(F(F({},e),{errorStatusCode:void 0,status:"sending"})),[4,Ae(e)];case 1:return t.sent(),[2]}}))}))},je=function(e){a.state.removeMessage(e),ve({channel:a,parentId:ge.thread&&e.parent_id,type:"copyMessagesFromChannel"})},De=function(e,t){t.preventDefault(),he((function(t){return(null===t||void 0===t?void 0:t.parent_id)!==(null===e||void 0===e?void 0:e.parent_id)?void 0:t})),ve({channel:a,message:e,type:"openThread"})},Be=function(e){e.preventDefault(),ve({type:"closeThread"})},Ue=o()((function(e,t){ve({threadHasMore:e,threadMessages:t,type:"loadMoreThreadFinished"})}),2e3,{leading:!0,trailing:!0}),He=function(){return P(void 0,void 0,void 0,(function(){var e,t,n,r,i,o,s,l;return j(this,(function(u){switch(u.label){case 0:if(ge.threadLoadingMore||!ge.thread)return[2];if(ve({type:"startLoadingThread"}),!(e=ge.thread.id))return[2,ve({type:"closeThread"})];t=a.state.threads[e]||[],n=null===(l=t[0])||void 0===l?void 0:l.id,r=50,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.getReplies(e,{id_lt:n,limit:r})];case 2:return i=u.sent(),o=i.messages.length===r,s=a.state.threads[e]||[],Ue(o,s),[3,4];case 3:return u.sent(),Ue(!1,t),[3,4];case 4:return[2]}}))}))},We=function(e,t){return(0,r.useCallback)((function(n,r){if((e||t)&&n.target instanceof HTMLElement){var i=n.target.innerHTML.replace("*","");if("@"===i[0]){var o=i.replace("@",""),a=null===r||void 0===r?void 0:r.find((function(e){var t=e.id;return e.name===o||t===o}));e&&"function"===typeof e&&"mouseover"===n.type&&e(n,a),t&&"click"===n.type&&"function"===typeof t&&t(n,a)}}}),[t,e])}(V,Z),qe=function(e){var t=(0,g.mx)("useEditMessageHandler"),n=t.channel,r=t.client;return function(t){return e&&n?Promise.resolve(e(n.cid,t)):r.updateMessage(t)}}(E),Ge=ge.typing,Ze=D(ge,["typing"]),Ve=function(e){var t,n=e.acceptedFiles,i=e.channel,o=e.channelCapabilitiesArray,a=void 0===o?[]:o,s=e.channelConfig,l=e.dragAndDropWindow,u=e.giphyVersion,c=e.error,d=e.hasMore,f=e.hasMoreNewer,h=e.suppressAutoscroll,m=e.highlightedMessageId,g=e.loading,v=e.loadingMore,y=e.maxNumberOfFiles,b=e.members,_=e.messages,w=void 0===_?[]:_,E=e.multipleUploads,x=e.mutes,k=e.notifications,C=e.pinnedMessages,S=e.quotedMessage,T=e.read,M=void 0===T?{}:T,I=e.skipMessageDataMemoization,O=e.thread,R=e.threadHasMore,N=e.threadLoadingMore,z=e.threadMessages,L=void 0===z?[]:z,A=e.watcherCount,F=e.watcher_count,P=e.watchers,j=i.cid,D=i.initialized&&(null===(t=i.lastRead())||void 0===t?void 0:t.getTime()),B=Object.keys(b||[]).length,U=k.length,H=Object.values(M),W=H.length,q=H.map((function(e){return e.last_read.toISOString()})).join(),G=null===L||void 0===L?void 0:L.length,Z={};a.forEach((function(e){Z[e]=!0}));var V=I?w:w.map((function(e){var t=e.deleted_at,n=e.latest_reactions,r=e.pinned,i=e.reply_count,o=e.status,a=e.updated_at,s=e.user;return""+t+(n?n.map((function(e){return e.type})).join():"")+r+i+o+(a&&((0,p.MD)(a)||(0,p.J_)(a))?a.toISOString():a||"")+(null===s||void 0===s?void 0:s.image)+(null===s||void 0===s?void 0:s.name)})).join(),K=L.map((function(e){var t=e.deleted_at,n=e.latest_reactions,r=e.pinned,i=e.status,o=e.updated_at,a=e.user;return""+t+(n?n.map((function(e){return e.type})).join():"")+r+i+(o&&((0,p.MD)(o)||(0,p.J_)(o))?o.toISOString():o||"")+(null===a||void 0===a?void 0:a.image)+(null===a||void 0===a?void 0:a.name)})).join();return(0,r.useMemo)((function(){return{acceptedFiles:n,channel:i,channelCapabilities:Z,channelConfig:s,dragAndDropWindow:l,error:c,giphyVersion:u,hasMore:d,hasMoreNewer:f,highlightedMessageId:m,loading:g,loadingMore:v,maxNumberOfFiles:y,members:b,messages:w,multipleUploads:E,mutes:x,notifications:k,pinnedMessages:C,quotedMessage:S,read:M,suppressAutoscroll:h,thread:O,threadHasMore:R,threadLoadingMore:N,threadMessages:L,watcher_count:F,watcherCount:A,watchers:P}}),[j,c,d,f,m,D,g,v,B,V,K,U,S,W,q,I,h,O,R,N,G,A])}(F(F({},Ze),{acceptedFiles:n,channel:a,channelCapabilitiesArray:Ee,channelConfig:ae,dragAndDropWindow:k,giphyVersion:e.giphyVersion||"fixed_height",maxNumberOfFiles:W,multipleUploads:G,mutes:te,notifications:ue,quotedMessage:fe,watcher_count:ge.watcherCount})),Ke=(0,r.useMemo)((function(){return{addNotification:Me,closeThread:Be,dispatch:ve,editMessage:qe,jumpToLatestMessage:ze,jumpToMessage:Ne,loadMore:Oe,loadMoreNewer:Re,loadMoreThread:He,onMentionsClick:We,onMentionsHover:We,openThread:De,removeMessage:je,retrySendMessage:Pe,sendMessage:Fe,setQuotedMessage:he,skipMessageDataMemoization:Y,updateMessage:Le}}),[a.cid,Oe,Re,fe,Ne,ze]),$e=(0,r.useMemo)((function(){return{Attachment:e.Attachment||v.P,AutocompleteSuggestionHeader:e.AutocompleteSuggestionHeader,AutocompleteSuggestionItem:e.AutocompleteSuggestionItem,AutocompleteSuggestionList:e.AutocompleteSuggestionList,Avatar:e.Avatar,CooldownTimer:e.CooldownTimer,DateSeparator:e.DateSeparator,EditMessageInput:e.EditMessageInput,EmojiIcon:e.EmojiIcon,EmptyStateIndicator:e.EmptyStateIndicator,FileUploadIcon:e.FileUploadIcon,GiphyPreviewMessage:e.GiphyPreviewMessage,HeaderComponent:e.HeaderComponent,Input:e.Input,LoadingIndicator:e.LoadingIndicator,Message:e.Message||_.u,MessageDeleted:e.MessageDeleted,MessageListNotifications:e.MessageListNotifications,MessageNotification:e.MessageNotification,MessageOptions:e.MessageOptions,MessageRepliesCountButton:e.MessageRepliesCountButton,MessageStatus:e.MessageStatus,MessageSystem:e.MessageSystem,MessageTimestamp:e.MessageTimestamp,PinIndicator:e.PinIndicator,QuotedMessage:e.QuotedMessage,QuotedMessagePreview:e.QuotedMessagePreview,ReactionSelector:e.ReactionSelector,ReactionsList:e.ReactionsList,SendButton:e.SendButton,ThreadHeader:e.ThreadHeader,ThreadStart:e.ThreadStart,TriggerProvider:e.TriggerProvider,TypingIndicator:e.TypingIndicator,VirtualMessage:e.VirtualMessage}}),[]),Ye=(0,r.useMemo)((function(){return{Emoji:e.Emoji,emojiConfig:xe,EmojiIndex:e.EmojiIndex,EmojiPicker:e.EmojiPicker}}),[]),Qe=function(e){var t=e.typing,n=Object.keys(t||{}).join();return(0,r.useMemo)((function(){return{typing:t}}),[n])}({typing:Ge}),Je=(null===X||void 0===X?void 0:X.chat)||"str-chat",Xe=(null===X||void 0===X?void 0:X.chatContainer)||"str-chat__container",et=(null===X||void 0===X?void 0:X.channel)||"str-chat-channel",tt=re&&navigator.userAgent.match(/Win/)?"str-chat--windows-flags":"",nt=function(e){var t=e.children;return r.createElement(r.Fragment,null,t)},rt=(0,r.useMemo)((function(){return k?I:nt}),[k]);return ge.error?r.createElement("div",{className:Je+" "+et+" "+ne},r.createElement(B,{error:ge.error})):ge.loading?r.createElement("div",{className:Je+" "+et+" "+ne},r.createElement(H,{size:25})):a.watch?r.createElement("div",{className:Je+" "+et+" "+ne+" "+tt},r.createElement(C.gZ,{value:Ve},r.createElement(O.PM,{value:Ke},r.createElement(R.Xp,{value:$e},r.createElement(N._V,{value:Ye},r.createElement(z.ln,{value:Qe},r.createElement("div",{className:""+Xe},r.createElement(rt,F({},$),c)))))))):r.createElement("div",{className:Je+" "+et+" "+ne},r.createElement("div",null,ie("Channel Missing")))},U=r.memo((function(e){var t=e.channel,n=e.EmptyPlaceholder,i=void 0===n?null:n,o=(0,g.mx)("Channel").channel,a=t||o;return(null===a||void 0===a?void 0:a.cid)?r.createElement(B,F({},e,{channel:a,key:a.cid})):i}))},35676:function(e,t,n){"use strict";n.d(t,{Q9:function(){return i},_:function(){return o},R$:function(){return a},Le:function(){return s}});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i={custom:!0,emoticons:[],short_names:[]},o={imageUrl:"",sheetColumns:2,sheetRows:3,sheetSize:64,spriteUrl:"https://getstream.imgix.net/images/emoji-sprite.png"},a=[r(r({colons:":+1:",id:"like",name:"like",sheet_x:0,sheet_y:0},i),o),r(r({colons:":heart:",id:"love",name:"love",sheet_x:1,sheet_y:2},i),o),r(r({colons:":joy:",id:"haha",name:"haha",sheet_x:1,sheet_y:0},i),o),r(r({colons:":astonished:",id:"wow",name:"wow",sheet_x:0,sheet_y:2},i),o),r(r({colons:":pensive:",id:"sad",name:"sad",sheet_x:0,sheet_y:1},i),o),r(r({colons:":angry:",id:"angry",name:"angry",sheet_x:1,sheet_y:1},i),o)],s=function(e){return r(r({},e),{emojis:{}})}},35837:function(e,t,n){"use strict";n.d(t,{T:function(){return D}});var r=n(67294),i=n(45697),o=n.n(i),a=n(87462),s=n(63366),l=r.useLayoutEffect,u=function(e,t){"function"!==typeof e?e.current=t:e(t)},c=function(e,t){var n=(0,r.useRef)();return(0,r.useCallback)((function(r){e.current=r,n.current&&u(n.current,null),n.current=t,t&&u(t,r)}),[t])},d={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},f=function(e){Object.keys(d).forEach((function(t){e.style.setProperty(t,d[t],"important")}))},h=null;var m=function(){},p=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],g=!!document.documentElement.currentStyle,v=function(e){var t=function(e){var t=r.useRef(e);return l((function(){t.current=e})),t}(e);(0,r.useLayoutEffect)((function(){var e=function(e){t.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[])},y=function(e,t){var n=e.cacheMeasurements,i=e.maxRows,o=e.minRows,l=e.onChange,u=void 0===l?m:l,d=e.onHeightChange,y=void 0===d?m:d,b=(0,s.Z)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var _=void 0!==b.value,w=(0,r.useRef)(null),E=c(w,t),x=(0,r.useRef)(0),k=(0,r.useRef)(),C=function(){var e=w.current,t=n&&k.current?k.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,r=(n=t,p.reduce((function(e,t){return e[t]=n[t],e}),{})),i=r.boxSizing;return""===i?null:(g&&"border-box"===i&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(e);if(t){k.current=t;var r=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1/0),h||((h=document.createElement("textarea")).setAttribute("tabindex","-1"),h.setAttribute("aria-hidden","true"),f(h)),null===h.parentNode&&document.body.appendChild(h);var i=e.paddingSize,o=e.borderSize,a=e.sizingStyle,s=a.boxSizing;Object.keys(a).forEach((function(e){var t=e;h.style[t]=a[t]})),f(h),h.value=t;var l=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(h,e);h.value="x";var u=h.scrollHeight-i,c=u*n;"border-box"===s&&(c=c+i+o),l=Math.max(c,l);var d=u*r;return"border-box"===s&&(d=d+i+o),[l=Math.min(d,l),u]}(t,e.value||e.placeholder||"x",o,i),a=r[0],s=r[1];x.current!==a&&(x.current=a,e.style.setProperty("height",a+"px","important"),y(a,{rowHeight:s}))}};return(0,r.useLayoutEffect)(C),v(C),(0,r.createElement)("textarea",(0,a.Z)({},b,{onChange:function(e){_||C(),u(e)},ref:E}))},b=(0,r.forwardRef)(y),_=n(16496),w=n.n(_),E=n(59864),x=n(67615),k=n(40239),C=n(42613),S=r.forwardRef((function(e,t){var n=e.className,i=e.component,o=e.item,a=e.onClickHandler,s=e.onSelectHandler,l=e.selected,u=e.style,c=function(){return s(o)};return r.createElement("li",{className:"rta__item "+(n||""),style:u},r.createElement("button",{className:"rta__entity "+(l?"rta__entity--selected":""),onClick:a,onFocus:c,onMouseEnter:c,ref:t},r.createElement("div",{tabIndex:-1},r.createElement(i,{entity:o,selected:l}))))})),T=n(21681),M=function(e){var t=e.currentTrigger,n=e.value,i=(0,T.Ht)("DefaultSuggestionListHeader").t,o=n.lastIndexOf(t);return"/"===t?r.createElement(r.Fragment,null,i("Commands matching")," ",r.createElement("strong",null,n.slice(o+1))):":"===t?r.createElement(r.Fragment,null,i("Emoji matching")," ",r.createElement("strong",null,n.slice(o+1))):"@"===t?r.createElement(r.Fragment,null,i("People matching")," ",r.createElement("strong",null,n.slice(o+1))):null},I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=function(e){var t=e.className,n=e.component,i=e.currentTrigger,o=e.dropdownScroll,a=e.getSelectedItem,s=e.getTextToReplace,l=e.Header,u=e.itemClassName,c=e.itemStyle,d=e.onSelect,f=e.selectionEnd,h=e.style,m=e.SuggestionItem,p=e.value,g=e.values,v=(0,k.yM)(),y=v.AutocompleteSuggestionHeader,b=v.AutocompleteSuggestionItem,_=m||b||S,w=l||y||M,E=(0,r.useState)(void 0),T=E[0],O=E[1],R=[],N=function(e){return T===g.findIndex((function(t){return z(t)===z(e)}))},z=function(e){var t=s(e);return t.key?t.key:"string"!==typeof e&&e.key?e.key:t.text},L=function(e){var t,n;e&&(null===(t=e.preventDefault)||void 0===t||t.call(e)),(n=g[T])&&(d(s(n)),a&&a(n))},A=function(e){var t=g.findIndex((function(t){return t.id?t.id===e.id:t.name===e.name}));O(t)},F=(0,r.useCallback)((function(e){return e.which===x.n.UP&&O((function(e){if(void 0===e)return 0;var t=0===e?g.length-1:e-1;return o(R[t]),t})),e.which===x.n.DOWN&&O((function(e){if(void 0===e)return 0;var t=e===g.length-1?0:e+1;return o(R[t]),t})),e.which!==x.n.ENTER&&e.which!==x.n.TAB||void 0===T||L(e),null}),[T,g]);(0,r.useEffect)((function(){return document.addEventListener("keydown",F,!1),function(){return document.removeEventListener("keydown",F)}}),[F]),(0,r.useEffect)((function(){(null===g||void 0===g?void 0:g.length)&&A(g[0])}),[g]);var P=function(e){var t=e.name||e.id,n=p.slice(0,f),r=n.lastIndexOf(i),o=(0,C.hr)(n.slice(r+1)),a={match:o,parts:t.split(new RegExp("("+o+")","gi"))};return I(I({},e),{itemNameParts:a})};return r.createElement("ul",{className:"rta__list "+(t||""),style:h},r.createElement("li",{className:"rta__list-header"},r.createElement(w,{currentTrigger:i,value:p})),g.map((function(e,t){return r.createElement(_,{className:u,component:n,item:P(e),key:z(e),onClickHandler:L,onSelectHandler:A,ref:function(e){R[t]=e},selected:N(e),style:c,value:p})})))},R="next";var N=n(16164),z=n(9509),L=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F=function(e){function t(t){var n=e.call(this,t)||this;n.getSelectionPosition=function(){return n.textareaRef?{selectionEnd:n.textareaRef.selectionEnd,selectionStart:n.textareaRef.selectionStart}:null},n.getSelectedText=function(){if(!n.textareaRef)return null;var e=n.textareaRef,t=e.selectionEnd,r=e.selectionStart;return r===t?null:n.state.value.substr(r,t-r)},n.setCaretPosition=function(e){void 0===e&&(e=0),n.textareaRef&&(n.textareaRef.focus(),n.textareaRef.setSelectionRange(e,e))},n.getCaretPosition=function(){return n.textareaRef?n.textareaRef.selectionEnd:0},n.addKeycodeSubmitListeners=function(e){e.forEach((function(e){var t=e;return 1===t.length&&(t=t[0]),e.every((function(e){return[16,13].includes(e)}))&&(n.keycodeSubmitShiftE=!0),x.Z.add(t,(function(e){return n._onEnter(e)}))}))},n._onEnter=function(e){if(n.textareaRef){var t=n.state.currentTrigger;!n.textareaRef.matches(":focus")||!0===e.shiftKey&&!n.keycodeSubmitShiftE||!0===e.shiftKey&&!n.props.keycodeSubmitKeys||t&&n.state.data||(n._replaceWord(),n.textareaRef&&(n.textareaRef.selectionEnd=0),n.props.handleSubmit(e),n._closeAutocomplete())}},n._onSpace=function(){n.props.replaceWord&&n.textareaRef&&(n.textareaRef.matches(":focus")&&n._replaceWord())},n._replaceWord=function(){var e=n.state.value,t=/([^\s]+)(\s*)$/.exec(e.slice(0,n.getCaretPosition())),r=t&&t[1];if(r){var i=t[2],o=n.props.replaceWord(r);if(null!=o){var a=e.slice(0,n.getCaretPosition()-t[0].length)+o+i+e.slice(n.getCaretPosition(),-1);n.setState({value:a},(function(){var e=new CustomEvent("change",{bubbles:!0});n.textareaRef.dispatchEvent(e),n.props.onChange&&n.props.onChange(e)}))}}},n._onSelect=function(e){var t=n.props,r=t.closeCommandsList,i=t.closeMentionsList,o=t.onChange,a=t.showCommandsList,s=t.showMentionsList,l=n.state,u=l.currentTrigger,c=l.selectionEnd,d=l.value,f=a?"/":s?"@":u;if(f){var h=a?"/":s?"@":d.slice(0,c),m=h.lastIndexOf(f),p="next"===e.caretPosition?e.text+" ":e.text,g=function(e,t,n){switch(e){case"start":return n;case"next":case"end":return n+t.length;default:if(!Number.isInteger(e))throw new Error('RTA: caretPosition should be "start", "next", "end" or number.');return e}}(e.caretPosition,p,m),v=h.substring(0,m)+p,y=d.replace(h,v);n.setState({dataLoading:!1,value:y},(function(){var e=new CustomEvent("change",{bubbles:!0});n.textareaRef.dispatchEvent(e),o&&o(e),n.setCaretPosition(g)})),n._closeAutocomplete(),a&&r(),s&&i()}},n._getItemOnSelect=function(e){var t=n.state.currentTrigger,r=n._getCurrentTriggerSettings(e),i=e||t;if(!i||!r)return null;var o=r.callback;return o?function(e){if("function"!==typeof o)throw new Error('Output functor is not defined! You have to define "output" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');return o?o(e,i):null}:null},n._getTextToReplace=function(e){var t=n.state,r=t.actualToken,i=t.currentTrigger,o=n._getCurrentTriggerSettings(e),a=e||i;if(!a||!o)return null;var s=o.output;return function(e){if("object"===typeof e&&(!s||"function"!==typeof s))throw new Error('Output functor is not defined! If you are using items as object you have to define "output" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');if(s){var t=s(e,a);if(!t||"number"===typeof t)throw new Error('Output functor should return string or object in shape {text: string, caretPosition: string | number}.\nGot "'+String(t)+'". Check the implementation for trigger "'+a+'" and its token "'+r+'"\n\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\n');if("string"===typeof t)return{caretPosition:R,text:t};if(!t.text&&":"!==a)throw new Error('Output "text" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'+a+'" and its token "'+r+'"\n');if(!t.caretPosition)throw new Error('Output "caretPosition" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'+a+'" and its token "'+r+'"\n');return t}if("string"!==typeof e)throw new Error("Output item should be string\n");return{caretPosition:R,text:""+a+e+a}}},n._getCurrentTriggerSettings=function(e){var t=n.state.currentTrigger,r=e||t;return r?n.props.trigger[r]:null},n._getValuesFromProvider=function(){var e=n.state,t=e.actualToken,r=e.currentTrigger,i=n._getCurrentTriggerSettings();if(r&&i){var o=i.component,a=i.dataProvider;if("function"!==typeof a)throw new Error("Trigger provider has to be a function!");n.setState({dataLoading:!0}),a(t,n.state.value,(function(e,t){if(t===n.state.actualToken){if(!Array.isArray(e))throw new Error("Trigger provider has to provide an array!");if(!(0,E.isValidElementType)(o))throw new Error("Component should be defined!");r===n.state.currentTrigger&&(e.length?n.setState({component:o,data:e,dataLoading:!1}):n._closeAutocomplete())}}))}},n._getSuggestions=function(e){var t=n.state,r=t.currentTrigger,i=t.data;return!(e||r)||!i||i&&!i.length?null:i},n._closeAutocomplete=function(){n.setState({currentTrigger:null,data:null,dataLoading:!1,left:null,top:null})},n._cleanUpProps=function(){var e=A({},n.props),t=["additionalTextareaProps","className","closeCommandsList","closeMentionsList","closeOnClickOutside","containerClassName","containerStyle","disableMentions","dropdownClassName","dropdownStyle","grow","handleSubmit","innerRef","itemClassName","itemStyle","keycodeSubmitKeys","listClassName","listStyle","loaderClassName","loaderStyle","loadingComponent","minChar","movePopupAsYouType","onCaretPositionChange","onChange","ref","replaceWord","scrollToItem","showCommandsList","showMentionsList","SuggestionItem","SuggestionList","trigger","value"];for(var r in e)t.includes(r)&&delete e[r];return e},n._isCommand=function(e){return"/"===e[0]&&!(e.split(" ").length>1)},n._changeHandler=function(e){var t,r,i=n.props,o=i.minChar,a=i.movePopupAsYouType,s=i.onCaretPositionChange,l=i.onChange,u=i.trigger,c=n.state,d=c.left,f=c.top,h=e.target,m=h.selectionEnd,p=h.selectionStart,g=h.value;if(l&&(e.persist(),l(e)),s&&s(n.getCaretPosition()),n.setState({value:g}),n._isCommand(g))t="/",r=g;else{var v=Object.keys(u).join().replace("/",""),y="[^\\s"+v+"]*",b=new RegExp("(?!^|\\W)?["+v+"]"+y+"\\s?"+y+"$","g"),_=g.slice(0,m).match(b);t=(r=_&&_[_.length-1].trim())&&Object.keys(u).find((function(e){return e===r[0]}))||null}if(!r||r.length<=o)n._closeAutocomplete();else{var E=r.slice(1);if(t){if(a||null===f&&null===d||1===r.length){var x=w()(h,m),k=x.left,C=x.top;n.setState({left:k,top:C-n.textareaRef.scrollTop||0})}n.setState({actualToken:E,currentTrigger:t,selectionEnd:m,selectionStart:p},(function(){try{n._getValuesFromProvider()}catch(t){e=t.message,console.error("RTA: dataProvider fails: "+e+"\n    \nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues")}var e}))}}},n._selectHandler=function(e){var t=n.props,r=t.onCaretPositionChange,i=t.onSelect;r&&r(n.getCaretPosition()),i&&(e.persist(),i(e))},n._onClickAndBlurHandler=function(e){var t=n.props,r=t.closeOnClickOutside,i=t.onBlur,o=e.relatedTarget;n.dropdownRef&&o instanceof Node&&n.dropdownRef.contains(o)||(r&&n._closeAutocomplete(),i&&(e.persist(),i(e)))},n._onScrollHandler=function(){return n._closeAutocomplete()},n._dropdownScroll=function(e){var t=n.props.scrollToItem;if(t)if(!0!==t){if("function"!==typeof t||2!==t.length)throw new Error("`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.");t(n.dropdownRef,e)}else!function(e,t){if(t){var n=parseInt(getComputedStyle(t).getPropertyValue("height"),10),r=parseInt(getComputedStyle(e).getPropertyValue("height"),10)-n,i=e.scrollTop,o=t.offsetTop;o<i+r&&i<o||(e.scrollTop=o)}}(n.dropdownRef,e)},n.getTriggerProps=function(){var e=n.props,t=e.showCommandsList,r=e.showMentionsList,i=e.trigger,o=n.state,a=o.component,s=o.currentTrigger,l=o.selectionEnd,u=o.value,c=n._getItemOnSelect(),d=n._getSuggestions(),f={component:a,currentTrigger:s,getSelectedItem:c,getTextToReplace:n._getTextToReplace(),selectionEnd:l,value:u,values:d};if(t&&i["/"]||r&&i["@"]){var h,m=i[t?"/":"@"].dataProvider;null===m||void 0===m||m("",t?"/":"@",(function(e){h=e})),f.component=t?N.d:z.E,f.currentTrigger=t?"/":"@",f.getTextToReplace=n._getTextToReplace(t?"/":"@"),f.getSelectedItem=n._getItemOnSelect(t?"/":"@"),f.selectionEnd=1,f.value=t?"/":"@",f.values=h}return f};var r=n.props,i=r.loadingComponent,o=r.trigger,a=r.value;if(!i)throw new Error("RTA: loadingComponent is not defined");if(!o)throw new Error("RTA: trigger is not defined");return n.state={actualToken:"",component:null,currentTrigger:null,data:null,dataLoading:!1,keycodeSubmitShiftE:!1,left:null,listenerIndex:{},selectionEnd:0,selectionStart:0,top:null,value:a||""},n}return L(t,e),t.prototype.componentDidMount=function(){var e=this;x.Z.add(x.n.ESC,(function(){return e._closeAutocomplete()})),x.Z.add(x.n.SPACE,(function(){return e._onSpace()}));var t={},n=this.props.keycodeSubmitKeys;if(n){var r=this.addKeycodeSubmitListeners(n);t[r]=r}else{var i=x.Z.add(x.n.ENTER,(function(t){return e._onEnter(t)}));t[i]=i}this.setState({listenerIndex:t}),x.Z.startListen()},t.prototype.componentWillUnmount=function(){x.Z.stopListen(),x.Z.remove(this.state.listenerIndex)},t.getDerivedStateFromProps=function(e,t){return e.value===t.propsValue&&t.value?null:{propsValue:e.value,value:e.value}},t.prototype.renderSuggestionListContainer=function(){var e=this,t=this.props,n=t.disableMentions,i=t.dropdownClassName,o=t.dropdownStyle,a=t.itemClassName,s=t.itemStyle,l=t.listClassName,u=t.SuggestionItem,c=t.SuggestionList,d=void 0===c?O:c,f=this.getTriggerProps();return!f.values||!f.currentTrigger||n&&"@"===f.currentTrigger?null:r.createElement("div",{className:"rta__autocomplete "+(i||""),ref:function(t){e.dropdownRef=t},style:o},r.createElement(d,A({className:l,dropdownScroll:this._dropdownScroll,itemClassName:a,itemStyle:s,onSelect:this._onSelect,SuggestionItem:u},f)))},t.prototype.render=function(){var e=this,t=this.props,n=t.className,i=t.containerClassName,o=t.containerStyle,a=t.style,s=this.props.maxRows,l=this.state,u=l.dataLoading,c=l.value;return this.props.grow||(s=1),r.createElement("div",{className:"rta "+(!0===u?"rta--loading":"")+" "+(i||""),style:o},this.renderSuggestionListContainer(),r.createElement(b,A({"data-testid":"message-input"},this._cleanUpProps(),{className:"rta__textarea "+(n||""),maxRows:s,onBlur:this._onClickAndBlurHandler,onChange:this._changeHandler,onClick:this._onClickAndBlurHandler,onFocus:this.props.onFocus,onScroll:this._onScrollHandler,onSelect:this._selectHandler,ref:function(t){e.props.innerRef&&e.props.innerRef(t),e.textareaRef=t},style:a,value:c},this.props.additionalTextareaProps)))},t.defaultProps={closeOnClickOutside:!0,maxRows:10,minChar:1,movePopupAsYouType:!1,scrollToItem:!0,value:""},t}(r.Component);F.propTypes={className:o().string,closeOnClickOutside:o().bool,containerClassName:o().string,containerStyle:o().object,disableMentions:o().bool,dropdownClassName:o().string,dropdownStyle:o().object,itemClassName:o().string,itemStyle:o().object,keycodeSubmitKeys:o().array,listClassName:o().string,listStyle:o().object,loaderClassName:o().string,loaderStyle:o().object,loadingComponent:o().elementType,minChar:o().number,onBlur:o().func,onCaretPositionChange:o().func,onChange:o().func,onSelect:o().func,style:o().object,SuggestionList:o().elementType,trigger:function(e){var t=e.trigger;if(!t)return Error("Invalid prop trigger. Prop missing.");for(var n=Object.entries(t),r=0;r<n.length;r+=1){var i=n[r],o=i[0],a=i[1];if("string"!==typeof o||1!==o.length)return Error("Invalid prop trigger. Keys of the object has to be string / one character.");var s=a,l=s.callback,u=s.component,c=s.dataProvider,d=s.output;if(!(0,E.isValidElementType)(u))return Error("Invalid prop trigger: component should be defined.");if(!c||"function"!==typeof c)return Error("Invalid prop trigger: dataProvider should be defined.");if(d&&"function"!==typeof d)return Error("Invalid prop trigger: output should be a function.");if(l&&"function"!==typeof l)return Error("Invalid prop trigger: callback should be a function.")}return null},value:o().string};var P=n(44498),j=n(21707),D=r.memo((function(e){var t=(0,k.yM)("ChatAutoComplete"),n=t.AutocompleteSuggestionItem,i=t.AutocompleteSuggestionList,o=(0,T.Ht)("ChatAutoComplete").t,a=(0,j.Nc)("ChatAutoComplete"),s=a.cooldownRemaining,l=a.disabled,u=a.emojiIndex,c=a.textareaRef,d=e.placeholder||o("Type your message"),f=e.wordReplace?function(t){var n;return null===(n=e.wordReplace)||void 0===n?void 0:n.call(e,t,u)}:function(e){var t=((null===u||void 0===u?void 0:u.search(e))||[]).filter(Boolean).slice(0,10).find((function(t){var n=t.emoticons;return!!(null===n||void 0===n?void 0:n.includes(e))}));return t&&"native"in t?t.native:null},h=(0,r.useCallback)((function(e){c&&(c.current=e)}),[c]);return r.createElement(F,{additionalTextareaProps:a.additionalTextareaProps,"aria-label":s?o("Slow Mode ON"):d,className:"str-chat__textarea__textarea",closeCommandsList:a.closeCommandsList,closeMentionsList:a.closeMentionsList,containerClassName:"str-chat__textarea",disabled:l||!!s,disableMentions:a.disableMentions,dropdownClassName:"str-chat__emojisearch",grow:a.grow,handleSubmit:e.handleSubmit||a.handleSubmit,innerRef:h,itemClassName:"str-chat__emojisearch__item",keycodeSubmitKeys:a.keycodeSubmitKeys,listClassName:"str-chat__emojisearch__list",loadingComponent:P.T,maxRows:a.maxRows,minChar:0,onBlur:e.onBlur,onChange:e.onChange||a.handleChange,onFocus:e.onFocus,onPaste:e.onPaste||a.onPaste,placeholder:s?o("Slow Mode ON"):d,replaceWord:f,rows:e.rows||1,showCommandsList:a.showCommandsList,showMentionsList:a.showMentionsList,SuggestionItem:n,SuggestionList:i,trigger:a.autocompleteTriggers||{},value:e.value||a.text})}))},16164:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(67294),i=r.memo((function(e){var t=e.entity;return r.createElement("div",{className:"str-chat__slash-command"},r.createElement("span",{className:"str-chat__slash-command-header"},r.createElement("strong",null,t.name)," ",t.args),r.createElement("br",null),r.createElement("span",{className:"str-chat__slash-command-description"},t.description))}))},7437:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(67294),i=n(21681),o=r.memo((function(e){var t=e.listType,n=(0,i.Ht)("EmptyStateIndicator").t;return"channel"===t?r.createElement("p",{role:"listitem"},n("You have no channels currently")):"message"===t?null:r.createElement("p",null,"No items exist")}))},53207:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var r=n(67294),i=n(13943),o=n(21681),a=r.memo((function(e){var t,n,a,s=e.Avatar,l=void 0===s?i.q:s,u=e.message,c=(0,o.Ht)("EventComponent").tDateTimeParser,d=u.created_at,f=void 0===d?"":d,h=u.event,m=u.text,p=function(e,t){var n=c(e);return(0,o.MD)(n)?n.format(t):n};if("system"===u.type)return r.createElement("div",{className:"str-chat__message--system"},r.createElement("div",{className:"str-chat__message--system__text"},r.createElement("div",{className:"str-chat__message--system__line"}),r.createElement("p",null,m),r.createElement("div",{className:"str-chat__message--system__line"})),r.createElement("div",{className:"str-chat__message--system__date"},r.createElement("strong",null,p(f,"dddd")," "),"at ",p(f,"hh:mm A")));if("member.removed"===(null===h||void 0===h?void 0:h.type)||"member.added"===(null===h||void 0===h?void 0:h.type)){var g=(null===(t=h.user)||void 0===t?void 0:t.name)||(null===(n=h.user)||void 0===n?void 0:n.id),v=g+" "+("member.added"===h.type?"has joined the chat":"was removed from the chat");return r.createElement("div",{className:"str-chat__event-component__channel-event"},r.createElement(l,{image:null===(a=h.user)||void 0===a?void 0:a.image,name:g,user:h.user}),r.createElement("div",{className:"str-chat__event-component__channel-event__content"},r.createElement("em",{className:"str-chat__event-component__channel-event__sentence"},v),r.createElement("div",{className:"str-chat__event-component__channel-event__date"},p(f,"LT"))))}return null}))},44498:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r=n(67294),i=r.memo((function(e){var t=e.color,n=void 0===t?"#006CFF":t,i=e.size,o=void 0===i?15:i;return r.createElement("div",{className:"str-chat__loading-indicator "+n,"data-testid":"loading-indicator-wrapper",style:{height:o,width:o}},r.createElement("svg",{height:o,viewBox:"0 0 30 30",width:o,xmlns:"http://www.w3.org/2000/svg"},r.createElement("defs",null,r.createElement("linearGradient",{id:"a",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},r.createElement("stop",{offset:"0%",stopColor:"#FFF",stopOpacity:"0"}),r.createElement("stop",{"data-testid":"loading-indicator-circle",offset:"100%",stopColor:n,stopOpacity:"1",style:{stopColor:n}}))),r.createElement("path",{d:"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z",fill:"url(#a)",fillRule:"evenodd"})))}),(function(e,t){return e.color===t.color&&e.size===t.size}))},10997:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var r=n(67294),i=n(83156),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=r.lazy((function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(538),n.e(227)]).then(n.bind(n,22227))];case 1:return[2,{default:e.sent().MML}]}}))}))})),l=function(e){var t=e.actionHandler,n=e.align,o=void 0===n?"right":n,a=e.source,l=(0,i.mx)("MML").theme;return r.createElement(r.Suspense,{fallback:null},r.createElement(s,{className:"mml-align-"+o,Loading:null,onSubmit:t,source:a,Success:null,theme:(l||"").replace(" ","-")}))}},73082:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(67294),i=n(8336),o=n(21681),a=function(e){var t=e.message,n=(0,o.Ht)("MessageDeleted").t,a=(0,i.j)(t).isMyMessage?"str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me":"str-chat__message str-chat__message-simple";return r.createElement("div",{className:a+" str-chat__message--deleted "+t.type+" ","data-testid":"message-deleted-component",key:t.id},r.createElement("div",{className:"str-chat__message--deleted-inner"},n("This message was deleted...")))}},58645:function(e,t,n){"use strict";n.d(t,{u:function(){return q}});var r=n(67294),i=n(73082),o=n(17036),a=n(52127),s=n(5254),l=n(12239),u=r.memo((function(e){var t=e.ActionsIcon,n=void 0===t?o.u2:t,i=e.displayLeft,u=void 0===i||i,c=e.displayReplies,d=void 0===c||c,f=e.handleOpenThread,h=e.messageWrapperRef,m=e.ReactionIcon,p=void 0===m?o.EO:m,g=e.theme,v=void 0===g?"simple":g,y=e.ThreadIcon,b=void 0===y?o.or:y,_=(0,l.fr)("MessageOptions"),w=_.customMessageActions,E=_.getMessageActions,x=_.handleOpenThread,k=_.initialMessage,C=_.isMyMessage,S=_.message,T=_.onReactionListClick,M=_.threadList,I=f||x,O=E(),R=(0,a.Dl)(O,M)||!!w,N=O.indexOf(a.Xh.react)>-1,z=O.indexOf(a.Xh.reply)>-1&&d&&!M;return!S.type||"error"===S.type||"system"===S.type||"ephemeral"===S.type||"failed"===S.status||"sending"===S.status||k?null:C()&&u?r.createElement("div",{className:"str-chat__message-"+v+"__actions","data-testid":"message-options-left"},R&&r.createElement(s.P,{ActionsIcon:n,messageWrapperRef:h}),z&&r.createElement("button",{"aria-label":"Open Thread",className:"str-chat__message-"+v+"__actions__action str-chat__message-"+v+"__actions__action--thread","data-testid":"thread-action",onClick:I},r.createElement(b,null)),N&&r.createElement("button",{"aria-label":"Open Reaction Selector",className:"str-chat__message-"+v+"__actions__action str-chat__message-"+v+"__actions__action--reactions","data-testid":"message-reaction-action",onClick:T},r.createElement(p,null))):r.createElement("div",{className:"str-chat__message-"+v+"__actions","data-testid":"message-options"},N&&r.createElement("button",{"aria-label":"Open Reaction Selector",className:"str-chat__message-"+v+"__actions__action str-chat__message-"+v+"__actions__action--reactions","data-testid":"message-reaction-action",onClick:T},r.createElement(p,null)),z&&r.createElement("button",{"aria-label":"Open Thread",className:"str-chat__message-"+v+"__actions__action str-chat__message-"+v+"__actions__action--thread","data-testid":"thread-action",onClick:I},r.createElement(b,null)),R&&r.createElement(s.P,{ActionsIcon:n,messageWrapperRef:h}))})),c=n(21681),d=r.memo((function(e){var t=e.labelPlural,n=e.labelSingle,i=e.onClick,a=e.reply_count,s=void 0===a?0:a,l=(0,c.Ht)("MessageRepliesCountButton").t;if(!s)return null;var u=l("replyCount",{count:s});return t&&s>1?u=s+" "+t:n&&(u="1 "+n),r.createElement("button",{className:"str-chat__message-replies-count-button","data-testid":"replies-count-button",onClick:i},r.createElement(o.HA,null),u)})),f=n(13943),h=n(44498),m=n(19382),p=n(83156),g=n(40239),v=r.memo((function(e){var t,n=e.Avatar,i=e.messageType,s=void 0===i?"simple":i,u=(0,p.mx)("MessageStatus").client,d=(0,g.yM)("MessageStatus").Avatar,v=(0,l.fr)("MessageStatus"),y=v.isMyMessage,b=v.lastReceivedId,_=v.message,w=v.readBy,E=v.threadList,x=(0,c.Ht)("MessageStatus").t,k=n||d||f.q;if(!y()||"error"===_.type)return null;var C=1===(null===w||void 0===w?void 0:w.length)&&w[0].id===(null===(t=u.user)||void 0===t?void 0:t.id);if("sending"===_.status)return r.createElement("span",{className:"str-chat__message-"+s+"-status","data-testid":"message-status-sending"},r.createElement(m.u,null,x("Sending...")),r.createElement(h.T,null));if((null===w||void 0===w?void 0:w.length)&&!E&&!C){var S=w.filter((function(e){var t;return e.id!==(null===(t=u.user)||void 0===t?void 0:t.id)}))[0];return r.createElement("span",{className:"str-chat__message-"+s+"-status","data-testid":"message-status-read-by"},r.createElement(m.u,null,(0,a.Qn)(w,x,u)),r.createElement(k,{image:S.image,name:S.name||S.id,size:15,user:S}),w.length>2&&r.createElement("span",{className:"str-chat__message-"+s+"-status-number","data-testid":"message-status-read-by-many"},w.length-1))}return"received"!==_.status||_.id!==b||E?null:r.createElement("span",{className:"str-chat__message-"+s+"-status","data-testid":"message-status-received"},r.createElement(m.u,null,x("Delivered")),r.createElement(o.j7,null))})),y=n(2255),b=n(37495),_=function(){var e,t,n=(0,g.yM)("QuotedMessage"),i=n.Attachment,o=n.Avatar,a=(0,l.fr)("QuotedMessage"),s=a.isMyMessage,u=a.message,d=(0,c.Ht)("QuotedMessage").userLanguage,h=(0,b.uz)("QuotedMessage").jumpToMessage,m=o||f.q,p=u.quoted_message;if(!p)return null;var v=(null===(e=p.i18n)||void 0===e?void 0:e[d+"_text"])||p.text,y=p.attachments.length?p.attachments[0]:null;return v||y?r.createElement(r.Fragment,null,r.createElement("div",{className:s()?"quoted-message mine":"quoted-message",onClick:function(){return h(p.id)}},p.user&&r.createElement(m,{image:p.user.image,name:p.user.name||p.user.id,size:20,user:p.user}),r.createElement("div",{className:"quoted-message-inner"},y&&r.createElement(i,{attachments:[y]}),r.createElement("div",null,v))),(null===(t=u.attachments)||void 0===t?void 0:t.length)&&u.quoted_message?r.createElement(i,{attachments:u.attachments}):null):null},w=n(42613),E=r.memo((function(e){var t,n=e.customInnerClass,i=e.customWrapperClass,o=void 0===i?"":i,s=e.message,u=e.theme,d=void 0===u?"simple":u,f=(0,g.yM)("MessageText").QuotedMessage,h=void 0===f?_:f,m=(0,l.fr)("MessageText"),p=m.message,v=m.onMentionsClickMessage,b=m.onMentionsHoverMessage,E=m.renderText,x=void 0===E?w.IY:E,k=m.unsafeHTML,C=(0,c.Ht)("MessageText"),S=C.t,T=C.userLanguage,M=function(){var e=(0,r.useState)(null),t=e[0],n=e[1],i=(0,y.G)();return(0,r.useEffect)((function(){function e(e){!(null===t||void 0===t?void 0:t.contains(e.target))&&t&&t.classList.remove("mobile-press")}return"mobile"===i.device&&document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[i,t]),{handleMobilePress:function(e){if(e.target instanceof HTMLElement&&"mobile"===i.device){var t=e.target.closest(".str-chat__message-simple");if(!t)return;n(t),t.classList.contains("mobile-press")?t.classList.remove("mobile-press"):t.classList.add("mobile-press")}}}}().handleMobilePress,I=s||p,O=(0,a.ue)(I),R=(null===(t=I.i18n)||void 0===t?void 0:t[T+"_text"])||I.text,N=(0,r.useMemo)((function(){return x(R,I.mentioned_users)}),[I.mentioned_users,R]),z=o||"str-chat__message-text",L=n||"str-chat__message-text-inner str-chat__message-"+d+"-text-inner";return R||I.quoted_message?r.createElement("div",{className:z},r.createElement("div",{className:("\n          "+L+"\n          "+(O?" str-chat__message-"+d+"-text-inner--has-attachment":"")+"\n          "+((0,w.Kh)(I.text)&&!I.quoted_message?" str-chat__message-"+d+"-text-inner--is-emoji":"")+"\n        ").trim(),"data-testid":"message-text-inner-wrapper",onClick:v,onMouseOver:b},I.quoted_message&&r.createElement(h,null),"error"===I.type&&r.createElement("div",{className:"str-chat__"+d+"-message--error-message"},S("Error \xb7 Unsent")),"failed"===I.status&&r.createElement("div",{className:"str-chat__"+d+"-message--error-message"},403!==I.errorStatusCode?S("Message Failed \xb7 Click to try again"):S("Message Failed \xb7 Unauthorized")),k&&I.html?r.createElement("div",{dangerouslySetInnerHTML:{__html:I.html}}):r.createElement("div",{onClick:M},N))):null})),x=n(31073),k=n(96649),C=n(17157),S=n(20724),T=n(45291),M=n(69119),I=n(67615),O=n(35837),R=n(87029),N=n(21707),z=function(){var e=(0,R.JN)("EditMessageForm"),t=e.acceptedFiles,n=e.multipleUploads,i=(0,c.Ht)("EditMessageForm").t,o=(0,N.Nc)("EditMessageForm"),a=o.clearEditingState,s=o.closeEmojiPicker,l=o.emojiPickerIsOpen,u=o.handleSubmit,d=o.isUploadEnabled,f=o.maxFilesLeft,h=o.openEmojiPicker,p=o.uploadNewFiles,v=(0,g.yM)("EditMessageForm"),y=v.EmojiIcon,b=void 0===y?T.Ai:y,_=v.FileUploadIcon,w=void 0===_?T.HC:_;return(0,r.useEffect)((function(){var e=function(e){e.keyCode===I.n.ESC&&a&&a()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[a]),r.createElement("div",{className:"str-chat__edit-message-form"},r.createElement(C.vR,{accept:t,disabled:!d||0===f,handleFiles:p,maxNumberOfFiles:f,multiple:n},r.createElement("form",{onSubmit:u},d&&r.createElement(M._,null),r.createElement(S.h,{small:!0}),r.createElement(O.T,null),r.createElement("div",{className:"str-chat__message-team-form-footer"},r.createElement("div",{className:"str-chat__edit-message-form-options"},r.createElement("button",{"aria-label":"Open Emoji Picker",className:"str-chat__input-emojiselect",onClick:l?s:h},r.createElement(b,null)),d&&r.createElement("div",{className:"str-chat__fileupload-wrapper","data-testid":"fileinput"},r.createElement(m.u,null,i(f?"Attach files":"You've reached the maximum number of files")),r.createElement(C.KH,{accepts:t,disabled:0===f,handleFiles:p,multiple:n},r.createElement("span",{className:"str-chat__input-fileupload"},r.createElement(w,null))))),r.createElement("div",null,r.createElement("button",{onClick:function(){a&&a()}},i("Cancel")),r.createElement("button",{type:"submit"},i("Send")))))))},L=n(24035),A=n(10997),F=n(34053),P=n(35676),j=n(28292),D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},B=r.memo((function(e){var t=e.additionalEmojiProps,n=e.onClick,i=e.reaction_counts,o=e.reactionOptions,a=e.reactions,s=e.reverse,u=void 0!==s&&s,c=(0,j.uL)("ReactionsList"),d=c.Emoji,f=c.emojiConfig,h=(0,l.fr)("ReactionsList"),m=h.message,p=h.onReactionListClick,g=f||{},v=g.defaultMinimalEmojis,y=g.emojiData,b=g.emojiSetDef,_=a||m.latest_reactions||[],w=i||m.reaction_counts||{},E=o||v,x=!!(null===o||void 0===o?void 0:o.length),k=(0,r.useMemo)((function(){return x?y:(0,P.Le)(y)}),[y,x]);if(!_.length)return null;var C=function(){var e=[];return _.forEach((function(t){var n=t.type;-1===e.indexOf(n)&&e.push(n)})),e}(),S=function(){var e={};return E.forEach((function(t){var n=t.id;return e[n]=!0})),e}();return C.some((function(e){return S[e]}))?r.createElement("div",{"aria-label":"Reaction list",className:"str-chat__reaction-list "+(u?"str-chat__reaction-list--reverse":""),"data-testid":"reaction-list",onClick:n||p,onKeyPress:n||p,role:"figure"},r.createElement("ul",null,C.map((function(e){var n,i=(n=e,E.find((function(e){return e.id===n})));return i?r.createElement("li",{key:i.id},r.createElement("button",{"aria-label":"Reactions: "+e},r.createElement(r.Suspense,{fallback:null},r.createElement(d,D({data:k,emoji:i,size:16},x?t:b))),"\xa0")):null})),r.createElement("li",null,r.createElement("span",{className:"str-chat__reaction-list--counter"},Object.values(w).reduce((function(e,t){return e+t}),0))))):null})),U=n(34289),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},W=r.memo((function(e){var t,n=e.additionalMessageInputProps,o=e.clearEditingState,s=e.editing,l=e.endOfGroup,c=e.firstOfGroup,h=e.groupedByUser,m=e.handleAction,p=e.handleOpenThread,y=e.handleRetry,b=e.highlighted,_=e.isMyMessage,w=e.isReactionEnabled,C=e.message,S=e.onUserClick,T=e.onUserHover,M=e.reactionSelectorRef,I=e.showDetailedReactions,O=e.threadList,R=(0,g.yM)("MessageSimple"),N=R.Attachment,P=R.Avatar,j=void 0===P?f.q:P,D=R.EditMessageInput,W=void 0===D?z:D,q=R.MessageDeleted,G=void 0===q?i.c:q,Z=R.MessageOptions,V=void 0===Z?u:Z,K=R.MessageRepliesCountButton,$=void 0===K?d:K,Y=R.MessageStatus,Q=void 0===Y?v:Y,J=R.MessageTimestamp,X=void 0===J?x.ik:J,ee=R.ReactionSelector,te=void 0===ee?U.j:ee,ne=R.ReactionsList,re=void 0===ne?B:ne,ie=(0,a.ue)(C),oe=(0,a.KI)(C),ae=_()?"str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me":"str-chat__message str-chat__message-simple";return C.customType===k.L.date?null:C.deleted_at||"deleted"===C.type?r.createElement(G,{message:C}):r.createElement(r.Fragment,null,s&&r.createElement(F.u,{onClose:o,open:s},r.createElement(L.R,H({clearEditingState:o,Input:W,message:C},n))),r.createElement("div",{className:("\n\t\t\t\t\t\t"+ae+"\n\t\t\t\t\t\tstr-chat__message--"+C.type+"\n\t\t\t\t\t\tstr-chat__message--"+C.status+"\n\t\t\t\t\t\t"+(C.text?"str-chat__message--has-text":"has-no-text")+"\n\t\t\t\t\t\t"+(ie?"str-chat__message--has-attachment":"")+"\n            "+(oe&&w?"str-chat__message--with-reactions":"")+"\n            "+(b?"str-chat__message--highlighted":"")+"\n            "+(C.pinned?"pinned-message":"")+"\n            "+(h?"str-chat__virtual-message__wrapper--group":"")+"\n            "+(c?"str-chat__virtual-message__wrapper--first":"")+"\n            "+(l?"str-chat__virtual-message__wrapper--end":"")+"\n\t\t\t\t\t").trim(),key:C.id},r.createElement(Q,null),C.user&&r.createElement(j,{image:C.user.image,name:C.user.name||C.user.id,onClick:S,onMouseOver:T,user:C.user}),r.createElement("div",{className:"str-chat__message-inner","data-testid":"message-inner",onClick:"failed"===C.status&&403!==C.errorStatusCode?function(){return y(C)}:void 0,onKeyPress:"failed"===C.status&&403!==C.errorStatusCode?function(){return y(C)}:void 0},r.createElement(r.Fragment,null,r.createElement(V,null),oe&&!I&&w&&r.createElement(re,{reverse:!0}),I&&w&&r.createElement(te,{ref:M})),(null===(t=C.attachments)||void 0===t?void 0:t.length)&&!C.quoted_message?r.createElement(N,{actionHandler:m,attachments:C.attachments}):null,r.createElement(E,{message:C}),C.mml&&r.createElement(A.v,{actionHandler:m,align:_()?"right":"left",source:C.mml}),!O&&!!C.reply_count&&r.createElement("div",{className:"str-chat__message-simple-reply-button"},r.createElement($,{onClick:p,reply_count:C.reply_count})),(!h||l)&&r.createElement("div",{className:"str-chat__message-data str-chat__message-simple-data"},!_()&&C.user?r.createElement("span",{className:"str-chat__message-simple-name"},C.user.name||C.user.id):null,r.createElement(X,{calendar:!0,customClass:"str-chat__message-simple-timestamp"})))))}),a.zs),q=function(e){var t=(0,l.fr)("MessageSimple");return r.createElement(W,H({},t,e))}},31073:function(e,t,n){"use strict";n.d(t,{ik:function(){return a}});var r=n(67294),i=n(12239),o=n(21681);var a=r.memo((function(e){var t=e.calendar,n=void 0!==t&&t,a=e.customClass,s=void 0===a?"":a,l=e.format,u=void 0===l?"h:mmA":l,c=e.message,d=(0,i.fr)("MessageTimestamp"),f=d.formatDate,h=d.message,m=(0,o.Ht)("MessageTimestamp").tDateTimeParser,p=(c||h).created_at,g=(0,r.useMemo)((function(){return function(e,t,n,r,i){if(!e||!Date.parse(e))return console.warn("MessageTimestamp was called without a message, or message has invalid created_at date."),null;if("function"===typeof t)return t(new Date(e));if(!r)return console.warn("MessageTimestamp was called but there is no datetime parsing function available"),null;var a=r(e);return(0,o.MD)(a)?n&&a.calendar?a.calendar():a.format(i):(0,o.J_)(a)?a.toDateString():(0,o.$s)(a)?a:null}(p,f,n,m,u)}),[f,n,m,u,p]);return g?r.createElement("time",{className:s,dateTime:p,title:p},g):null}))},2255:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(67294),i=n(93096),o=n.n(i),a=function(e){return e<768?{device:"mobile",width:e}:e<1024?{device:"tablet",width:e}:{device:"full",width:e}},s=function(){var e=(0,r.useState)(a(window.innerWidth)),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=o()((function(){return n(a(window.innerWidth))}),200);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},17036:function(e,t,n){"use strict";n.d(t,{u2:function(){return i},HA:function(){return o},j7:function(){return a},EO:function(){return s},or:function(){return l}});var r=n(67294),i=function(){return r.createElement("svg",{height:"4",viewBox:"0 0 11 4",width:"11",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z",fillRule:"nonzero"}))},o=function(){return r.createElement("svg",{height:"15",width:"18",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z",fillRule:"nonzero"}))},a=function(){return r.createElement("svg",{height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z",fill:"#006CFF",fillRule:"evenodd"}))},s=function(){return r.createElement("svg",{height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},r.createElement("path",{d:"M6 1.2C3.3 1.2 1.2 3.3 1.2 6c0 2.7 2.1 4.8 4.8 4.8 2.7 0 4.8-2.1 4.8-4.8 0-2.7-2.1-4.8-4.8-4.8zM0 6c0-3.3 2.7-6 6-6s6 2.7 6 6-2.7 6-6 6-6-2.7-6-6z"}),r.createElement("path",{d:"M5.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM8.4 4.5c0 .5-.4.9-.9.9s-.9-.4-.9-.9.4-.9.9-.9.9.4.9.9zM3.3 6.7c.3-.2.6-.1.8.1.3.4.8.9 1.5 1 .6.2 1.4.1 2.4-1 .2-.2.6-.3.8 0 .2.2.3.6 0 .8-1.1 1.3-2.4 1.7-3.5 1.5-1-.2-1.8-.9-2.2-1.5-.2-.3-.1-.7.2-.9z"})))},l=function(){return r.createElement("svg",{height:"10",width:"14",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z",fillRule:"evenodd"}))}},5254:function(e,t,n){"use strict";n.d(t,{P:function(){return h}});var r=n(67294),i=n(52127),o=n(37495),a=n(12239),s=n(21681),l=function(e){var t=e.customMessageActions,n=e.message,i=Object.keys(t);return r.createElement(r.Fragment,null,i.map((function(e){var i=t[e];return r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",key:e,onClick:function(e){return i(n,e)},role:"option"},e)})))},u=r.memo((function(e){var t=e.getMessageActions,n=e.handleDelete,u=e.handleEdit,c=e.handleFlag,d=e.handleMute,f=e.handlePin,h=e.isUserMuted,m=e.mine,p=e.open,g=void 0!==p&&p,v=(0,o.uz)("MessageActionsBox").setQuotedMessage,y=(0,a.fr)("MessageActionsBox"),b=y.customMessageActions,_=y.message,w=y.messageListRect,E=(0,s.Ht)("MessageActionsBox").t,x=(0,r.useState)(!1),k=x[0],C=x[1],S=t(),T=(0,r.useCallback)((function(e){if(e){if(g){var t=e.getBoundingClientRect();C(m?!!w&&t.left<w.left:!!w&&t.right+5>w.right)}}else C(!1)}),[w,m,g]);return r.createElement("div",{className:"str-chat__message-actions-box\n        "+(g?"str-chat__message-actions-box--open":"")+"\n        "+(m?"str-chat__message-actions-box--mine":"")+"\n        "+(k?"str-chat__message-actions-box--reverse":"")+"\n      ","data-testid":"message-actions-box",ref:T},r.createElement("div",{"aria-label":"Message Options",className:"str-chat__message-actions-list",role:"listbox"},b&&r.createElement(l,{customMessageActions:b,message:_}),S.indexOf(i.Xh.quote)>-1&&!_.quoted_message&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:function(){v(_);var e=(_.parent_id?document.querySelectorAll(".str-chat__thread .str-chat__textarea__textarea"):document.getElementsByClassName("str-chat__textarea__textarea")).item(0);e instanceof HTMLTextAreaElement&&e.focus()},role:"option"},E("Reply")),S.indexOf(i.Xh.pin)>-1&&!_.parent_id&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:f,role:"option"},_.pinned?E("Unpin"):E("Pin")),S.indexOf(i.Xh.flag)>-1&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:c,role:"option"},E("Flag")),S.indexOf(i.Xh.mute)>-1&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:d,role:"option"},h()?E("Unmute"):E("Mute")),S.indexOf(i.Xh.edit)>-1&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:u,role:"option"},E("Edit Message")),S.indexOf(i.Xh.delete)>-1&&r.createElement("button",{"aria-selected":"false",className:"str-chat__message-actions-list-item",onClick:n,role:"option"},E("Delete"))))})),c=n(17036),d=n(83156),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e){var t=e.ActionsIcon,n=void 0===t?c.u2:t,o=e.customWrapperClass,s=void 0===o?"":o,l=e.getMessageActions,f=e.handleDelete,h=e.handleFlag,p=e.handleMute,g=e.handlePin,v=e.inline,y=e.message,b=e.messageWrapperRef,_=e.mine,w=(0,d.mx)("MessageActions").mutes,E=(0,a.fr)("MessageActions"),x=E.customMessageActions,k=E.getMessageActions,C=E.handleDelete,S=E.handleFlag,T=E.handleMute,M=E.handlePin,I=E.isMyMessage,O=E.message,R=E.setEditingState,N=l||k,z=f||C,L=h||S,A=p||T,F=g||M,P=y||O,j=(0,r.useState)(!1),D=j[0],B=j[1],U=(0,r.useCallback)((function(){return(0,i.B9)(P,w)}),[P,w]),H=(0,r.useCallback)((function(e){e instanceof KeyboardEvent&&"Escape"!==e.key||B(!1)}),[]),W=N(),q=!!(null===P||void 0===P?void 0:P.deleted_at);return(0,r.useEffect)((function(){(null===b||void 0===b?void 0:b.current)&&b.current.addEventListener("mouseleave",H)}),[H,b]),(0,r.useEffect)((function(){q&&document.removeEventListener("click",H)}),[H,q]),(0,r.useEffect)((function(){if(D)return document.addEventListener("click",H),document.addEventListener("keyup",H),function(){document.removeEventListener("click",H),document.removeEventListener("keyup",H)}}),[D,H]),W.length||x?r.createElement(m,{customWrapperClass:s,inline:v,setActionsBoxOpen:B},r.createElement(u,{getMessageActions:N,handleDelete:z,handleEdit:R,handleFlag:L,handleMute:A,handlePin:F,isUserMuted:U,mine:_?_():I(),open:D}),r.createElement("button",{"aria-expanded":D,"aria-haspopup":"true","aria-label":"Open Message Actions Menu"},r.createElement(n,null))):null},m=function(e){var t=e.children,n=e.customWrapperClass,i=e.inline,o=e.setActionsBoxOpen,a={className:n||"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options","data-testid":"message-actions",onClick:function(e){e.stopPropagation(),o((function(e){return!e}))}};return i?r.createElement("span",f({},a),t):r.createElement("div",f({},a),t)}},20724:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(67294),i=n(28292),o=n(21681),a=n(21707),s=function(e){return"White Smiling Face"!==e.name&&"White Frowning Face"!==e.name},l=function(e){var t=e.small,n=(0,i.uL)("EmojiPicker"),l=n.emojiConfig,u=n.EmojiPicker,c=(0,o.Ht)("EmojiPicker").t,d=(0,a.Nc)("EmojiPicker"),f=(l||{}).emojiData;if(d.emojiPickerIsOpen&&f){var h=t?"str-chat__small-message-input-emojipicker":"str-chat__input--emojipicker";return r.createElement("div",{className:h,ref:d.emojiPickerRef},r.createElement(r.Suspense,{fallback:null},r.createElement(u,{color:"#006CFF",data:f,emoji:"point_up",emojisToShowFilter:s,native:!0,onSelect:d.onSelectEmoji,set:"facebook",showPreview:!1,showSkinTones:!1,title:c("Pick your emoji"),useButton:!0})))}return null}},24035:function(e,t,n){"use strict";n.d(t,{R:function(){return P}});var r=n(67294),i=n(16164),o=n(87029),a=function(){var e=(0,o.JN)("useCommandTrigger").channelConfig,t=null===e||void 0===e?void 0:e.commands;return{component:i.d,dataProvider:function(e,n,r){if(0!==n.indexOf("/")||!t)return[];var i=t.filter((function(t){var n;return-1!==(null===(n=t.name)||void 0===n?void 0:n.indexOf(e))}));i.sort((function(t,n){var r,i,o=null===(r=t.name)||void 0===r?void 0:r.toLowerCase(),a=null===(i=n.name)||void 0===i?void 0:i.toLowerCase();if(0===(null===o||void 0===o?void 0:o.indexOf(e))&&(o="0"+o),0===(null===a||void 0===a?void 0:a.indexOf(e))&&(a="0"+a),null!=o&&null!=a){if(o<a)return-1;if(o>a)return 1}return 0}));var o=i.slice(0,10);return r&&r(o.filter((function(e){return void 0!==e.name})),e),o},output:function(e){return{caretPosition:"next",key:e.name,text:"/"+e.name}}}},s=r.memo((function(e){var t=e.entity,n=Object.keys(t).length,i=null===t||void 0===t?void 0:t.itemNameParts;return r.createElement("div",{className:"str-chat__emoji-item"},r.createElement("span",{className:"str-chat__emoji-item--entity"},t.native),r.createElement("span",{className:"str-chat__emoji-item--name"},n?n&&i.parts.map((function(e,t){return e.toLowerCase()===i.match.toLowerCase()?r.createElement("span",{className:"str-chat__emoji-item--highlight",key:"part-"+t},e):r.createElement("span",{className:"str-chat__emoji-item--part",key:"part-"+t},e)})):null))})),l=n(93096),u=n.n(l),c=n(44068),d=n(9509),f=n(83156),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},m=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},g=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},v=function(e){var t=e.disableMentions,n=e.mentionAllAppUsers,i=e.mentionQueryParams,a=void 0===i?{}:i,s=e.onSelectUser,l=e.useMentionsTransliteration,v=(0,r.useState)(!1),y=v[0],b=v[1],_=(0,f.mx)("useUserTrigger"),w=_.client,E=_.mutes,x=(0,o.JN)("useUserTrigger").channel,k=x.state.members,C=x.state.watchers,S=(0,r.useCallback)((function(){var e=k?Object.values(k).map((function(e){return e.user})):[],t=C?Object.values(C):[],n=g(g([],e),t),r={};return n.forEach((function(e){e&&!r[e.id]&&(r[e.id]=e)})),Object.values(r)}),[k,C]),T=(0,r.useCallback)(u()((function(e,t){return m(void 0,void 0,void 0,(function(){var n,r,i;return p(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,x.queryMembers({name:{$autocomplete:e}})];case 1:return n=o.sent(),r=n.members.map((function(e){return e.user})),t&&r.length?t(r):t([]),[3,3];case 2:return i=o.sent(),console.log({error:i}),[3,3];case 3:return[2]}}))}))}),200),[x]),M=u()((function(e,t){return m(void 0,void 0,void 0,(function(){var n,r;return p(this,(function(i){switch(i.label){case 0:if(!e||y)return[2];b(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,w.queryUsers(h({$or:[{id:{$autocomplete:e}},{name:{$autocomplete:e}}],id:{$ne:w.userID}},a.filters),h({id:1},a.sort),h({limit:10},a.options))];case 2:return n=i.sent().users,t&&n.length?t(n):t([]),[3,4];case 3:return r=i.sent(),console.log({error:r}),[3,4];case 4:return b(!1),[2]}}))}))}),200);return{callback:function(e){return s(e)},component:d.E,dataProvider:function(e,r,i){var o;if(!t){var s=function(e){return r.includes("/unmute")&&!E.length?[]:E.length?r.includes("/unmute")?e.filter((function(e){return E.some((function(t){return t.target.id===e.id}))})):e.filter((function(e){return E.every((function(t){return t.target.id!==e.id}))})):e};if(n)return M(e,(function(t){i&&i(s(t),e)}));if(!e||Object.values(k||{}).length<100){var u=S(),d={ownUserId:w.userID,query:e,text:r,useMentionsTransliteration:l,users:u},f=(0,c.i_)(d),h=(null===(o=a.options)||void 0===o?void 0:o.limit)||10,m=f.slice(0,h);return i&&i(s(m),e),m}return T(e,(function(t){i&&i(s(t),e)}))}},output:function(e){return{caretPosition:"next",key:e.id,text:"@"+(e.name||e.id)}}}},y=n(21707),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(e){var t,n=e.children,i=(0,y.Nc)("DefaultTriggerProvider"),o={"/":a(),":":(t=i.emojiIndex,{component:s,dataProvider:function(e,n,r){if(0===e.length||e.charAt(0).match(/[^a-zA-Z0-9+-]/))return[];var i=((null===t||void 0===t?void 0:t.search(e))||[]).filter(Boolean).slice(0,10);return r&&r(i,e),i},output:function(e){return{caretPosition:"next",key:e.id,text:""+("native"in e?e.native:"")}}}),"@":v({disableMentions:i.disableMentions,mentionAllAppUsers:i.mentionAllAppUsers,mentionQueryParams:i.mentionQueryParams,onSelectUser:i.onSelectUser,useMentionsTransliteration:i.useMentionsTransliteration})},l=b(b({},i),{autocompleteTriggers:o});return r.createElement(y.G6,{value:l},n)},w=n(17157),E=n(20724),x=n(96808),k=n(45291),C=n(97274),S=n(69119),T=n(35837),M=n(19382),I=n(37495),O=n(21681),R=n(40239),N=function(){var e=(0,o.JN)("MessageInputFlat"),t=e.acceptedFiles,n=e.multipleUploads,i=e.quotedMessage,a=(0,I.uz)("MessageInputFlat").setQuotedMessage,s=(0,O.Ht)("MessageInputFlat").t,l=(0,f.mx)("MessageInputFlat").channel,u=(0,y.Nc)("MessageInputFlat"),c=u.closeEmojiPicker,d=u.cooldownRemaining,h=u.emojiPickerIsOpen,m=u.handleSubmit,p=u.isUploadEnabled,g=u.maxFilesLeft,v=u.numberOfUploads,b=u.openEmojiPicker,_=u.setCooldownRemaining,N=u.uploadNewFiles,z=(0,R.yM)("MessageInputFlat"),L=z.CooldownTimer,A=void 0===L?x.b:L,F=z.EmojiIcon,P=void 0===F?k.TK:F,j=z.FileUploadIcon,D=void 0===j?k.hi:j,B=z.QuotedMessagePreview,U=void 0===B?C.b:B,H=z.SendButton,W=void 0===H?k.c7:H;return(0,r.useEffect)((function(){var e=function(e){var t;(null===(t=e.message)||void 0===t?void 0:t.id)===(null===i||void 0===i?void 0:i.id)&&("message.deleted"!==e.type?a(e.message):a(void 0))};return null===l||void 0===l||l.on("message.deleted",e),null===l||void 0===l||l.on("message.updated",e),function(){null===l||void 0===l||l.off("message.deleted",e),null===l||void 0===l||l.off("message.updated",e)}}),[l,i]),r.createElement("div",{className:"str-chat__input-flat "+(W?"str-chat__input-flat--send-button-active":"")+" "+(i&&!i.parent_id?"str-chat__input-flat-quoted":"")+"\n      "+(v?"str-chat__input-flat-has-attachments":"")+"\n      "},r.createElement(w.vR,{accept:t,disabled:!p||0===g||!!d,handleFiles:N,maxNumberOfFiles:g,multiple:n},i&&!i.parent_id&&r.createElement(U,{quotedMessage:i}),r.createElement("div",{className:"str-chat__input-flat-wrapper"},p&&r.createElement(S._,null),r.createElement("div",{className:"str-chat__input-flat--textarea-wrapper"},r.createElement("div",{className:"str-chat__emojiselect-wrapper"},r.createElement(M.u,null,s(h?"Close emoji picker":"Open emoji picker")),r.createElement("button",{"aria-label":"Emoji picker",className:"str-chat__input-flat-emojiselect",onClick:h?c:b},d?r.createElement("div",{className:"str-chat__input-flat-cooldown"},r.createElement(A,{cooldownInterval:d,setCooldownRemaining:_})):r.createElement(P,null))),r.createElement(E.h,null),r.createElement(T.T,null),p&&!d&&r.createElement("div",{className:"str-chat__fileupload-wrapper","data-testid":"fileinput"},r.createElement(M.u,null,s(g?"Attach files":"You've reached the maximum number of files")),r.createElement(w.KH,{accepts:t,disabled:0===g,handleFiles:N,multiple:n},r.createElement("span",{className:"str-chat__input-flat-fileupload"},r.createElement(D,null))))),!d&&r.createElement(W,{sendMessage:m}))))},z=n(87182),L=n(18275),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F=function(e){var t=(0,x._)(),n=(0,L.k)(e),i=(0,z.u)(A(A(A({},t),n),e));return r.createElement(y.G6,{value:i},e.children)},P=r.memo((function(e){var t=e.Input,n=(0,o.JN)().dragAndDropWindow,i=(0,R.yM)("MessageInput"),a=i.Input,s=i.TriggerProvider,l=void 0===s?_:s,u=t||a||N,c=function(e){var t=e.children;return r.createElement(r.Fragment,null,t)},d=(0,r.useMemo)((function(){return n?c:F}),[n]);return r.createElement(d,A({},e),r.createElement(l,null,r.createElement(u,null)))}))},97274:function(e,t,n){"use strict";n.d(t,{b:function(){return u}});var r=n(67294),i=n(13943),o=n(37495),a=n(40239),s=n(21681),l=function(){var e=(0,o.uz)("QuotedMessagePreview").setQuotedMessage,t=(0,s.Ht)("QuotedMessagePreview").t;return r.createElement("div",{className:"quoted-message-preview-header"},r.createElement("div",null,t("Reply to Message")),r.createElement("button",{"aria-label":"Cancel Reply",className:"str-chat__square-button",onClick:function(){return e(void 0)}},r.createElement("svg",{height:"10",width:"10",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z",fillRule:"evenodd"}))))},u=function(e){var t,n=e.quotedMessage,o=(0,a.yM)("QuotedMessagePreview"),u=o.Attachment,c=o.Avatar,d=(0,s.Ht)("QuotedMessagePreview").userLanguage,f=c||i.q,h=(null===(t=n.i18n)||void 0===t?void 0:t[d+"_text"])||n.text,m=n.attachments.length?n.attachments[0]:null;return h||m?r.createElement("div",{className:"quoted-message-preview"},r.createElement(l,null),r.createElement("div",{className:"quoted-message-preview-content"},n.user&&r.createElement(f,{image:n.user.image,name:n.user.name||n.user.id,size:20,user:n.user}),r.createElement("div",{className:"quoted-message-preview-content-inner"},m&&r.createElement(u,{attachments:[m]}),r.createElement("div",null,h)))):null}},69119:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(67294),i=n(17157),o=n(87029),a=n(21707),s=function(){var e=(0,o.JN)("UploadsPreview"),t=e.maxNumberOfFiles,n=e.multipleUploads,s=(0,a.Nc)("UploadsPreview"),l=s.fileOrder,u=s.fileUploads,c=s.imageOrder,d=s.imageUploads,f=s.numberOfUploads,h=s.removeFile,m=s.removeImage,p=s.uploadFile,g=s.uploadImage,v=s.uploadNewFiles,y=c.map((function(e){return d[e]})),b=l.map((function(e){return u[e]}));return r.createElement(r.Fragment,null,c.length>0&&r.createElement(i.Vr,{disabled:!n||void 0!==t&&f>=t,handleFiles:v,handleRemove:m,handleRetry:g,imageUploads:y,multiple:n}),l.length>0&&r.createElement(i.N1,{handleFiles:v,handleRemove:h,handleRetry:p,uploads:b}))}},96808:function(e,t,n){"use strict";n.d(t,{b:function(){return a},_:function(){return s}});var r=n(67294),i=n(83156),o=n(87029),a=function(e){var t=e.cooldownInterval,n=e.setCooldownRemaining,i=(0,r.useState)(t),o=i[0],a=i[1];return(0,r.useEffect)((function(){var e=setInterval((function(){o>0?a(o-1):n(0)}),1e3);return function(){return clearInterval(e)}})),r.createElement("div",null,0===o?null:o)},s=function(){var e=(0,i.mx)("useCooldownTimer").latestMessageDatesByChannels,t=(0,o.JN)("useCooldownTimer").channel,n=t.data||{},a=n.cooldown,s=n.own_capabilities,l=(0,r.useState)(),u=l[0],c=l[1],d=!(null===s||void 0===s?void 0:s.includes("slow-mode"));return(0,r.useEffect)((function(){var n=e[t.cid];if(a&&n){var r=Math.round(a-((new Date).getTime()-n.getTime())/1e3);r>0&&!d&&c(r)}}),[t.id,a,e[t.cid]]),{cooldownInterval:a||0,cooldownRemaining:u,setCooldownRemaining:c}}},87182:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var r=n(67294),i=function(e){var t=e.additionalTextareaProps,n=e.attachments,i=e.autocompleteTriggers,o=e.clearEditingState,a=e.closeCommandsList,s=e.closeEmojiPicker,l=e.closeMentionsList,u=e.cooldownInterval,c=e.cooldownRemaining,d=e.disabled,f=e.disableMentions,h=e.doFileUploadRequest,m=e.doImageUploadRequest,p=e.emojiIndex,g=e.emojiPickerIsOpen,v=e.emojiPickerRef,y=e.errorHandler,b=e.fileOrder,_=e.fileUploads,w=e.focus,E=e.grow,x=e.handleChange,k=e.handleEmojiKeyDown,C=e.handleSubmit,S=e.imageOrder,T=e.imageUploads,M=e.insertText,I=e.isUploadEnabled,O=e.keycodeSubmitKeys,R=e.maxFilesLeft,N=e.maxRows,z=e.mentionAllAppUsers,L=e.mentioned_users,A=e.mentionQueryParams,F=e.message,P=e.noFiles,j=e.numberOfUploads,D=e.onPaste,B=e.onSelectEmoji,U=e.onSelectUser,H=e.openCommandsList,W=e.openEmojiPicker,q=e.openMentionsList,G=e.overrideSubmitHandler,Z=e.parent,V=e.publishTypingEvent,K=e.removeFile,$=e.removeImage,Y=e.setCooldownRemaining,Q=e.setText,J=e.showCommandsList,X=e.showMentionsList,ee=e.text,te=e.textareaRef,ne=e.uploadFile,re=e.uploadImage,ie=e.uploadNewFiles,oe=e.useMentionsTransliteration,ae=null===F||void 0===F?void 0:F.editing,se=Object.entries(_).map((function(e){e[0];return e[1].state})).join(),le=Object.entries(T).map((function(e){e[0];return e[1].state})).join(),ue=L.length,ce=null===Z||void 0===Z?void 0:Z.id;return(0,r.useMemo)((function(){return{additionalTextareaProps:t,attachments:n,autocompleteTriggers:i,clearEditingState:o,closeCommandsList:a,closeEmojiPicker:s,closeMentionsList:l,cooldownInterval:u,cooldownRemaining:c,disabled:d,disableMentions:f,doFileUploadRequest:h,doImageUploadRequest:m,emojiIndex:p,emojiPickerIsOpen:g,emojiPickerRef:v,errorHandler:y,fileOrder:b,fileUploads:_,focus:w,grow:E,handleChange:x,handleEmojiKeyDown:k,handleSubmit:C,imageOrder:S,imageUploads:T,insertText:M,isUploadEnabled:I,keycodeSubmitKeys:O,maxFilesLeft:R,maxRows:N,mentionAllAppUsers:z,mentioned_users:L,mentionQueryParams:A,message:F,noFiles:P,numberOfUploads:j,onPaste:D,onSelectEmoji:B,onSelectUser:U,openCommandsList:H,openEmojiPicker:W,openMentionsList:q,overrideSubmitHandler:G,parent:Z,publishTypingEvent:V,removeFile:K,removeImage:$,setCooldownRemaining:Y,setText:Q,showCommandsList:J,showMentionsList:X,text:ee,textareaRef:te,uploadFile:ne,uploadImage:re,uploadNewFiles:ie,useMentionsTransliteration:oe}}),[u,c,ae,g,se,le,I,ue,ce,V,J,X,ee])}},18275:function(e,t,n){"use strict";n.d(t,{k:function(){return N}});var r=n(67294),i=n(87029),o=n(42613),a=n(28292),s=function(){var e=(0,a.uL)("useEmojiIndex"),t=e.emojiConfig,n=e.EmojiIndex,i=(t||{}).emojiData;return(0,r.useMemo)((function(){if(n)return new n(i)}),[i,n])},l=n(44068),u=n(37495),c=n(83156),d=n(21681),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v=function(e,t,n,a){var s=e.noFiles,v=t.fileUploads,y=t.imageUploads,b=(0,i.JN)("useAttachments"),_=b.maxNumberOfFiles,w=b.multipleUploads,E=function(e,t,n){var o=e.doFileUploadRequest,a=e.errorHandler,s=t.fileUploads,f=(0,i.JN)("useFileUploads").channel,h=(0,u.uz)("useFileUploads").addNotification,m=(0,c.mx)("useFileUploads").getAppSettings,v=(0,d.Ht)("useFileUploads").t,y=(0,r.useCallback)((function(e){n({id:e,state:"uploading",type:"setFileUpload"})}),[]),b=(0,r.useCallback)((function(e){n({id:e,type:"removeFileUpload"})}),[]);return(0,r.useEffect)((function(){p(void 0,void 0,void 0,(function(){var e,t,r,i,u,c,d;return g(this,(function(p){switch(p.label){case 0:return(e=Object.values(s).find((function(e){return"uploading"===e.state&&e.file})))?(t=e.file,r=e.id,[4,(0,l.kx)({addNotification:h,file:t,getAppSettings:m,t:v,uploadType:"file"})]):[2];case 1:if(!p.sent())return[2,b(r)];p.label=2;case 2:return p.trys.push([2,7,,8]),o?[4,o(t,f)]:[3,4];case 3:return i=p.sent(),[3,6];case 4:return[4,f.sendFile(t)];case 5:i=p.sent(),p.label=6;case 6:return[3,8];case 7:return u=p.sent(),c="string"===typeof u.message?u.message:v("Error uploading file"),h(c,"error"),d=!1,s[r]?n({id:r,state:"failed",type:"setFileUpload"}):d=!0,!d&&a&&a(u,"upload-file",t),[2];case 8:return i?(n({id:r,state:"finished",type:"setFileUpload",url:i.file}),[2]):(b(r),[2])}}))}))}),[s,f,o,a,b]),{removeFile:b,uploadFile:y}}(e,t,n),x=E.removeFile,k=E.uploadFile,C=function(e,t,n){var o=e.doImageUploadRequest,a=e.errorHandler,s=t.imageUploads,p=(0,i.JN)("useImageUploads").channel,g=(0,c.mx)("useImageUploads").getAppSettings,v=(0,u.uz)("useImageUploads").addNotification,y=(0,d.Ht)("useImageUploads").t,b=(0,r.useCallback)((function(e){n({id:e,type:"removeImageUpload"})}),[]),_=(0,r.useCallback)((function(e){return h(void 0,void 0,void 0,(function(){var t,r,i,u,c,d;return m(this,(function(h){switch(h.label){case 0:return(t=s[e])?(r=t.file,"uploading"!==t.state&&n({id:e,state:"uploading",type:"setImageUpload"}),[4,(0,l.kx)({addNotification:v,file:r,getAppSettings:g,t:y,uploadType:"image"})]):[2];case 1:if(!h.sent())return[2,b(e)];h.label=2;case 2:return h.trys.push([2,7,,8]),o?[4,o(r,p)]:[3,4];case 3:return i=h.sent(),[3,6];case 4:return[4,p.sendImage(r)];case 5:i=h.sent(),h.label=6;case 6:return[3,8];case 7:return u=h.sent(),c="string"===typeof u.message?u.message:y("Error uploading image"),v(c,"error"),d=!1,s[e]?n({id:e,state:"failed",type:"setImageUpload"}):d=!0,!d&&a&&a(u,"upload-image",f(f({},r),{id:e})),[2];case 8:return i?(n({id:e,state:"finished",type:"setImageUpload",url:i.file}),[2]):(b(e),[2])}}))}))}),[s,p,o,a,b]);return(0,r.useEffect)((function(){if(FileReader){var e=Object.values(s).find((function(e){return"uploading"===e.state&&!!e.file&&!e.previewUri}));if(e){var t=e.file,r=e.id,i=new FileReader;return i.onload=function(e){var t;"string"===typeof(null===(t=e.target)||void 0===t?void 0:t.result)&&n({id:r,previewUri:e.target.result,type:"setImageUpload"})},i.readAsDataURL(t),_(r),function(){i.onload=null}}}}),[s,_]),{removeImage:b,uploadImage:_}}(e,t,n),S=C.removeImage,T=C.uploadImage,M=w?_||10:1,I=Object.values(y).filter((function(e){return"failed"!==e.state})).length+Object.values(v).filter((function(e){return"failed"!==e.state})).length,O=M-I,R=(0,r.useCallback)((function(e){var t;Array.from(e).slice(0,O).forEach((function(e){var t=(0,o.D1)();e.type.startsWith("image/")&&!e.type.endsWith(".photoshop")?n({file:e,id:t,state:"uploading",type:"setImageUpload"}):e instanceof File&&!s&&n({file:e,id:t,state:"uploading",type:"setFileUpload"})})),null===(t=null===a||void 0===a?void 0:a.current)||void 0===t||t.focus()}),[O,s]);return{maxFilesLeft:O,numberOfUploads:I,removeFile:x,removeImage:S,uploadFile:k,uploadImage:T,uploadNewFiles:R}},y=n(74255),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},E=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},x=function(e,t,n,r){var o=e.clearEditingState,a=e.message,s=e.overrideSubmitHandler,l=e.parent,c=e.publishTypingEvent,f=t.attachments,h=t.fileOrder,m=t.fileUploads,p=t.imageOrder,g=t.imageUploads,v=t.mentioned_users,y=t.text,x=(0,i.JN)("useSubmitHandler").channel,k=(0,u.uz)("useSubmitHandler"),C=k.addNotification,S=k.editMessage,T=k.sendMessage,M=(0,d.Ht)("useSubmitHandler").t;return{handleSubmit:function(e,t){return _(void 0,void 0,void 0,(function(){var i,u,d,_;return w(this,(function(w){switch(w.label){case 0:if(e.preventDefault(),i=y.trim(),(""===i||">"===i||"``````"===i||"``"===i||"**"===i||"____"===i||"__"===i||"****"===i)&&0===r)return[2];if(Object.values(g).some((function(e){return"uploading"===e.state}))||Object.values(m).some((function(e){return"uploading"===e.state})))return[2,C(M("Wait until all attachments have uploaded"),"error")];if(u=function(){var e=p.map((function(e){return g[e]})).filter((function(e){return"failed"!==e.state})).filter((function(e,t,n){var r=e.id,i=e.url;return n.every((function(e){return e.id===r||e.url!==i}))})).map((function(e){return{fallback:e.file.name,image_url:e.url,type:"image"}})),t=h.map((function(e){return m[e]})).filter((function(e){return"failed"!==e.state})).map((function(e){return{asset_url:e.url,file_size:e.file.size,mime_type:e.file.type,title:e.file.name,type:(t=e.file.type||"",t.includes("video/")?"video":t.includes("audio/")?"audio":"file")};var t}));return E(E(E([],f),e),t)}(),d=Array.from(new Set(v.filter((function(e){var t=e.id,n=e.name;return y.includes("@"+t)||y.includes("@"+n)})))),_={attachments:u,mentioned_users:d,text:y},!a)return[3,5];delete a.i18n,w.label=1;case 1:return w.trys.push([1,3,,4]),[4,S(b(b({},a),_))];case 2:return w.sent(),o&&o(),n({type:"clear"}),[3,4];case 3:return w.sent(),C(M("Edit message request failed"),"error"),[3,4];case 4:return[3,12];case 5:return w.trys.push([5,11,,12]),n({type:"clear"}),s?(s(b(b({},_),{parent:l}),x.cid),[3,8]):[3,6];case 6:return[4,T(b(b({},_),{parent:l}),t)];case 7:w.sent(),w.label=8;case 8:return c?[4,x.stopTyping()]:[3,10];case 9:w.sent(),w.label=10;case 10:return[3,12];case 11:return w.sent(),n({getNewText:function(){return y},type:"setText"}),d.length&&d.forEach((function(e){n({type:"addMentionedUser",user:e})})),C(M("Send message request failed"),"error"),[3,12];case 12:return[2]}}))}))}}},k=n(17157),C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},M={},I={},O=function(e){var t,n,r;if(!e)return{attachments:[],emojiPickerIsOpen:!1,fileOrder:[],fileUploads:T({},M),imageOrder:[],imageUploads:T({},I),mentioned_users:[],setText:function(){return null},text:""};var i=(null===(t=e.attachments)||void 0===t?void 0:t.filter((function(e){return"image"===e.type})).reduce((function(e,t){var n=(0,o.D1)();return e[n]={file:{name:t.fallback||""},id:n,state:"finished",url:t.image_url},e}),{}))||{},a=Object.keys(i),s=(null===(n=e.attachments)||void 0===n?void 0:n.filter((function(e){return"file"===e.type})).reduce((function(e,t){var n=(0,o.D1)();return e[n]={file:{name:t.title||"",size:t.file_size,type:t.mime_type},id:n,state:"finished",url:t.asset_url},e}),{}))||{},l=Object.keys(s);return{attachments:(null===(r=e.attachments)||void 0===r?void 0:r.filter((function(e){var t=e.type;return"file"!==t&&"image"!==t})))||[],emojiPickerIsOpen:!1,fileOrder:l,fileUploads:s,imageOrder:a,imageUploads:i,mentioned_users:e.mentioned_users||[],setText:function(){return null},text:e.text||""}},R=function(e,t){var n,r;switch(t.type){case"setEmojiPickerIsOpen":return T(T({},e),{emojiPickerIsOpen:t.value});case"setText":return T(T({},e),{text:t.getNewText(e.text)});case"clear":return{attachments:[],emojiPickerIsOpen:!1,fileOrder:[],fileUploads:T({},M),imageOrder:[],imageUploads:T({},I),mentioned_users:[],text:""};case"setImageUpload":var i=e.imageUploads[t.id];if(!i&&!t.file)return e;var o=i?e.imageOrder:e.imageOrder.concat(t.id);return delete(s=T({},t)).type,T(T({},e),{imageOrder:o,imageUploads:T(T({},e.imageUploads),(n={},n[t.id]=T(T({},e.imageUploads[t.id]),s),n))});case"setFileUpload":var a=e.fileUploads[t.id];if(!a&&!t.file)return e;var s,l=a?e.fileOrder:e.fileOrder.concat(t.id);return delete(s=T({},t)).type,T(T({},e),{fileOrder:l,fileUploads:T(T({},e.fileUploads),(r={},r[t.id]=T(T({},e.fileUploads[t.id]),s),r))});case"removeImageUpload":if(!e.imageUploads[t.id])return e;var u=T({},e.imageUploads);return delete u[t.id],T(T({},e),{imageOrder:e.imageOrder.filter((function(e){return e!==t.id})),imageUploads:u});case"removeFileUpload":if(!e.fileUploads[t.id])return e;var c=T({},e.fileUploads);return delete c[t.id],T(T({},e),{fileOrder:e.fileOrder.filter((function(e){return e!==t.id})),fileUploads:c});case"addMentionedUser":return T(T({},e),{mentioned_users:e.mentioned_users.concat(t.user)});default:return e}},N=function(e){var t=e.closeEmojiPickerOnClick,n=e.message,o=(0,i.JN)("useMessageInputState"),a=o.channelCapabilities,l=void 0===a?{}:a,u=o.channelConfig,c=(0,r.useReducer)(R,n,O),d=c[0],f=c[1],h=function(e,t,n){var o=(0,i.JN)("useMessageInputText").channel,a=e.additionalTextareaProps,s=e.focus,l=e.parent,u=e.publishTypingEvent,c=void 0===u||u,d=t.text,f=(0,r.useRef)();(0,r.useEffect)((function(){s&&f.current&&f.current.focus()}),[s]);var h=(0,r.useRef)(),m=(0,r.useCallback)((function(e){var t=(a||{}).maxLength;if(f.current){var r=f.current,i=r.selectionEnd,o=r.selectionStart;h.current=o+e.length,n({getNewText:function(n){var r=n.slice(0,o)+e+n.slice(i);return t&&r.length>t?r.slice(0,t):r},type:"setText"})}else n({getNewText:function(n){var r=n+e;return t&&r.length>t?r.slice(0,t):r},type:"setText"})}),[a,h,f]);return(0,r.useEffect)((function(){var e=f.current;e&&void 0!==h.current&&(e.selectionStart=h.current,e.selectionEnd=h.current,h.current=void 0)}),[d,h]),{handleChange:(0,r.useCallback)((function(e){if(e.preventDefault(),e&&e.target){var t=e.target.value;n({getNewText:function(){return t},type:"setText"}),c&&t&&o&&(0,y.t1)(o.keystroke(null===l||void 0===l?void 0:l.id),"start typing event")}}),[o,l,c]),insertText:m,textareaRef:f}}(e,d,f),m=h.handleChange,p=h.insertText,g=h.textareaRef,b=(0,r.useState)(!1),_=b[0],w=b[1],E=(0,r.useState)(!1),M=E[0],I=E[1],N=function(e,t,n,i,o){var a=(0,r.useRef)(null),s=(0,r.useCallback)((function(e){e.preventDefault(),a.current&&!a.current.contains(e.target)&&t({type:"setEmojiPickerIsOpen",value:!1})}),[a]),l=(0,r.useCallback)((function(e){e.preventDefault(),t({type:"setEmojiPickerIsOpen",value:!0}),e.stopPropagation()}),[]),u=function(e){"Escape"===e.key&&t({type:"setEmojiPickerIsOpen",value:!1})};(0,r.useEffect)((function(){return e.emojiPickerIsOpen&&(document.addEventListener("click",s,!1),document.addEventListener("keydown",u)),function(){document.removeEventListener("click",s,!1),document.removeEventListener("keydown",u)}}),[s,e.emojiPickerIsOpen]);var c=(0,r.useCallback)((function(e){var r;n(e.native),o&&t({type:"setEmojiPickerIsOpen",value:!1}),null===(r=null===i||void 0===i?void 0:i.current)||void 0===r||r.focus()}),[n]);return{closeEmojiPicker:s,emojiPickerRef:a,handleEmojiKeyDown:function(e){" "!==e.key&&"Enter"!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),l(e))},onSelectEmoji:c,openEmojiPicker:l}}(d,f,p,g,t),z=N.closeEmojiPicker,L=N.emojiPickerRef,A=N.handleEmojiKeyDown,F=N.onSelectEmoji,P=N.openEmojiPicker,j=v(e,d,f,g),D=j.maxFilesLeft,B=j.numberOfUploads,U=j.removeFile,H=j.removeImage,W=j.uploadFile,q=j.uploadImage,G=j.uploadNewFiles,Z=x(e,d,f,B).handleSubmit,V=function(e,t){return{onPaste:(0,r.useCallback)((function(n){var r;r=n,C(void 0,void 0,void 0,(function(){var n,i,o,a,s,l;return S(this,(function(u){switch(u.label){case 0:if(n=r.clipboardData.items,!(0,k.w$)(Array.from(n)))return[2];for(r.preventDefault(),i=void 0,o=function(e){var t=n[e];if("string"===t.kind&&"text/plain"===t.type)return i=new Promise((function(e){t.getAsString((function(t){e(t)}))})),"break"},a=0;a<n.length&&"break"!==o(a);a++);return[4,(0,k.Yu)(Array.from(n))];case 1:return(s=u.sent()).length?(e(s),[2]):i?[4,i]:[3,3];case 2:l=u.sent(),t(l),u.label=3;case 3:return[2]}}))}))}),[t,e])}}(G,p).onPaste,K=!1!==(null===u||void 0===u?void 0:u.uploads)&&!1!==l["upload-file"],$=(0,r.useCallback)((function(e){f({type:"addMentionedUser",user:e})}),[]),Y=(0,r.useCallback)((function(e){f({getNewText:function(){return e},type:"setText"})}),[]);return T(T({},d),{closeCommandsList:function(){return w(!1)},closeEmojiPicker:z,closeMentionsList:function(){return I(!1)},emojiIndex:s(),emojiPickerRef:L,handleChange:m,handleEmojiKeyDown:A,handleSubmit:Z,insertText:p,isUploadEnabled:K,maxFilesLeft:D,numberOfUploads:B,onPaste:V,onSelectEmoji:F,onSelectUser:$,openCommandsList:function(){f({getNewText:function(){return"/"},type:"setText"}),w(!0)},openEmojiPicker:P,openMentionsList:function(){f({getNewText:function(e){return e+"@"},type:"setText"}),I(!0)},removeFile:U,removeImage:H,setText:Y,showCommandsList:_,showMentionsList:M,textareaRef:g,uploadFile:W,uploadImage:q,uploadNewFiles:G})}},44068:function(e,t,n){"use strict";n.d(t,{i_:function(){return l},kx:function(){return u}});var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o={a:"\xe1|\xe0|\xe3|\xe2|\xc0|\xc1|\xc3|\xc2",c:"\xe7|\xc7",e:"\xe9|\xe8|\xea|\xc9|\xc8|\xca",i:"\xed|\xec|\xee|\xcd|\xcc|\xce",n:"\xf1|\xd1",o:"\xf3|\xf2|\xf4|\u0151|\xf5|\xd3|\xd2|\xd4|\xd5",u:"\xfa|\xf9|\xfb|\xfc|\xda|\xd9|\xdb|\xdc"},a=function(e){return e?Object.keys(o).reduce((function(e,t){return e.replace(new RegExp(o[t],"g"),t)}),e):""},s=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var n,r,i=[];for(n=0;n<=t.length;n++)i[n]=[n];for(r=0;r<=e.length;r++)i[0][r]=r;for(n=1;n<=t.length;n++)for(r=1;r<=e.length;r++)t.charAt(n-1)===e.charAt(r-1)?i[n][r]=i[n-1][r-1]:i[n][r]=Math.min(i[n-1][r-1]+1,Math.min(i[n][r-1]+1,i[n-1][r]+1));return i[t.length][e.length]},l=function(e){var t=e.ownUserId,o=e.query,l=e.text,u=e.useMentionsTransliteration;return e.users.filter((function(e){if(e.id===t)return!1;if(!o)return!0;var c=a(e.id).toLowerCase(),d=a(e.name).toLowerCase(),f=a(o).toLowerCase();u&&r(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,n.e(524).then(n.bind(n,92524))];case 1:return t=r.sent().default,d=t(e.name||"").toLowerCase(),f=t(o).toLowerCase(),c=t(e.id).toLowerCase(),[2]}}))}));var h=l.slice(-4).includes("@");if(d){var m=s(f,d);if(d.includes(f)||m<=3&&h)return!0}var p=s(f,c);return c.includes(f)||p<=3&&h}))},u=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,o,a,s,l,u,c,d,f,h,m,p;return i(this,(function(i){switch(i.label){case 0:return t=e.addNotification,n=e.file,r=e.getAppSettings,o=e.t,a=e.uploadType,s=null,[4,r()];case 1:return s=i.sent(),l=("image"===a?null===(m=null===s||void 0===s?void 0:s.app)||void 0===m?void 0:m.image_upload_config:null===(p=null===s||void 0===s?void 0:s.app)||void 0===p?void 0:p.file_upload_config)||{},u=l.allowed_file_extensions,c=l.allowed_mime_types,d=l.blocked_file_extensions,f=l.blocked_mime_types,h=function(){return t(o('Upload type: "{{ type }}" is not allowed',{type:n.type||"unknown type"}),"error")},(null===u||void 0===u?void 0:u.length)&&!u.some((function(e){return n.name.toLowerCase().endsWith(e.toLowerCase())}))||(null===d||void 0===d?void 0:d.length)&&d.some((function(e){return n.name.toLowerCase().endsWith(e.toLowerCase())}))||(null===c||void 0===c?void 0:c.length)&&!c.some((function(e){var t;return e.toLowerCase()===(null===(t=n.type)||void 0===t?void 0:t.toLowerCase())}))||(null===f||void 0===f?void 0:f.length)&&f.some((function(e){var t;return e.toLowerCase()===(null===(t=n.type)||void 0===t?void 0:t.toLowerCase())}))?(h(),[2,!1]):[2,!0]}}))}))}},45291:function(e,t,n){"use strict";n.d(t,{TK:function(){return o},Ai:function(){return a},HC:function(){return s},hi:function(){return l},c7:function(){return u}});var r=n(67294),i=n(21681),o=function(){var e=(0,i.Ht)("EmojiIconLarge").t;return r.createElement("svg",{height:"28",width:"28",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,e("Open emoji picker")),r.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},r.createElement("path",{d:"M14 4.4C8.6 4.4 4.4 8.6 4.4 14c0 5.4 4.2 9.6 9.6 9.6c5.4 0 9.6-4.2 9.6-9.6c0-5.4-4.2-9.6-9.6-9.6zM2 14c0-6.6 5.4-12 12-12s12 5.4 12 12s-5.4 12-12 12s-12-5.4-12-12zM12.8 11c0 1-.8 1.8-1.8 1.8s-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8s1.8.8 1.8 1.8zM18.8 11c0 1-.8 1.8-1.8 1.8s-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8s1.8.8 1.8 1.8zM8.6 15.4c.6-.4 1.2-.2 1.6.2c.6.8 1.6 1.8 3 2c1.2.4 2.8.2 4.8-2c.4-.4 1.2-.6 1.6 0c.4.4.6 1.2 0 1.6c-2.2 2.6-4.8 3.4-7 3c-2-.4-3.6-1.8-4.4-3c-.4-.6-.2-1.2.4-1.8z"})))},a=function(){var e=(0,i.Ht)("EmojiIconSmall").t;return r.createElement("svg",{height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,e("Open emoji picker")),r.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},r.createElement("path",{d:"M6.7 1.42C3.73 1.42 1.42 3.73 1.42 6.7c0 2.97 2.31 5.28 5.28 5.28c2.97 0 5.28-2.31 5.28-5.28c0-2.97-2.31-5.28-5.28-5.28zM.1 6.7c0-3.63 2.97-6.6 6.6-6.6s6.6 2.97 6.6 6.6s-2.97 6.6-6.6 6.6s-6.6-2.97-6.6-6.6zM6.04 5.05c0 .55-.44.99-.99.99s-.99-.44-.99-.99s.44-.99.99-.99s.99.44.99.99zM9.34 5.05c0 .55-.44.99-.99.99s-.99-.44-.99-.99s.44-.99.99-.99s.99.44.99.99zM3.73 7.47c.33-.22.66-.11.88.11c.33.44.88.99 1.65 1.1c.66.22 1.54.11 2.64-1.1c.22-.22.66-.33.88 0c.22.22.33.66 0 .88c-1.21 1.43-2.64 1.87-3.85 1.65c-1.1-.22-1.98-.99-2.42-1.65c-.22-.33-.11-.66.22-.99z"})))},s=function(){var e=(0,i.Ht)("FileUploadIcon").t;return r.createElement("svg",{height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,e("Attach files")),r.createElement("path",{d:"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z",fillRule:"nonzero"}))},l=function(){var e=(0,i.Ht)("FileUploadIconFlat").t;return r.createElement("svg",{height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,e("Attach files")),r.createElement("path",{d:"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z",fillRule:"nonzero"}))},u=function(e){var t=e.sendMessage,n=(0,i.Ht)("SendButton").t;return r.createElement("button",{"aria-label":"Send",className:"str-chat__send-button",onClick:t},r.createElement("svg",{height:"17",viewBox:"0 0 18 17",width:"18",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,n("Send")),r.createElement("path",{d:"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z",fill:"#006cff",fillRule:"evenodd"})))}},78700:function(e,t,n){"use strict";n.d(t,{r:function(){return A}});var r=n(67294),i=n(25297),o=n(83156),a=n(40239),s=n(96649),l=n(96660),u=n(53207),c=n(53455),d=n(21681),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e){var t=e.enrichedMessages,n=e.internalMessageProps,h=e.messageGroupStyles,m=e.onMessageLoadCaptured,p=e.read,g=e.returnAllReadData,v=e.threadList,y=(0,o.mx)("useMessageListElements"),b=y.client,_=y.customClasses,w=(0,a.yM)("useMessageListElements"),E=w.DateSeparator,x=void 0===E?l.Z:E,k=w.HeaderComponent,C=w.MessageSystem,S=void 0===C?u.B:C,T=function(e){var t=e.messages,n=e.read,o=e.returnAllReadData,a=e.userID;return(0,r.useMemo)((function(){return(0,i.Pi)(t.filter((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)===a})),n,o)}),[t,n,o,a])}({messages:t,read:p,returnAllReadData:g,userID:b.userID}),M=(0,r.useMemo)((function(){return(0,i.hR)(t)}),[t]);return(0,r.useMemo)((function(){return t.map((function(e){var t;if(e.customType===s.L.date&&e.date&&(0,d.J_)(e.date))return r.createElement("li",{key:e.date.toISOString()+"-i"},r.createElement(x,{date:e.date,formatDate:n.formatDate,unread:e.unread}));if(e.customType===s.L.intro&&k)return r.createElement("li",{key:"intro"},r.createElement(k,null));if("system"===e.type)return r.createElement("li",{key:(null===(t=e.event)||void 0===t?void 0:t.created_at)||e.created_at||""},r.createElement(S,{message:e}));var i=h[e.id]||"",o=(null===_||void 0===_?void 0:_.message)||"str-chat__li str-chat__li--"+i;return r.createElement("li",{className:o,"data-message-id":e.id,"data-testid":o,key:e.id||e.created_at,onLoadCapture:m},r.createElement(c.v,f({groupStyles:[i],lastReceivedId:M,message:e,readBy:T[e.id]||[],threadList:v},n)))}))}),[t,n,M,h,m,T,v])};var m=function(e){var t=e.messages,n=void 0===t?[]:t,i=e.scrolledUpThreshold,a=void 0===i?200:i,s=e.hasMoreNewer,l=e.suppressAutoscroll,u=(0,r.useState)(!1),c=u[0],d=u[1],f=(0,r.useState)(),h=f[0],m=f[1],p=(0,r.useRef)(!1),g=(0,r.useRef)(!1),v=(0,r.useRef)(null),y=(0,r.useCallback)((function(){var e,t;!(null===(e=v.current)||void 0===e?void 0:e.scrollTo)||s||l||(null===(t=v.current)||void 0===t||t.scrollTo({top:v.current.scrollHeight}),d(!1),setTimeout((function(){var e;null===(e=v.current)||void 0===e||e.scrollTo({top:v.current.scrollHeight})}),200))}),[v,s,l]);(0,r.useLayoutEffect)((function(){(null===v||void 0===v?void 0:v.current)&&(m(v.current.getBoundingClientRect()),y())}),[v,s]);var b=function(e){var t=e.onScrollBy,n=e.scrollContainerMeasures,i=e.scrolledUpThreshold,a=e.scrollToBottom,s=e.showNewMessages,l=(0,o.mx)("useMessageListScrollManager").client,u=(0,r.useRef)({offsetHeight:0,scrollHeight:0}),c=(0,r.useRef)(),d=(0,r.useRef)(0);return(0,r.useEffect)((function(){a()}),[]),(0,r.useEffect)((function(){var r,o,f,h=u.current,m=c.current,p=e.messages,g=p[p.length-1]||{},v=null===m||void 0===m?void 0:m[m.length-1],y=n(),b=h.scrollHeight-h.offsetHeight-d.current<i;if("undefined"!==typeof m)if(m.length<p.length)if((null===v||void 0===v?void 0:v.id)===g.id){var _=y.scrollHeight-h.scrollHeight;t(_)}else(null===(r=g.user)||void 0===r?void 0:r.id)===l.userID||b?a():s();else{var w=(null===(o=null===v||void 0===v?void 0:v.latest_reactions)||void 0===o?void 0:o.length)!==(null===(f=g.latest_reactions)||void 0===f?void 0:f.length),E=(null===v||void 0===v?void 0:v.reply_count)!==g.reply_count;(w||E)&&b&&a()}c.current=p,u.current=y}),[u,c,e.messages]),function(e){d.current=e}}({messages:n,onScrollBy:function(e){var t;null===(t=v.current)||void 0===t||t.scrollBy({top:e})},scrollContainerMeasures:function(){var e,t;return{offsetHeight:(null===(e=v.current)||void 0===e?void 0:e.offsetHeight)||0,scrollHeight:(null===(t=v.current)||void 0===t?void 0:t.scrollHeight)||0}},scrolledUpThreshold:a,scrollToBottom:y,showNewMessages:function(){return d(!0)}}),_=(0,r.useCallback)((function(e){var t=e.target,n=t.scrollTop;b(n);var r=t.offsetHeight,i=t.scrollHeight;p.current=i-(n+r)<a,g.current=n<a,p.current&&d(!1)}),[b,g,p,a]),w=(0,r.useCallback)((function(){p.current&&!g.current&&y()}),[g,p,y]);return{hasNewMessages:c,listRef:v,onMessageLoadCaptured:w,onScroll:_,scrollToBottom:y,wrapperRect:h}},p=r.memo((function(e){var t=e.children;return r.createElement("div",{className:"str-chat__list__center"},t)})),g=n(54907),v=n(97150),y=n(37495),b=n(87029),_=n(7437),w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},x=function(e){e instanceof WheelEvent&&1===e.deltaY&&e.preventDefault()},k=function(e){var t=e.children,n=e.element,i=void 0===n?"div":n,o=e.hasMore,a=void 0!==o&&o,s=e.hasMoreNewer,l=void 0!==s&&s,u=e.initialLoad,c=void 0===u||u,d=e.isLoading,f=void 0!==d&&d,h=e.listenToScroll,m=e.loader,p=e.loadMore,g=e.loadMoreNewer,v=e.threshold,y=void 0===v?250:v,b=e.useCapture,_=void 0!==b&&b,k=E(e,["children","element","hasMore","hasMoreNewer","initialLoad","isLoading","listenToScroll","loader","loadMore","loadMoreNewer","threshold","useCapture"]),C=(0,r.useRef)(),S=(0,r.useCallback)((function(){var e=C.current;if(e&&null!==e.offsetParent){var t=e.parentElement,n=e.scrollHeight-t.scrollTop-t.clientHeight,r=t.scrollTop;h&&h(n,r,y),r<Number(y)&&"function"===typeof p&&a&&p(),n<Number(y)&&"function"===typeof g&&l&&g()}}),[a,l,y,h,p,g]);(0,r.useEffect)((function(){var e,t=null===(e=C.current)||void 0===e?void 0:e.parentNode;return f||!t?function(){}:(t.addEventListener("scroll",S,_),t.addEventListener("resize",S,_),c&&S(),function(){t.removeEventListener("scroll",S,_),t.removeEventListener("resize",S,_)})}),[c,f,S,_]),(0,r.useEffect)((function(){var e,t=null===(e=C.current)||void 0===e?void 0:e.parentNode;return t&&t.addEventListener("wheel",x,{passive:!1}),function(){t&&t.removeEventListener("wheel",x,_)}}),[_]);var T=w(w({},k),{ref:function(e){C.current=e}}),M=[t];return f&&m&&M.unshift(m),r.createElement(i,T,M)},C=n(44498),S=n(52127),T=n(13943),M=n(61687),I=r.memo((function(e){var t=e.Avatar,n=e.avatarSize,i=void 0===n?32:n,s=e.threadList,l=(0,b.JN)("TypingIndicator"),u=l.channelConfig,c=l.thread,d=(0,o.mx)("TypingIndicator").client,f=(0,a.yM)("TypingIndicator").Avatar,h=(0,M.f5)("TypingIndicator").typing,m=void 0===h?{}:h,p=t||f||T.q;if(!1===(null===u||void 0===u?void 0:u.typing_events))return null;var g=s?[]:Object.values(m).filter((function(e){var t,n=e.parent_id,r=e.user;return(null===r||void 0===r?void 0:r.id)!==(null===(t=d.user)||void 0===t?void 0:t.id)&&!n})),v=s?Object.values(m).filter((function(e){var t,n=e.parent_id,r=e.user;return(null===r||void 0===r?void 0:r.id)!==(null===(t=d.user)||void 0===t?void 0:t.id)&&n===(null===c||void 0===c?void 0:c.id)})):[];return r.createElement("div",{className:"str-chat__typing-indicator "+(s&&v.length||!s&&g.length?"str-chat__typing-indicator--typing":"")},r.createElement("div",{className:"str-chat__typing-indicator__avatars"},(s?v:g).map((function(e,t){var n=e.user;return r.createElement(p,{image:null===n||void 0===n?void 0:n.image,key:(null===n||void 0===n?void 0:n.id)+"-"+t,name:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.id),size:i,user:n})}))),r.createElement("div",{className:"str-chat__typing-indicator__dots"},r.createElement("span",{className:"str-chat__typing-indicator__dot"}),r.createElement("span",{className:"str-chat__typing-indicator__dot"}),r.createElement("span",{className:"str-chat__typing-indicator__dot"})))})),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},N=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},L=function(e){var t=e.channel,n=e.disableDateSeparator,s=void 0!==n&&n,l=e.groupStyles,u=e.hideDeletedMessages,c=void 0!==u&&u,d=e.hideNewMessageSeparator,f=void 0!==d&&d,y=e.messageActions,b=void 0===y?Object.keys(S.Xh):y,w=e.messages,E=void 0===w?[]:w,x=e.notifications,T=e.noGroupByUser,M=void 0!==T&&T,z=e.pinPermissions,L=void 0===z?S.Z1:z,A=e.returnAllReadData,F=void 0!==A&&A,P=e.threadList,j=void 0!==P&&P,D=e.unsafeHTML,B=void 0!==D&&D,U=e.headerPosition,H=e.read,W=e.messageLimit,q=void 0===W?100:W,G=e.loadMore,Z=e.loadMoreNewer,V=e.hasMoreNewer,K=void 0!==V&&V,$=e.suppressAutoscroll,Y=e.highlightedMessageId,Q=e.jumpToLatestMessage,J=void 0===Q?function(){return Promise.resolve()}:Q,X=(0,o.mx)("MessageList").customClasses,ee=(0,a.yM)("MessageList"),te=ee.EmptyStateIndicator,ne=void 0===te?_.D:te,re=ee.MessageListNotifications,ie=void 0===re?v.T:re,oe=ee.MessageNotification,ae=void 0===oe?g.f:oe,se=ee.TypingIndicator,le=void 0===se?I:se,ue=m({hasMoreNewer:K,messages:E,scrolledUpThreshold:e.scrolledUpThreshold,suppressAutoscroll:$}),ce=ue.hasNewMessages,de=ue.listRef,fe=ue.onMessageLoadCaptured,he=ue.onScroll,me=ue.scrollToBottom,pe=ue.wrapperRect,ge=function(e){var t=e.channel,n=e.disableDateSeparator,s=e.groupStyles,l=e.headerPosition,u=e.hideDeletedMessages,c=e.hideNewMessageSeparator,d=e.messages,f=e.noGroupByUser,h=(0,o.mx)("useEnrichedMessages").client,m=(0,a.yM)("useEnrichedMessages").HeaderComponent,p=(0,r.useMemo)((function(){var e;return null===(e=t.lastRead)||void 0===e?void 0:e.call(t)}),[t]),g=!n,v=g||u||!c?(0,i.Ej)({enableDateSeparator:g,hideDeletedMessages:u,hideNewMessageSeparator:c,lastRead:p,messages:d,userId:h.userID||""}):d;m&&(v=(0,i.c)(v,l));var y=s||i.db;return{messageGroupStyles:(0,r.useMemo)((function(){return v.reduce((function(e,t,n){var r=y(t,v[n-1],v[n+1],f);return r&&(e[t.id]=r),e}),{})}),[v,f]),messages:v}}({channel:t,disableDateSeparator:s,groupStyles:l,headerPosition:U,hideDeletedMessages:c,hideNewMessageSeparator:f,messages:E,noGroupByUser:M}),ve=ge.messageGroupStyles,ye=ge.messages,be=h({enrichedMessages:ye,internalMessageProps:{additionalMessageInputProps:e.additionalMessageInputProps,closeReactionSelectorOnClick:e.closeReactionSelectorOnClick,customMessageActions:e.customMessageActions,disableQuotedMessages:e.disableQuotedMessages,formatDate:e.formatDate,getDeleteMessageErrorNotification:e.getDeleteMessageErrorNotification,getFlagMessageErrorNotification:e.getFlagMessageErrorNotification,getFlagMessageSuccessNotification:e.getFlagMessageSuccessNotification,getMuteUserErrorNotification:e.getMuteUserErrorNotification,getMuteUserSuccessNotification:e.getMuteUserSuccessNotification,getPinMessageErrorNotification:e.getPinMessageErrorNotification,Message:e.Message,messageActions:b,messageListRect:pe,onlySenderCanEdit:e.onlySenderCanEdit,onMentionsClick:e.onMentionsClick,onMentionsHover:e.onMentionsHover,onUserClick:e.onUserClick,onUserHover:e.onUserHover,openThread:e.openThread,pinPermissions:L,renderText:e.renderText,retrySendMessage:e.retrySendMessage,unsafeHTML:B},messageGroupStyles:ve,onMessageLoadCaptured:fe,read:H,returnAllReadData:F,threadList:j}),_e=(0,a.yM)("useInternalInfiniteScrollProps").LoadingIndicator,we=void 0===_e?C.T:_e,Ee=(null===X||void 0===X?void 0:X.messageList)||"str-chat__list",xe=j?(null===X||void 0===X?void 0:X.threadList)||"str-chat__list--thread":"",ke=r.useCallback((function(){G&&G(q)}),[G,q]),Ce=r.useCallback((function(){Z&&Z(q)}),[Z,q]),Se=r.useCallback((function(){return R(void 0,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return K?[4,J()]:[3,2];case 1:return e.sent(),[3,3];case 2:me(),e.label=3;case 3:return[2]}}))}))}),[me,K]),Te=r.useRef(null);return r.useLayoutEffect((function(){var e;if(Y){var t=null===(e=Te.current)||void 0===e?void 0:e.querySelector("[data-message-id='"+Y+"']");null===t||void 0===t||t.scrollIntoView({block:"center"})}}),[Y]),r.createElement(r.Fragment,null,r.createElement("div",{className:Ee+" "+xe,onScroll:he,ref:de},be.length?r.createElement(k,O({className:"str-chat__reverse-infinite-scroll","data-testid":"reverse-infinite-scroll",hasMore:e.hasMore,hasMoreNewer:e.hasMoreNewer,isLoading:e.loadingMore,loader:r.createElement(p,{key:"loadingindicator"},r.createElement(we,{size:20})),loadMore:ke,loadMoreNewer:Ce},e.internalInfiniteScrollProps),r.createElement("ul",{className:"str-chat__ul",ref:Te},be),r.createElement(le,{threadList:j}),r.createElement("div",{key:"bottom"})):r.createElement(ne,{listType:"message"})),r.createElement(ie,{hasNewMessages:ce,isNotAtLatestMessageSet:K,MessageNotification:ae,notifications:x,scrollToBottom:Se}))},A=function(e){var t=(0,y.uz)("MessageList"),n=t.jumpToLatestMessage,i=t.loadMore,o=t.loadMoreNewer,a=(0,b.JN)("MessageList"),s=(a.members,a.mutes,a.watchers,z(a,["members","mutes","watchers"]));return r.createElement(L,O({jumpToLatestMessage:n,loadMore:i,loadMoreNewer:o},s,e))}},97150:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(67294),i=r.memo((function(e){var t=e.active,n=e.children,i=e.type;return t?r.createElement("div",{"aria-live":"polite",className:"str-chat__custom-notification notification-"+i,"data-testid":"custom-notification"},n):null})),o=n(83156),a=n(21681),s=r.memo((function(){var e=(0,o.mx)("ConnectionStatus").client,t=(0,a.Ht)("ConnectionStatus").t,n=(0,r.useState)(!0),s=n[0],l=n[1];return(0,r.useEffect)((function(){var t=function(e){var t=e.online,n=void 0!==t&&t;s!==n&&l(n)};return e.on("connection.changed",t),function(){return e.off("connection.changed",t)}}),[e,s]),r.createElement(i,{active:!s,type:"error"},t("Connection failure, reconnecting now..."))})),l=function(e){var t=e.hasNewMessages,n=e.isNotAtLatestMessageSet,o=e.MessageNotification,l=e.notifications,u=e.scrollToBottom,c=(0,a.Ht)("MessageListNotifications").t;return r.createElement("div",{className:"str-chat__list-notifications"},l.map((function(e){return r.createElement(i,{active:!0,key:e.id,type:e.type},e.text)})),r.createElement(s,null),r.createElement(o,{onClick:u,showNotification:t||n},c(n?"Latest Messages":"New Messages!")))}},54907:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(67294),i=r.memo((function(e){var t=e.children,n=e.onClick,i=e.showNotification;return void 0===i||i?r.createElement("button",{"aria-live":"polite",className:"str-chat__message-notification","data-testid":"message-notification",onClick:n},t):null}))},25297:function(e,t,n){"use strict";n.d(t,{Ej:function(){return a},hR:function(){return l},Pi:function(){return u},c:function(){return c},db:function(){return d}});var r=n(44586),i=n(96649),o=n(21681),a=function(e){for(var t,n,r,a=e.enableDateSeparator,l=e.hideDeletedMessages,u=e.hideNewMessageSeparator,c=e.lastRead,d=e.messages,f=e.setGiphyPreviewMessage,h=e.userId,m=!1,p=!1,g=[],v=0;v<d.length;v+=1){var y=d[v];if(!l||"deleted"!==y.type)if(f&&"ephemeral"===y.type&&"giphy"===y.command)p=!0,f(y);else{var b=y.created_at&&(0,o.J_)(y.created_at)&&y.created_at.toDateString()||"",_=d[v-1],w=b;a&&(null===_||void 0===_?void 0:_.created_at)&&(0,o.J_)(_.created_at)&&(w=_.created_at.toDateString()),m||u||(m=c&&y.created_at&&new Date(c)<y.created_at||!1,a&&m&&(null===(t=y.user)||void 0===t?void 0:t.id)!==h&&g.push({customType:i.L.date,date:y.created_at,id:s(y.created_at),unread:m})),a&&(0===v||b!==w||l&&"deleted"===(null===_||void 0===_?void 0:_.type)&&r!==b)&&(null===(n=null===g||void 0===g?void 0:g[g.length-1])||void 0===n?void 0:n.customType)!==i.L.date?(r=b,g.push({customType:i.L.date,date:y.created_at,id:s(y.created_at)},y)):g.push(y)}}return f&&!p&&f(void 0),g},s=function(e){var t;try{t=e?e instanceof Date?e.toISOString():e:(0,r.Z)()}catch(n){t=(0,r.Z)()}return i.L.date+"-"+t},l=function(e){for(var t=e.length-1;t>0;t-=1)if("received"===e[t].status)return e[t].id;return null},u=function(e,t,n){void 0===t&&(t={});var r={};return Object.values(t).forEach((function(t){var i;t.last_read&&(e.forEach((function(e){e.updated_at&&e.updated_at<t.last_read&&(i=e.id,n&&(r[i]||(r[i]=[]),r[i].push(t.user)))})),i&&!n&&(r[i]||(r[i]=[]),r[i].push(t.user)))})),r},c=function(e,t){var n=e,r={customType:i.L.intro};if(!t)return n.unshift(r),n;if(!n.length)return n.unshift(r),n;for(var a=0;a<e.length;a+=1){var s=e[a],l=s.created_at&&(0,o.J_)(s.created_at)?s.created_at.getTime():null,u=e[a+1],c=u.created_at&&(0,o.J_)(u.created_at)?u.created_at.getTime():null;if(l&&l<t){if(!(c&&c<t))return n.splice(a+1,0,r),n;if(e[a+1]&&e[a+1].customType===i.L.date)continue;if(!c)return n.push(r),n}}return n},d=function(e,t,n,r){var o,a,s,l,u,c,d;if(e.customType===i.L.date)return"";if(e.customType===i.L.intro)return"";if(r||0!==(null===(o=e.attachments)||void 0===o?void 0:o.length))return"single";var f=!t||t.customType===i.L.intro||t.customType===i.L.date||"system"===t.type||0!==(null===(a=t.attachments)||void 0===a?void 0:a.length)||(null===(s=e.user)||void 0===s?void 0:s.id)!==(null===(l=t.user)||void 0===l?void 0:l.id)||"error"===t.type||t.deleted_at,h=!n||n.customType===i.L.date||"system"===n.type||n.customType===i.L.intro||0!==(null===(u=n.attachments)||void 0===u?void 0:u.length)||(null===(c=e.user)||void 0===c?void 0:c.id)!==(null===(d=n.user)||void 0===d?void 0:d.id)||"error"===n.type||n.deleted_at;return f||h?h?f||e.deleted_at||"error"===e.type?"single":"bottom":f?"top":"":e.deleted_at||"error"===e.type?"single":"middle"}},34289:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var r=n(67294),i=n(13943),o=n(35676),a=n(40239),s=n(28292),l=n(12239),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=r.forwardRef((function(e,t){var n,c=e.additionalEmojiProps,d=void 0===c?{}:c,f=e.Avatar,h=e.detailedView,m=void 0===h||h,p=e.handleReaction,g=e.latest_reactions,v=e.reaction_counts,y=e.reactionOptions,b=e.reverse,_=void 0!==b&&b,w=(0,a.yM)("ReactionSelector").Avatar,E=(0,s.uL)("ReactionSelector"),x=E.Emoji,k=E.emojiConfig,C=(0,l.fr)("ReactionSelector"),S=C.handleReaction,T=C.message,M=k||{},I=M.defaultMinimalEmojis,O=M.emojiData,R=M.emojiSetDef,N=f||w||i.q,z=p||S,L=g||(null===T||void 0===T?void 0:T.latest_reactions)||[],A=v||(null===T||void 0===T?void 0:T.reaction_counts)||{},F=y||I,P=!!(null===y||void 0===y?void 0:y.length),j=(0,r.useMemo)((function(){return P?O:(0,o.Le)(O)}),[O,P]),D=(0,r.useState)(null),B=D[0],U=D[1],H=(0,r.useState)(null),W=H[0],q=H[1],G=(0,r.useRef)(null),Z=(0,r.useRef)(null),V=(0,r.useCallback)((function(e,t){G.current=e.target,U(t)}),[]),K=(0,r.useCallback)((function(){U(null),q(null)}),[]);(0,r.useEffect)((function(){var e,n,r;if(B){var i=null===(e=Z.current)||void 0===e?void 0:e.getBoundingClientRect(),o=null===(n=G.current)||void 0===n?void 0:n.getBoundingClientRect(),a=function(e){return!!e&&void 0!==e.current}(t)?null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect():null;if(!i||!o||!a)return;var s=i.width===a.width||i.x<a.x?0:o.left+o.width/2-a.left-i.width/2,l=o.x-i.x+o.width/2-s;q({arrow:l,tooltip:s})}}),[B,t]);var $;return r.createElement("div",{className:"str-chat__reaction-selector "+(_?"str-chat__reaction-selector--reverse":""),"data-testid":"reaction-selector",ref:t},!!B&&m&&r.createElement("div",{className:"str-chat__reaction-selector-tooltip",ref:Z,style:{left:null===W||void 0===W?void 0:W.tooltip,visibility:W?"visible":"hidden"}},r.createElement("div",{className:"arrow",style:{left:null===W||void 0===W?void 0:W.arrow}}),null===($=B,n=L.map((function(e){var t,n;return e.type===$?(null===(t=e.user)||void 0===t?void 0:t.name)||(null===(n=e.user)||void 0===n?void 0:n.id):null})).filter(Boolean))||void 0===n?void 0:n.map((function(e,t,n){return r.createElement("span",{className:"latest-user-username",key:"key-"+t+"-"+e},e+(t<n.length-1?", ":""))}))),r.createElement("ul",{className:"str-chat__message-reactions-list"},F.map((function(e){var t=function(e){var t;return(null===(t=L.find((function(t){return t.type===e&&!!t.user})))||void 0===t?void 0:t.user)||void 0}(e.id),n=A&&A[e.id];return r.createElement("li",{key:"item-"+e.id},r.createElement("button",{"aria-label":"Select Reaction: "+e.name,className:"str-chat__message-reactions-list-item","data-text":e.id,onClick:function(t){return z(e.id,t)}},!!n&&m&&r.createElement(r.Fragment,null,r.createElement("div",{className:"latest-user",onClick:K,onMouseEnter:function(t){return V(t,e.id)},onMouseLeave:K},t?r.createElement(N,{image:t.image,name:t.name,size:20,user:t}):r.createElement("div",{className:"latest-user-not-found"}))),r.createElement(r.Suspense,{fallback:null},r.createElement(x,u({data:j,emoji:e,size:20},P?d:R))),Boolean(n)&&m&&r.createElement("span",{className:"str-chat__message-reactions-list-item__count"},n||"")))}))))})),d=r.memo(c)},53721:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(67294),i=n(35676),o=n(28292),a=n(12239),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=r.memo((function(e){var t=e.additionalEmojiProps,n=void 0===t?{}:t,l=e.handleReaction,u=e.reaction_counts,c=e.reactionOptions,d=e.reactions,f=(0,o.uL)("SimpleReactionsList"),h=f.Emoji,m=f.emojiConfig,p=(0,a.fr)("SimpleReactionsList"),g=p.handleReaction,v=p.message,y=m||{},b=y.defaultMinimalEmojis,_=y.emojiData,w=y.emojiSetDef,E=(0,r.useState)(void 0),x=E[0],k=E[1],C=l||g,S=d||v.latest_reactions||[],T=u||v.reaction_counts||{},M=c||b,I=!!(null===c||void 0===c?void 0:c.length),O=(0,r.useMemo)((function(){return I?_:(0,i.Le)(_)}),[_,I]);if(!S.length)return null;var R=function(){var e=[];return S.forEach((function(t){var n=t.type;-1===e.indexOf(n)&&e.push(n)})),e}(),N=function(){var e={};return M.forEach((function(t){var n=t.id;return e[n]=!0})),e}();return R.some((function(e){return N[e]}))?r.createElement("ul",{className:"str-chat__simple-reactions-list","data-testid":"simple-reaction-list",onMouseLeave:function(){return k(void 0)}},R.map((function(e,t){var i,o,a=(o=e,M.find((function(e){return e.id===o})));return a?r.createElement("li",{className:"str-chat__simple-reactions-list-item",key:a.id+"-"+t,onClick:function(t){return C(e,t)},onKeyPress:function(t){return C(e,t)}},r.createElement("span",{onMouseEnter:function(){return k(e)}},r.createElement(r.Suspense,{fallback:null},r.createElement(h,s({data:O,emoji:a,size:13},I?n:w))),"\xa0"),x===a.id&&r.createElement("div",{className:"str-chat__simple-reactions-list-tooltip"},r.createElement("div",{className:"arrow"}),null===(i=function(e){return S.map((function(t){var n,r;return t.type===e?(null===(n=t.user)||void 0===n?void 0:n.name)||(null===(r=t.user)||void 0===r?void 0:r.id):null})).filter(Boolean)}(x))||void 0===i?void 0:i.join(", "))):null})),r.createElement("li",{className:"str-chat__simple-reactions-list-item--last-number"},Object.values(T).reduce((function(e,t){return e+t}),0))):null}))},84310:function(e,t,n){"use strict";n.d(t,{j:function(){return ie}});var r=n(67294),i=n(83964),o=n(25531),a=n(8336),s=n(73082),l=n(31073),u=n(52127),c=n(13943),d=n(19530),f=n(5254),h=n(10997),m=n(83156),p=n(40239),g=n(12239),v=n(21681),y=n(42613),b=function(e,t){return n=function(e){var t=e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0);return Math.abs(t)/Math.pow(10,Math.ceil(Math.log10(Math.abs(t)+1)))}(t),r=e.includes("dark"),"hsl("+137.508*n+","+(r?"50%":"85%")+", "+(r?"75%":"55%")+")";var n,r},_=r.memo((function(e){var t,n,_,w,E=e.groupedByUser,x=e.message,k=(0,m.mx)("FixedHeightMessage").theme,C=(0,g.fr)("FixedHeightMessage"),S=C.groupedByUser,T=C.message,M=(0,p.yM)("FixedHeightMessage").MessageDeleted,I=void 0===M?s.c:M,O=(0,v.Ht)("FixedHeightMessage").userLanguage,R=void 0!==E?E:S,N=x||T,z=(0,i.$)(N),L=(0,o.t)(N),A=(0,a.j)(N),F=(null===(t=null===N||void 0===N?void 0:N.i18n)||void 0===t?void 0:t[O+"_text"])||(null===N||void 0===N?void 0:N.text),P=(0,r.useMemo)((function(){return(0,y.IY)(F,N.mentioned_users)}),[N.mentioned_users,F]),j=(null===(n=N.user)||void 0===n?void 0:n.id)||"",D=(0,r.useMemo)((function(){return b(k,j)}),[j,k]),B=(0,r.useCallback)((function(){return(0,u.oT)(["delete"],{canDelete:A.canDelete})}),[A]),U=null===(_=null===N||void 0===N?void 0:N.attachments)||void 0===_?void 0:_.filter((function(e){return"image"===e.type}));return r.createElement("div",{className:"str-chat__virtual-message__wrapper "+(A.isMyMessage?"str-chat__virtual-message__wrapper--me":"")+" "+(R?"str-chat__virtual-message__wrapper--group":""),key:N.id},N.user&&r.createElement(c.q,{image:N.user.image,name:N.user.name||N.user.id,shape:"rounded",size:38,user:N.user}),r.createElement("div",{className:"str-chat__virtual-message__content"},r.createElement("div",{className:"str-chat__virtual-message__meta"},r.createElement("div",{className:"str-chat__virtual-message__author",style:{color:D}},r.createElement("strong",null,(null===(w=N.user)||void 0===w?void 0:w.name)||"unknown"))),N.deleted_at||"deleted"===N.type?r.createElement(I,{message:N}):r.createElement(r.Fragment,null,U&&r.createElement(d.r,{images:U}),r.createElement("div",{className:"str-chat__virtual-message__text","data-testid":"msg-text"},P,N.mml&&r.createElement(h.v,{actionHandler:z,align:"left",source:N.mml}),r.createElement("div",{className:"str-chat__virtual-message__data"},r.createElement(f.P,{customWrapperClass:"str-chat__virtual-message__actions",getMessageActions:B,handleDelete:L,message:N,mine:function(){return A.isMyMessage}}),r.createElement("span",{className:"str-chat__virtual-message__date"},r.createElement(l.ik,{customClass:"str-chat__message-simple-timestamp",message:N})))))))})),w=n(53455),E=n(24035),x=n(17157),k=n(20724),C=n(96808),S=n(45291),T=n(69119),M=n(35837),I=n(19382),O=n(37495),R=n(87029),N=n(21707),z=n(97274),L=function(){var e=(0,R.JN)("MessageInputSmall"),t=e.acceptedFiles,n=e.multipleUploads,i=e.quotedMessage,o=(0,O.uz)("MessageInputSmall").setQuotedMessage,a=(0,v.Ht)("MessageInputSmall").t,s=(0,m.mx)("MessageInputSmall").channel,l=(0,N.Nc)("MessageInputSmall"),u=l.closeEmojiPicker,c=l.cooldownRemaining,d=l.emojiPickerIsOpen,f=l.handleSubmit,h=l.isUploadEnabled,g=l.maxFilesLeft,y=l.numberOfUploads,b=l.openEmojiPicker,_=l.setCooldownRemaining,w=l.uploadNewFiles,E=(0,p.yM)("MessageInputSmall"),L=E.CooldownTimer,A=void 0===L?C.b:L,F=E.EmojiIcon,P=void 0===F?S.Ai:F,j=E.FileUploadIcon,D=void 0===j?S.hi:j,B=E.SendButton,U=void 0===B?S.c7:B,H=E.QuotedMessagePreview,W=void 0===H?z.b:H;return(0,r.useEffect)((function(){var e=function(e){var t;i&&(null===(t=e.message)||void 0===t?void 0:t.id)===i.id&&("message.deleted"!==e.type?o(e.message):o(void 0))};return null===s||void 0===s||s.on("message.deleted",e),null===s||void 0===s||s.on("message.updated",e),function(){null===s||void 0===s||s.off("message.deleted",e),null===s||void 0===s||s.off("message.updated",e)}}),[s,i]),r.createElement("div",{className:"str-chat__small-message-input__wrapper"},r.createElement(x.vR,{accept:t,disabled:!h||0===g||!!c,handleFiles:w,maxNumberOfFiles:g,multiple:n},r.createElement("div",{className:"str-chat__small-message-input "+(U?"str-chat__small-message-input--send-button-active":"")+" "+(i&&i.parent_id?"str-chat__input-flat-quoted":"")+" "+(y?"str-chat__small-message-input-has-attachments":"")+" "},i&&i.parent_id&&r.createElement(W,{quotedMessage:i}),h&&r.createElement(T._,null),r.createElement("div",{className:"str-chat__small-message-input--textarea-wrapper"},r.createElement(M.T,null),c?r.createElement("div",{className:"str-chat__input-small-cooldown"},r.createElement(A,{cooldownInterval:c,setCooldownRemaining:_})):r.createElement(r.Fragment,null,h&&r.createElement("div",{className:"str-chat__fileupload-wrapper","data-testid":"fileinput"},r.createElement(I.u,null,a(g?"Attach files":"You've reached the maximum number of files")),r.createElement(x.KH,{accepts:t,disabled:0===g,handleFiles:w,multiple:n},r.createElement("span",{className:"str-chat__small-message-input-fileupload"},r.createElement(D,null)))),r.createElement("div",{className:"str-chat__emojiselect-wrapper"},r.createElement(I.u,null,a(d?"Close emoji picker":"Open emoji picker")),r.createElement("button",{"aria-label":"Emoji picker",className:"str-chat__small-message-input-emojiselect",onClick:d?u:b},r.createElement(P,null)))),r.createElement(k.h,{small:!0})),!c&&r.createElement(U,{sendMessage:f}))))},A=n(78700),F=n(20348),P=function(e){var t=e.message;return r.createElement("div",{className:"giphy-preview-message"},r.createElement(w.v,{message:t}))};var j=n(54907),D=n(97150),B=n(25297),U=n(96649),H=n(96660),W=n(7437),q=n(53207),G=n(44498),Z=n(58645),V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Y=Math.pow(10,7);function Q(e){"ResizeObserver loop completed with undelivered notifications."!==e.message&&"ResizeObserver loop limit exceeded"!==e.message||e.stopImmediatePropagation()}function J(e){return e.getBoundingClientRect().height}function X(e,t){return e.findIndex((function(e){return e.id===t}))}function ee(e,t){if(t){var n=X(e,t);if(-1!==n)return{align:"center",index:n}}return e.length-1}var te=function(e){var t=e.additionalVirtuosoProps,n=e.channel,i=e.closeReactionSelectorOnClick,o=e.customMessageRenderer,a=e.defaultItemHeight,s=e.disableDateSeparator,l=void 0===s||s,u=e.hasMore,c=e.hasMoreNewer,d=e.hideDeletedMessages,f=void 0!==d&&d,h=e.hideNewMessageSeparator,g=void 0!==h&&h,y=e.highlightedMessageId,b=e.jumpToLatestMessage,_=e.loadingMore,E=e.loadMore,x=e.loadMoreNewer,k=e.Message,C=e.messageLimit,S=void 0===C?100:C,T=e.messages,M=e.notifications,I=e.overscan,O=void 0===I?0:I,R=e.scrollSeekPlaceHolder,N=e.scrollToLatestMessageOnFocus,z=void 0!==N&&N,L=e.separateGiphyPreview,A=void 0!==L&&L,te=e.shouldGroupByUser,ne=void 0!==te&&te,re=e.stickToBottomScrollBehavior,ie=void 0===re?"smooth":re,oe=e.suppressAutoscroll;(0,r.useEffect)((function(){return window.addEventListener("error",Q),function(){window.removeEventListener("error",Q)}}),[]);var ae=(0,p.yM)("VirtualizedMessageList"),se=ae.DateSeparator,le=void 0===se?H.Z:se,ue=ae.EmptyStateIndicator,ce=void 0===ue?W.D:ue,de=ae.GiphyPreviewMessage,fe=void 0===de?P:de,he=ae.LoadingIndicator,me=void 0===he?G.T:he,pe=ae.MessageListNotifications,ge=void 0===pe?D.T:pe,ve=ae.MessageNotification,ye=void 0===ve?j.f:ve,be=ae.MessageSystem,_e=void 0===be?q.B:be,we=ae.TypingIndicator,Ee=void 0===we?null:we,xe=ae.VirtualMessage,ke=void 0===xe?Z.u:xe,Ce=(0,m.mx)("VirtualizedMessageList"),Se=Ce.client,Te=Ce.customClasses,Me=(0,r.useMemo)((function(){var e;return null===(e=n.lastRead)||void 0===e?void 0:e.call(n)}),[n]),Ie=k||ke,Oe=function(e){var t=(0,r.useState)(),n=t[0],i=t[1],o=(0,m.mx)("useGiphyPreview").client;return(0,r.useEffect)((function(){var t=function(e){var t=e.message,n=e.user;"giphy"===(null===t||void 0===t?void 0:t.command)&&(null===n||void 0===n?void 0:n.id)===o.userID&&i(void 0)};return e&&o.on("message.new",t),function(){return o.off("message.new",t)}}),[e]),{giphyPreviewMessage:n,setGiphyPreviewMessage:i}}(A),Re=Oe.giphyPreviewMessage,Ne=Oe.setGiphyPreviewMessage,ze=(0,r.useMemo)((function(){return"undefined"===typeof T?[]:l&&!f&&g&&!A?T:(0,B.Ej)({enableDateSeparator:!l,hideDeletedMessages:f,hideNewMessageSeparator:g,lastRead:Me,messages:T,setGiphyPreviewMessage:Ne,userId:Se.userID||""})}),[l,f,g,Me,T,null===T||void 0===T?void 0:T.length,Se.userID]),Le=(0,r.useRef)(null),Ae=function(e,t,n){var i=(0,r.useState)(!1),o=i[0],a=i[1],s=(0,r.useRef)(!1),l=(0,r.useRef)(""),u=(0,r.useRef)(!1);return(0,r.useEffect)((function(){var r;if(n)a(!0);else if(null===e||void 0===e?void 0:e.length){var i=e[e.length-1],o=l.current;l.current=i.id||"",i.id!==o&&(u.current||((null===(r=i.user)||void 0===r?void 0:r.id)!==t&&s.current&&a(!0),s.current=!0))}}),[t,e,n]),{atBottom:u,newMessagesNotification:o,setNewMessagesNotification:a}}(ze,Se.userID,c),Fe=Ae.atBottom,Pe=Ae.newMessagesNotification,je=Ae.setNewMessagesNotification,De=(0,r.useCallback)((function(){return K(void 0,void 0,void 0,(function(){return $(this,(function(e){switch(e.label){case 0:return c?[4,b()]:[3,2];case 1:return e.sent(),[2];case 2:return Le.current&&Le.current.scrollToIndex(ze.length-1),je(!1),[2]}}))}))}),[Le,ze,je,ze.length,c,b]),Be=r.useState(!1),Ue=Be[0],He=Be[1],We=(0,r.useCallback)((function(){He(!1)}),[]);(0,r.useEffect)((function(){He(!0)}),[T]);var qe=(0,r.useCallback)((function(e){z&&e.target===window&&Ue&&setTimeout(De,100)}),[z,De,Ue]);(0,r.useEffect)((function(){return"undefined"!==typeof window&&(window.addEventListener("focus",qe),window.addEventListener("blur",We)),function(){window.removeEventListener("focus",qe),window.removeEventListener("blur",We)}}),[qe]);var Ge=function(e){var t,n=null===(t=null===e||void 0===e?void 0:e[0])||void 0===t?void 0:t.id,i=(0,r.useRef)(n),o=(0,r.useRef)(n),a=(0,r.useRef)(0);return(0,r.useMemo)((function(){if(!e||!e.length)return 0;if(n===o.current)return a.current;i.current||(i.current=n),o.current=n;for(var t=a.current;t<e.length;t+=1)if(e[t].id===i.current)return a.current=t,t;return i.current=n,0}),[e,null===e||void 0===e?void 0:e.length])}(ze),Ze=(0,r.useState)(+new Date),Ve=Ze[0],Ke=Ze[1],$e=(0,r.useRef)();(0,r.useEffect)((function(){var e;T&&T.find((function(e){return e.id===$e.current}))||Ke(+new Date),$e.current=null===(e=null===T||void 0===T?void 0:T[0])||void 0===e?void 0:e.id}),[T]);var Ye=function(e,t){var n=(0,r.useRef)(""),i=(0,r.useRef)(!1);function o(){var r;if(e&&e.length>0){var i=e[e.length-1];if((null===(r=i.user)||void 0===r?void 0:r.id)===t&&n.current!==i.id)return n.current=i.id,!0}return!1}return(0,r.useEffect)((function(){e&&e.length&&!i.current&&(i.current=!0,o())}),[e,null===e||void 0===e?void 0:e.length]),o}(ze,Se.userID),Qe=(0,r.useCallback)((function(t,n){var a,s,l,u,c,d,f,h,m=n+Ge-Y;if(o)return o(t,m);var p=t[m];if(p.customType===U.L.date&&p.date&&(0,v.J_)(p.date))return r.createElement(le,{date:p.date,unread:p.unread});if(!p)return r.createElement("div",{style:{height:"1px"}});if("system"===p.type)return r.createElement(_e,{message:p});var g=ne&&m>0&&(null===(a=p.user)||void 0===a?void 0:a.id)===(null===(s=t[m-1].user)||void 0===s?void 0:s.id),y=ne&&(null===(l=p.user)||void 0===l?void 0:l.id)!==(null===(c=null===(u=t[m-1])||void 0===u?void 0:u.user)||void 0===c?void 0:c.id),b=ne&&(null===(d=p.user)||void 0===d?void 0:d.id)!==(null===(h=null===(f=t[m+1])||void 0===f?void 0:f.user)||void 0===h?void 0:h.id);return r.createElement(w.v,{closeReactionSelectorOnClick:i,customMessageActions:e.customMessageActions,endOfGroup:b,firstOfGroup:y,groupedByUser:g,message:p,Message:Ie,messageActions:e.messageActions})}),[o,ne,Ge]),Je=(0,r.useMemo)((function(){var e=(null===Te||void 0===Te?void 0:Te.virtualMessage)||"str-chat__virtual-list-message-wrapper";return{EmptyPlaceholder:function(){return r.createElement(r.Fragment,null,ce&&r.createElement(ce,{listType:"message"}))},Footer:function(){return Ee?r.createElement(Ee,{avatarSize:24}):r.createElement(r.Fragment,null)},Header:function(){return _?r.createElement("div",{className:"str-chat__virtual-list__loading"},r.createElement(me,{size:20})):r.createElement(r.Fragment,null)},Item:function(t){return r.createElement("div",V({},t,{className:e}))}}}),[_]);return(0,r.useEffect)((function(){var e;if(y){var t=X(ze,y);-1!==t&&(null===(e=Le.current)||void 0===e||e.scrollToIndex({align:"center",index:t}))}}),[y]),ze?r.createElement(r.Fragment,null,r.createElement("div",{className:(null===Te||void 0===Te?void 0:Te.virtualizedMessageList)||"str-chat__virtual-list"},r.createElement(F.OO,V({atBottomStateChange:function(e){Fe.current=e,e&&Pe&&je(!1)},components:Je,endReached:function(){c&&x&&x(S)},firstItemIndex:Y-Ge,followOutput:function(e){return!c&&!oe&&(Ye()?e?ie:"auto":!!e&&ie)},increaseViewportBy:{bottom:200,top:0},initialTopMostItemIndex:ee(ze,y),itemContent:function(e){return Qe(ze,e)},itemSize:J,key:Ve,overscan:O,ref:Le,startReached:function(){u&&E&&E(S)},style:{overflowX:"hidden"},totalCount:ze.length},t,R?{scrollSeek:R}:{},a?{defaultItemHeight:a}:{}))),r.createElement(ge,{hasNewMessages:Pe,isNotAtLatestMessageSet:c,MessageNotification:ye,notifications:M,scrollToBottom:De}),Re&&r.createElement(fe,{message:Re})):null};function ne(e){var t=(0,O.uz)("VirtualizedMessageList"),n=t.jumpToLatestMessage,i=t.loadMore,o=t.loadMoreNewer,a=(0,R.JN)("VirtualizedMessageList"),s=a.channel,l=a.hasMore,u=a.hasMoreNewer,c=a.highlightedMessageId,d=a.loadingMore,f=a.loadingMoreNewer,h=a.messages,m=a.notifications,p=a.suppressAutoscroll,g=e.messages||h;return r.createElement(te,V({channel:s,hasMore:!!l,hasMoreNewer:!!u,highlightedMessageId:c,jumpToLatestMessage:n,loadingMore:!!d,loadingMoreNewer:!!f,loadMore:i,loadMoreNewer:o,messages:g,notifications:m,suppressAutoscroll:p},e))}var re=function(){return(re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ie=function(e){var t=(0,R.JN)("Thread"),n=t.channel,i=t.channelConfig,o=t.thread;return o&&!1!==(null===i||void 0===i?void 0:i.replies)?r.createElement(se,re({},e,{key:"thread-"+o.id+"-"+(null===n||void 0===n?void 0:n.cid)})):null},oe=function(e){var t=e.closeThread,n=e.thread,i=(0,v.Ht)("Thread").t;return r.createElement("div",{className:"str-chat__thread-header"},r.createElement("div",{className:"str-chat__thread-header-details"},r.createElement("strong",null,i("Thread")),r.createElement("small",null,n.reply_count?i("replyCount",{count:n.reply_count}):"")),r.createElement("button",{"aria-label":"Close thread",className:"str-chat__square-button","data-testid":"close-button",onClick:function(e){return t(e)}},r.createElement("svg",{height:"10",width:"10",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z",fillRule:"evenodd"}))))},ae=function(){var e=(0,v.Ht)("Thread").t;return r.createElement("div",{className:"str-chat__thread-start"},e("Start of a new thread"))},se=function(e){var t=e.additionalMessageInputProps,n=e.additionalMessageListProps,i=e.additionalParentMessageProps,o=e.additionalVirtualizedMessageListProps,a=e.autoFocus,s=void 0===a||a,l=e.enableDateSeparator,u=void 0!==l&&l,c=e.fullWidth,d=void 0!==c&&c,f=e.Input,h=e.Message,g=e.virtualized,v=(0,R.JN)("Thread"),y=v.thread,b=v.threadHasMore,x=v.threadLoadingMore,k=v.threadMessages,C=(0,O.uz)("Thread"),S=C.closeThread,T=C.loadMoreThread,M=(0,m.mx)("Thread").customClasses,I=(0,p.yM)("Thread"),N=I.ThreadInput,z=I.Message,F=I.ThreadHeader,P=void 0===F?oe:F,j=I.ThreadStart,D=void 0===j?ae:j,B=I.VirtualMessage,U=void 0===B?_:B,H=(0,r.useRef)(null),W=f||(null===t||void 0===t?void 0:t.Input)||N||L,q=h||(null===n||void 0===n?void 0:n.Message),G=g?U:z,Z=g?ne:A.r;if((0,r.useEffect)((function(){(null===y||void 0===y?void 0:y.id)&&(null===y||void 0===y?void 0:y.reply_count)&&T()}),[]),(0,r.useEffect)((function(){if(H.current&&(null===k||void 0===k?void 0:k.length)){var e=H.current,t=e.clientHeight,n=e.scrollHeight;t+e.scrollTop!==n&&(H.current.scrollTop=n-t)}}),[null===k||void 0===k?void 0:k.length]),!y)return null;var V=(null===M||void 0===M?void 0:M.thread)||"str-chat__thread";return r.createElement("div",{className:V+" "+(d?"str-chat__thread--full":"")},r.createElement(P,{closeThread:S,thread:y}),r.createElement("div",{className:"str-chat__thread-list",ref:H},r.createElement(w.v,re({initialMessage:!0,message:y,Message:q||G,threadList:!0},i)),r.createElement(D,null),r.createElement(Z,re({disableDateSeparator:!u,hasMore:b,loadingMore:x,loadMore:T,Message:q||G,messages:k||[],threadList:!0},g?o:n))),r.createElement(E.R,re({focus:s,Input:W,parent:y,publishTypingEvent:!1},t)))}},19382:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r=n(67294),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a=function(e){var t=e.children,n=o(e,["children"]);return r.createElement("div",i({className:"str-chat__tooltip"},n),t)}},9509:function(e,t,n){"use strict";n.d(t,{E:function(){return o}});var r=n(67294),i=n(13943),o=r.memo((function(e){var t=e.Avatar,n=void 0===t?i.q:t,o=e.entity,a=Object.keys(o).length,s=null===o||void 0===o?void 0:o.itemNameParts;return r.createElement("div",{className:"str-chat__user-item"},r.createElement(n,{image:o.image,name:o.name||o.id,size:20}),r.createElement("span",{className:"str-chat__user-item--name","data-testid":"user-item-name"},a?a&&s.parts.map((function(e,t){return e.toLowerCase()===s.match.toLowerCase()?r.createElement("span",{className:"str-chat__emoji-item--highlight",key:"part-"+t},e):r.createElement("span",{className:"str-chat__emoji-item--part",key:"part-"+t},e)})):null))}))},91351:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(67294),i=n(87029),o=r.memo((function(e){var t=e.children,n=e.hideOnThread,o=void 0!==n&&n,a=(0,i.JN)("Window").thread;return r.createElement("div",{className:"str-chat__main-panel   "+(o&&a?"str-chat__main-panel--hideOnThread":"")},t)}))},96649:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r={date:"message.date",intro:"channel.intro"}},28292:function(e,t,n){"use strict";n.d(t,{_V:function(){return c},uL:function(){return d}});var r=n(67294),i=n(27938),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=r.lazy((function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,n.e(58).then(n.bind(n,29058))];case 1:return[2,{default:e.sent().default}]}}))}))})),l=r.lazy((function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,n.e(737).then(n.bind(n,7737))];case 1:return[2,{default:e.sent().default}]}}))}))})),u=r.createContext(void 0),c=function(e){var t=e.children,n=e.value,o=n.Emoji,a=void 0===o?s:o,c=n.emojiConfig,d=n.EmojiIndex,f=void 0===d?i.default:d,h=n.EmojiPicker,m={Emoji:a,emojiConfig:c,EmojiIndex:f,EmojiPicker:void 0===h?l:h};return r.createElement(u.Provider,{value:m},t)},d=function(e){var t=(0,r.useContext)(u);return t||(console.warn("The useEmojiContext hook was called outside of the EmojiContext provider. Make sure this hook is called within a child of the Channel component. The errored call is located in the "+e+" component."),{})}},21707:function(e,t,n){"use strict";n.d(t,{G6:function(){return o},Nc:function(){return a}});var r=n(67294),i=(0,r.createContext)(void 0),o=function(e){var t=e.children,n=e.value;return r.createElement(i.Provider,{value:n},t)},a=function(e){var t=(0,r.useContext)(i);return t||(console.warn("The useMessageInputContext hook was called outside of the MessageInputContext provider. Make sure this hook is called within the MessageInput's UI component. The errored call is located in the "+e+" component."),{})}},61687:function(e,t,n){"use strict";n.d(t,{ln:function(){return o},f5:function(){return a}});var r=n(67294),i=r.createContext(void 0),o=function(e){var t=e.children,n=e.value;return r.createElement(i.Provider,{value:n},t)},a=function(e){var t=(0,r.useContext)(i);return t||(console.warn("The useTypingContext hook was called outside of the TypingContext provider. Make sure this hook is called within a child of the Channel component. The errored call is located in the "+e+" component."),{})}},16496:function(e){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!==typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var u=l.style,c=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",d||(u.wordWrap="break-word"),u.position="absolute",a||(u.visibility="hidden"),t.forEach((function(e){d&&"lineHeight"===e?u.lineHeight=c.height:u[e]=c[e]})),r?e.scrollHeight>parseInt(c.height)&&(u.overflowY="scroll"):u.overflow="hidden",l.textContent=e.value.substring(0,i),d&&(l.textContent=l.textContent.replace(/\s/g,"\xa0"));var f=document.createElement("span");f.textContent=e.value.substring(i)||".",l.appendChild(f);var h={top:f.offsetTop+parseInt(c.borderTopWidth),left:f.offsetLeft+parseInt(c.borderLeftWidth),height:parseInt(c.lineHeight)};return a?f.style.backgroundColor="#aaa":document.body.removeChild(l),h}"undefined"!=typeof e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},50036:function(e,t){"use strict";function n(e,t){return Array(t+1).join(e)}var r=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function i(e){return l(e,r)}var o=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function a(e){return l(e,o)}var s=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function l(e,t){return t.indexOf(e.nodeName)>=0}function u(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var c={};function d(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function f(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function h(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(m(i,t,n))return i}}function m(e,t,n){var r=e.filter;if("string"===typeof r){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!==typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(e,t,n))return!0}}function p(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function g(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}c.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},c.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+"\n"}},c.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,r){var i=Number(t.nodeName.charAt(1));return"setext"===r.headingStyle&&i<3?"\n\n"+e+"\n"+n(1===i?"=":"-",e.length)+"\n\n":"\n\n"+n("#",i)+" "+e+"\n\n"}},c.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},c.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return"LI"===n.nodeName&&n.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},c.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=t.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),a=Array.prototype.indexOf.call(i.children,t);r=(o?Number(o)+a:a+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},c.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},c.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,r){for(var i,o=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,s=r.fence.charAt(0),l=3,u=new RegExp("^"+s+"{3,}","gm");i=u.exec(a);)i[0].length>=l&&(l=i[0].length+1);var c=n(s,l);return"\n\n"+c+o+"\n"+a.replace(/\n$/,"")+"\n"+c+"\n\n"}},c.horizontalRule={filter:"hr",replacement:function(e,t,n){return"\n\n"+n.hr+"\n\n"}},c.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),r=d(t.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+e+"]("+n+r+")"}},c.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,n){var r,i,o=t.getAttribute("href"),a=d(t.getAttribute("title"));switch(a&&(a=' "'+a+'"'),n.linkReferenceStyle){case"collapsed":r="["+e+"][]",i="["+e+"]: "+o+a;break;case"shortcut":r="["+e+"]",i="["+e+"]: "+o+a;break;default:var s=this.references.length+1;r="["+e+"]["+s+"]",i="["+s+"]: "+o+a}return this.references.push(i),r},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},c.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},c.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},c.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];-1!==r.indexOf(n);)n+="`";return n+t+e+t+n}},c.image={filter:"img",replacement:function(e,t){var n=d(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=d(t.getAttribute("title"));return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},f.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=h(this.array,e,this.options))||(t=h(this._keep,e,this.options))||(t=h(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var v="undefined"!==typeof window?window:{};var y,b=function(){var e=v.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(n){}return t}()?v.DOMParser:function(){var e=function(){};return!function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){window.ActiveXObject&&(e=!0)}return e}()?e.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t}:e.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t},e}();function _(e,t){var n;"string"===typeof e?n=(y=y||new b).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):n=e.cloneNode(!0);return function(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!i(t)){for(var o=null,a=!1,s=null,l=g(s,t,i);l!==t;){if(3===l.nodeType||4===l.nodeType){var u=l.data.replace(/[ \r\n\t]+/g," ");if(o&&!/ $/.test(o.data)||a||" "!==u[0]||(u=u.substr(1)),!u){l=p(l);continue}l.data=u,o=l}else{if(1!==l.nodeType){l=p(l);continue}n(l)||"BR"===l.nodeName?(o&&(o.data=o.data.replace(/ $/,"")),o=null,a=!1):r(l)||i(l)?(o=null,a=!0):o&&(a=!1)}var c=g(s,l,i);s=l,l=c}o&&(o.data=o.data.replace(/ $/,""),o.data||p(o))}}({element:n,isBlock:i,isVoid:a,isPre:t.preformattedCode?w:null}),n}function w(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function E(e,t){return e.isBlock=i(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=function(e){return!a(e)&&!function(e){return l(e,s)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return u(e,o)}(e)&&!function(e){return u(e,s)}(e)}(e),e.flankingWhitespace=function(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=function(e){var t=e.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}(e.textContent);n.leadingAscii&&x("left",e,t)&&(n.leading=n.leadingNonAscii);n.trailingAscii&&x("right",e,t)&&(n.trailing=n.trailingNonAscii);return{leading:n.leading,trailing:n.trailing}}(e,t),e}function x(e,t,n){var r,o,a;return"left"===e?(r=t.previousSibling,o=/ $/):(r=t.nextSibling,o=/^ /),r&&(3===r.nodeType?a=o.test(r.nodeValue):n.preformattedCode&&"CODE"===r.nodeName?a=!1:1!==r.nodeType||i(r)||(a=o.test(r.textContent))),a}var k=Array.prototype.reduce,C=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function S(e){if(!(this instanceof S))return new S(e);var t={rules:c,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}({},t,e),this.rules=new f(this.options)}function T(e){var t=this;return k.call(e.childNodes,(function(e,n){var r="";return 3===(n=new E(n,t.options)).nodeType?r=n.isCode?n.nodeValue:t.escape(n.nodeValue):1===n.nodeType&&(r=I.call(t,n)),O(e,r)}),"")}function M(e){var t=this;return this.rules.forEach((function(n){"function"===typeof n.append&&(e=O(e,n.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function I(e){var t=this.rules.forNode(e),n=T.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function O(e,t){var n=function(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}(e),r=t.replace(/^\n*/,""),i=Math.max(e.length-n.length,t.length-r.length);return n+"\n\n".substring(0,i)+r}S.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"===typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=T.call(this,new _(e,this.options));return M.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!==typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return C.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}},t.Z=S},44586:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return d}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&a.test(e)},l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var d=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return c(r)}},20247:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=function e(){var t=[].slice.call(arguments),n=!1;"boolean"==typeof t[0]&&(n=t.shift());var r=t[0];if(o(r))throw new Error("extendee must be an object");for(var a=t.slice(1),s=a.length,l=0;l<s;l++){var u=a[l];for(var c in u)if(Object.prototype.hasOwnProperty.call(u,c)){var d=u[c];if(n&&i(d)){var f=Array.isArray(d)?[]:{};r[c]=e(!0,Object.prototype.hasOwnProperty.call(r,c)&&!o(r[c])?r[c]:f,d)}else r[c]=d}}return r};function i(e){return Array.isArray(e)||"[object Object]"=={}.toString.call(e)}function o(e){return!e||"object"!=typeof e&&"function"!=typeof e}function a(e){return e&&e.__esModule?e.default:e}class s{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};let n=this._callbacks[e];if(n)for(let r of n)r.apply(this,t);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+e,{args:t})),this}makeEvent(e,t){let n={bubbles:!0,cancelable:!0,detail:t};if("function"===typeof window.CustomEvent)return new CustomEvent(e,n);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r}off(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;let n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(let r=0;r<n.length;r++){if(n[r]===t){n.splice(r,1);break}}return this}}var l={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:(e,t)=>t(),chunksUploaded:function(e,t){t()},binaryBody:!1,fallback(){let e;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let n of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(n.className)){e=n,n.className="dz-message";break}e||(e=u.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));let t=e.getElementsByTagName("span")[0];return t&&(null!=t.textContent?t.textContent=this.options.dictFallbackMessage:null!=t.innerText&&(t.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(e,t,n,r){let i={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=i.srcWidth,n=i.srcHeight):null==t?t=n*o:null==n&&(n=t/o);let a=(t=Math.min(t,i.srcWidth))/(n=Math.min(n,i.srcHeight));if(i.srcWidth>t||i.srcHeight>n)if("crop"===r)o>a?(i.srcHeight=e.height,i.srcWidth=i.srcHeight*a):(i.srcWidth=e.width,i.srcHeight=i.srcWidth/a);else{if("contain"!==r)throw new Error(`Unknown resizeMethod '${r}'`);o>a?n=t/o:t=n*o}return i.srcX=(e.width-i.srcWidth)/2,i.srcY=(e.height-i.srcHeight)/2,i.trgWidth=t,i.trgHeight=n,i},transformFile(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:a('<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n'),drop(e){return this.element.classList.remove("dz-drag-hover")},dragstart(e){},dragend(e){return this.element.classList.remove("dz-drag-hover")},dragenter(e){return this.element.classList.add("dz-drag-hover")},dragover(e){return this.element.classList.add("dz-drag-hover")},dragleave(e){return this.element.classList.remove("dz-drag-hover")},paste(e){},reset(){return this.element.classList.remove("dz-started")},addedfile(e){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){for(var t of(e.previewElement=u.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),e.previewElement.querySelectorAll("[data-dz-name]")))t.textContent=e.name;for(t of e.previewElement.querySelectorAll("[data-dz-size]"))t.innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=u.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),e.previewElement.appendChild(e._removeLink));let n=t=>(t.preventDefault(),t.stopPropagation(),e.status===u.UPLOADING?u.confirm(this.options.dictCancelUploadConfirmation,(()=>this.removeFile(e))):this.options.dictRemoveFileConfirmation?u.confirm(this.options.dictRemoveFileConfirmation,(()=>this.removeFile(e))):this.removeFile(e));for(let t of e.previewElement.querySelectorAll("[data-dz-remove]"))t.addEventListener("click",n)}},removedfile(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(let n of e.previewElement.querySelectorAll("[data-dz-thumbnail]"))n.alt=e.name,n.src=t;return setTimeout((()=>e.previewElement.classList.add("dz-image-preview")),1)}},error(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!==typeof t&&t.error&&(t=t.error);for(let n of e.previewElement.querySelectorAll("[data-dz-errormessage]"))n.textContent=t}},errormultiple(){},processing(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(e,t,n){if(e.previewElement)for(let r of e.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===r.nodeName?r.value=t:r.style.width=`${t}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple(){},canceled(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple(){},complete(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};class u extends s{static initClass(){this.prototype.Emitter=s,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter((e=>e.accepted)).map((e=>e))}getRejectedFiles(){return this.files.filter((e=>!e.accepted)).map((e=>e))}getFilesWithStatus(e){return this.files.filter((t=>t.status===e)).map((e=>e))}getQueuedFiles(){return this.getFilesWithStatus(u.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(u.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(u.ADDED)}getActiveFiles(){return this.files.filter((e=>e.status===u.UPLOADING||e.status===u.QUEUED)).map((e=>e))}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(u.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let e=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",u.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",(()=>{let{files:t}=this.hiddenFileInput;if(t.length)for(let e of t)this.addFile(e);this.emit("addedfiles",t),e()}))};e()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(let t of this.events)this.on(t,this.options[t]);this.on("uploadprogress",(()=>this.updateTotalUploadProgress())),this.on("removedfile",(()=>this.updateTotalUploadProgress())),this.on("canceled",(e=>this.emit("complete",e))),this.on("complete",(e=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout((()=>this.emit("queuecomplete")),0)}));let e=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:e=>this.emit("dragstart",e),dragenter:t=>(e(t),this.emit("dragenter",t)),dragover:t=>{let n;try{n=t.dataTransfer.effectAllowed}catch(r){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",e(t),this.emit("dragover",t)},dragleave:e=>this.emit("dragleave",e),drop:t=>(e(t),this.drop(t)),dragend:e=>this.emit("dragend",e)}}],this.clickableElements.forEach((e=>this.listeners.push({element:e,events:{click:t=>((e!==this.element||t.target===this.element||u.elementInside(t.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}}))),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,u.instances.splice(u.instances.indexOf(this),1)}updateTotalUploadProgress(){let e,t=0,n=0;if(this.getActiveFiles().length){for(let e of this.getActiveFiles())t+=e.upload.bytesSent,n+=e.upload.total;e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}_getParamName(e){return"function"===typeof this.options.paramName?this.options.paramName(e):`${this.options.paramName}${this.options.uploadMultiple?`[${e}]`:""}`}_renameFile(e){return"function"!==typeof this.options.renameFile?e.name:this.options.renameFile(e)}getFallbackForm(){let e,t;if(e=this.getExistingFallback())return e;let n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+=`<p>${this.options.dictFallbackText}</p>`),n+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let r=u.createElement(n);return"FORM"!==this.element.tagName?(t=u.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),t.appendChild(r)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:r}getExistingFallback(){let e=function(e){for(let t of e)if(/(^| )fallback($| )/.test(t.className))return t};for(let n of["div","form"]){var t;if(t=e(this.element.getElementsByTagName(n)))return t}}setupEventListeners(){return this.listeners.map((e=>(()=>{let t=[];for(let n in e.events){let r=e.events[n];t.push(e.element.addEventListener(n,r,!1))}return t})()))}removeEventListeners(){return this.listeners.map((e=>(()=>{let t=[];for(let n in e.events){let r=e.events[n];t.push(e.element.removeEventListener(n,r,!1))}return t})()))}disable(){return this.clickableElements.forEach((e=>e.classList.remove("dz-clickable"))),this.removeEventListeners(),this.disabled=!0,this.files.map((e=>this.cancelUpload(e)))}enable(){return delete this.disabled,this.clickableElements.forEach((e=>e.classList.add("dz-clickable"))),this.setupEventListeners()}filesize(e){let t=0,n="b";if(e>0){let r=["tb","gb","mb","kb","b"];for(let i=0;i<r.length;i++){let o=r[i];if(e>=Math.pow(this.options.filesizeBase,4-i)/10){t=e/Math.pow(this.options.filesizeBase,4-i),n=o;break}}t=Math.round(10*t)/10}return`<strong>${t}</strong> ${this.options.dictFileSizeUnits[n]}`}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(e){if(!e.dataTransfer)return;this.emit("drop",e);let t=[];for(let n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){let{items:n}=e.dataTransfer;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}this.emit("addedfiles",t)}paste(e){if(null==(t=null!=e?e.clipboardData:void 0,n=e=>e.items,"undefined"!==typeof t&&null!==t?n(t):void 0))return;var t,n;this.emit("paste",e);let{items:r}=e.clipboardData;return r.length?this._addFilesFromItems(r):void 0}handleFiles(e){for(let t of e)this.addFile(t)}_addFilesFromItems(e){return(()=>{let t=[];for(let r of e){var n;null!=r.webkitGetAsEntry&&(n=r.webkitGetAsEntry())?n.isFile?t.push(this.addFile(r.getAsFile())):n.isDirectory?t.push(this._addFilesFromDirectory(n,n.name)):t.push(void 0):null!=r.getAsFile&&(null==r.kind||"file"===r.kind)?t.push(this.addFile(r.getAsFile())):t.push(void 0)}return t})()}_addFilesFromDirectory(e,t){let n=e.createReader(),r=e=>{return t=console,n="log",r=t=>t.log(e),"undefined"!==typeof t&&null!==t&&"function"===typeof t[n]?r(t,n):void 0;var t,n,r};var i=()=>n.readEntries((e=>{if(e.length>0){for(let n of e)n.isFile?n.file((e=>{if(!this.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=`${t}/${e.name}`,this.addFile(e)})):n.isDirectory&&this._addFilesFromDirectory(n,`${t}/${n.name}`);i()}return null}),r);return i()}accept(e,t){this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):u.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}addFile(e){e.upload={uuid:u.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=u.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(t=>{t?(e.accepted=!1,this._errorProcessing([e],t)):(e.accepted=!0,this.options.autoQueue&&this.enqueueFile(e)),this._updateMaxFilesReachedClass()}))}enqueueFiles(e){for(let t of e)this.enqueueFile(t);return null}enqueueFile(e){if(e.status!==u.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=u.QUEUED,this.options.autoProcessQueue)return setTimeout((()=>this.processQueue()),0)}_enqueueThumbnail(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(e),setTimeout((()=>this._processThumbnailQueue()),0)}_processThumbnailQueue(){if(this._processingThumbnail||0===this._thumbnailQueue.length)return;this._processingThumbnail=!0;let e=this._thumbnailQueue.shift();return this.createThumbnail(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(t=>(this.emit("thumbnail",e,t),this._processingThumbnail=!1,this._processThumbnailQueue())))}removeFile(e){if(e.status===u.UPLOADING&&this.cancelUpload(e),this.files=c(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}removeAllFiles(e){null==e&&(e=!1);for(let t of this.files.slice())(t.status!==u.UPLOADING||e)&&this.removeFile(t);return null}resizeImage(e,t,n,r,i){return this.createThumbnail(e,t,n,r,!0,((t,n)=>{if(null==n)return i(e);{let{resizeMimeType:t}=this.options;null==t&&(t=e.type);let r=n.toDataURL(t,this.options.resizeQuality);return"image/jpeg"!==t&&"image/jpg"!==t||(r=h.restore(e.dataURL,r)),i(u.dataURItoBlob(r))}}))}createThumbnail(e,t,n,r,i,o){let a=new FileReader;a.onload=()=>{e.dataURL=a.result,"image/svg+xml"!==e.type?this.createThumbnailFromUrl(e,t,n,r,i,o):null!=o&&o(a.result)},a.readAsDataURL(e)}displayExistingFile(e,t,n,r,i=!0){if(this.emit("addedfile",e),this.emit("complete",e),i){let i=t=>{this.emit("thumbnail",e,t),n&&n()};e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,i,r)}else this.emit("thumbnail",e,t),n&&n()}createThumbnailFromUrl(e,t,n,r,i,o,a){let s=document.createElement("img");return a&&(s.crossOrigin=a),i="from-image"!=getComputedStyle(document.body).imageOrientation&&i,s.onload=()=>{let a=e=>e(1);return"undefined"!==typeof EXIF&&null!==EXIF&&i&&(a=e=>EXIF.getData(s,(function(){return e(EXIF.getTag(this,"Orientation"))}))),a((i=>{e.width=s.width,e.height=s.height;let a=this.options.resize.call(this,e,t,n,r),l=document.createElement("canvas"),u=l.getContext("2d");switch(l.width=a.trgWidth,l.height=a.trgHeight,i>4&&(l.width=a.trgHeight,l.height=a.trgWidth),i){case 2:u.translate(l.width,0),u.scale(-1,1);break;case 3:u.translate(l.width,l.height),u.rotate(Math.PI);break;case 4:u.translate(0,l.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-l.width);break;case 7:u.rotate(.5*Math.PI),u.translate(l.height,-l.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-l.height,0)}f(u,s,null!=a.srcX?a.srcX:0,null!=a.srcY?a.srcY:0,a.srcWidth,a.srcHeight,null!=a.trgX?a.trgX:0,null!=a.trgY?a.trgY:0,a.trgWidth,a.trgHeight);let c=l.toDataURL("image/png");if(null!=o)return o(c,l)}))},null!=o&&(s.onerror=o),s.src=e.dataURL}processQueue(){let{parallelUploads:e}=this.options,t=this.getUploadingFiles().length,n=t;if(t>=e)return;let r=this.getQueuedFiles();if(r.length>0){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,e-t));for(;n<e;){if(!r.length)return;this.processFile(r.shift()),n++}}}processFile(e){return this.processFiles([e])}processFiles(e){for(let t of e)t.processing=!0,t.status=u.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}_getFilesWithXhr(e){return this.files.filter((t=>t.xhr===e)).map((e=>e))}cancelUpload(e){if(e.status===u.UPLOADING){let t=this._getFilesWithXhr(e.xhr);for(let e of t)e.status=u.CANCELED;"undefined"!==typeof e.xhr&&e.xhr.abort();for(let e of t)this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==u.ADDED&&e.status!==u.QUEUED||(e.status=u.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(e,...t){return"function"===typeof e?e.apply(this,t):e}uploadFile(e){return this.uploadFiles([e])}uploadFiles(e){this._transformFiles(e,(t=>{if(this.options.chunking){let n=t[0];e[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||n.size>this.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(n.size/this.options.chunkSize)}if(e[0].upload.chunked){let n=e[0],r=t[0],i=0;n.upload.chunks=[];let o=()=>{let t=0;for(;void 0!==n.upload.chunks[t];)t++;if(t>=n.upload.totalChunkCount)return;i++;let o=t*this.options.chunkSize,a=Math.min(o+this.options.chunkSize,r.size),s={name:this._getParamName(0),data:r.webkitSlice?r.webkitSlice(o,a):r.slice(o,a),filename:n.upload.filename,chunkIndex:t};n.upload.chunks[t]={file:n,index:t,dataBlock:s,status:u.UPLOADING,progress:0,retries:0},this._uploadData(e,[s])};if(n.upload.finishedChunkUpload=(t,r)=>{let i=!0;t.status=u.SUCCESS,t.dataBlock=null,t.response=t.xhr.responseText,t.responseHeaders=t.xhr.getAllResponseHeaders(),t.xhr=null;for(let e=0;e<n.upload.totalChunkCount;e++){if(void 0===n.upload.chunks[e])return o();n.upload.chunks[e].status!==u.SUCCESS&&(i=!1)}i&&this.options.chunksUploaded(n,(()=>{this._finished(e,r,null)}))},this.options.parallelChunkUploads)for(let e=0;e<n.upload.totalChunkCount;e++)o();else o()}else{let n=[];for(let r=0;r<e.length;r++)n[r]={name:this._getParamName(r),data:t[r],filename:e[r].upload.filename};this._uploadData(e,n)}}))}_getChunk(e,t){for(let n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}_uploadData(e,t){let n=new XMLHttpRequest;for(let r of e)r.xhr=n;e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=n);let i=this.resolveOption(this.options.method,e,t),o=this.resolveOption(this.options.url,e,t);n.open(i,o,!0),this.resolveOption(this.options.timeout,e)&&(n.timeout=this.resolveOption(this.options.timeout,e)),n.withCredentials=!!this.options.withCredentials,n.onload=t=>{this._finishedUploading(e,n,t)},n.ontimeout=()=>{this._handleUploadError(e,n,`Request timedout after ${this.options.timeout/1e3} seconds`)},n.onerror=()=>{this._handleUploadError(e,n)},(null!=n.upload?n.upload:n).onprogress=t=>this._updateFilesUploadProgress(e,n,t);let a=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};this.options.binaryBody&&(a["Content-Type"]=e[0].type),this.options.headers&&r(a,this.options.headers);for(let r in a){let e=a[r];e&&n.setRequestHeader(r,e)}if(this.options.binaryBody){for(let t of e)this.emit("sending",t,n);this.options.uploadMultiple&&this.emit("sendingmultiple",e,n),this.submitRequest(n,null,e)}else{let r=new FormData;if(this.options.params){let t=this.options.params;"function"===typeof t&&(t=t.call(this,e,n,e[0].upload.chunked?this._getChunk(e[0],n):null));for(let e in t){let n=t[e];if(Array.isArray(n))for(let t=0;t<n.length;t++)r.append(e,n[t]);else r.append(e,n)}}for(let t of e)this.emit("sending",t,n,r);this.options.uploadMultiple&&this.emit("sendingmultiple",e,n,r),this._addFormElementData(r);for(let e=0;e<t.length;e++){let n=t[e];r.append(n.name,n.data,n.filename)}this.submitRequest(n,r,e)}}_transformFiles(e,t){let n=[],r=0;for(let i=0;i<e.length;i++)this.options.transformFile.call(this,e[i],(o=>{n[i]=o,++r===e.length&&t(n)}))}_addFormElementData(e){if("FORM"===this.element.tagName)for(let t of this.element.querySelectorAll("input, textarea, select, button")){let n=t.getAttribute("name"),r=t.getAttribute("type");if(r&&(r=r.toLowerCase()),"undefined"!==typeof n&&null!==n)if("SELECT"===t.tagName&&t.hasAttribute("multiple"))for(let i of t.options)i.selected&&e.append(n,i.value);else(!r||"checkbox"!==r&&"radio"!==r||t.checked)&&e.append(n,t.value)}}_updateFilesUploadProgress(e,t,n){if(e[0].upload.chunked){let r=e[0],i=this._getChunk(r,t);n?(i.progress=100*n.loaded/n.total,i.total=n.total,i.bytesSent=n.loaded):(i.progress=100,i.bytesSent=i.total),r.upload.progress=0,r.upload.total=0,r.upload.bytesSent=0;for(let e=0;e<r.upload.totalChunkCount;e++)r.upload.chunks[e]&&"undefined"!==typeof r.upload.chunks[e].progress&&(r.upload.progress+=r.upload.chunks[e].progress,r.upload.total+=r.upload.chunks[e].total,r.upload.bytesSent+=r.upload.chunks[e].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount,this.emit("uploadprogress",r,r.upload.progress,r.upload.bytesSent)}else for(let r of e)r.upload.total&&r.upload.bytesSent&&r.upload.bytesSent==r.upload.total||(n?(r.upload.progress=100*n.loaded/n.total,r.upload.total=n.total,r.upload.bytesSent=n.loaded):(r.upload.progress=100,r.upload.bytesSent=r.upload.total),this.emit("uploadprogress",r,r.upload.progress,r.upload.bytesSent))}_finishedUploading(e,t,n){let r;if(e[0].status!==u.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(r=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{r=JSON.parse(r)}catch(i){n=i,r="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),r):this._finished(e,r,n):this._handleUploadError(e,t,r)}}_handleUploadError(e,t,n){if(e[0].status!==u.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){let n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}submitRequest(e,t,n){if(1==e.readyState)if(this.options.binaryBody)if(n[0].upload.chunked){const t=this._getChunk(n[0],e);e.send(t.dataBlock.data)}else e.send(n[0]);else e.send(t);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}_finished(e,t,n){for(let r of e)r.status=u.SUCCESS,this.emit("success",r,t,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(e,t,n){for(let r of e)r.status=u.ERROR,this.emit("error",r,t,n),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}constructor(e,t){let n,i;if(super(),this.element=e,this.clickableElements=[],this.listeners=[],this.files=[],"string"===typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");u.instances.push(this),this.element.dropzone=this;let o=null!=(i=u.optionsForElement(this.element))?i:{};if(this.options=r(!0,{},l,o,null!=t?t:{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!u.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=e=>this.options.renameFilename.call(this,e.name,e)),"string"===typeof this.options.method&&(this.options.method=this.options.method.toUpperCase()),(n=this.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=u.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=u.getElements(this.options.clickable,"clickable")),this.init()}}u.initClass(),u.options={},u.optionsForElement=function(e){return e.getAttribute("id")?u.options[d(e.getAttribute("id"))]:void 0},u.instances=[],u.forElement=function(e){if("string"===typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},u.discover=function(){let e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];let t=t=>(()=>{let n=[];for(let r of t)/(^| )dropzone($| )/.test(r.className)?n.push(e.push(r)):n.push(void 0);return n})();t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return(()=>{let t=[];for(let n of e)!1!==u.optionsForElement(n)?t.push(new u(n)):t.push(void 0);return t})()},u.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],u.isBrowserSupported=function(){let e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==u.blacklistedBrowsers&&(u.blockedBrowsers=u.blacklistedBrowsers);for(let t of u.blockedBrowsers)if(t.test(navigator.userAgent)){e=!1;continue}}else e=!1;else e=!1;return e},u.dataURItoBlob=function(e){let t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r);for(let o=0,a=t.length,s=0<=a;s?o<=a:o>=a;s?o++:o--)i[o]=t.charCodeAt(o);return new Blob([r],{type:n})};const c=(e,t)=>e.filter((e=>e!==t)).map((e=>e)),d=e=>e.replace(/[\-_](\w)/g,(e=>e.charAt(1).toUpperCase()));u.createElement=function(e){let t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},u.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},u.getElement=function(e,t){let n;if("string"===typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector or a plain HTML element.`);return n},u.getElements=function(e,t){let n,r;if(e instanceof Array){r=[];try{for(n of e)r.push(this.getElement(n,t))}catch(i){r=null}}else if("string"===typeof e)for(n of(r=[],document.querySelectorAll(e)))r.push(n);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return r},u.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},u.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");let n=e.type,r=n.replace(/\/.*$/,"");for(let i of t)if(i=i.trim(),"."===i.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length))return!0}else if(/\/\*$/.test(i)){if(r===i.replace(/\/.*$/,""))return!0}else if(n===i)return!0;return!1},"undefined"!==typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each((function(){return new u(this,e)}))}),u.ADDED="added",u.QUEUED="queued",u.ACCEPTED=u.QUEUED,u.UPLOADING="uploading",u.PROCESSING=u.UPLOADING,u.CANCELED="canceled",u.ERROR="error",u.SUCCESS="success";var f=function(e,t,n,r,i,o,a,s,l,u){let c=function(e){e.naturalWidth;let t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;let r=n.getContext("2d");r.drawImage(e,0,0);let{data:i}=r.getImageData(1,0,1,t),o=0,a=t,s=t;for(;s>o;)0===i[4*(s-1)+3]?a=s:o=s,s=a+o>>1;let l=s/t;return 0===l?1:l}(t);return e.drawImage(t,n,r,i,o,a,s,l,u/c)};class h{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(e){let t,n,r,i,o,a="",s="",l="",u=0;for(;t=e[u++],n=e[u++],s=e[u++],r=t>>2,i=(3&t)<<4|n>>4,o=(15&n)<<2|s>>6,l=63&s,isNaN(n)?o=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),t=n=s="",r=i=o=l="",u<e.length;);return a}static restore(e,t){if(!e.match("data:image/jpeg;base64,"))return t;let n=this.decode64(e.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return`data:image/jpeg;base64,${this.encode64(i)}`}static exifManipulation(e,t){let n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)}static getExifArray(e){let t,n=0;for(;n<e.length;){if(t=e[n],255===t[0]&225===t[1])return t;n++}return[]}static insertExif(e,t){let n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),o=r.slice(0,i),a=r.slice(i),s=o;return s=s.concat(t),s=s.concat(a),s}static slice2Segments(e){let t=0,n=[];for(;;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{let r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n}static decode64(e){let t,n,r,i,o,a="",s="",l=0,u=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r=this.KEY_STR.indexOf(e.charAt(l++)),i=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=r<<2|i>>4,n=(15&i)<<4|o>>2,a=(3&o)<<6|s,u.push(t),64!==o&&u.push(n),64!==s&&u.push(a),t=n=a="",r=i=o=s="",l<e.length;);return u}}h.initClass()}}]);