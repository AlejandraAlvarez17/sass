"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{34778:function(e,r,t){t.d(r,{Z:function(){return I}});var n=t(30266),a=t(809),o=t.n(a),c=t(67294),i=t(12239),s=t(83156),l=t(9038),d=t(52674),u=t(78700),h=t(24035),f=t(84310),p=t(94379),m=(t(2238),t(58804)),v=(m.ZP.div.withConfig({displayName:"style__ChatOverlay",componentId:"sc-l2f2mr-0"})(["position:absolute;background:linear-gradient(180deg,rgba(234,144,255,0.05) 0%,rgba(131,174,251,0.05) 100%);filter:blur(220px);width:50%;height:50%;border-radius:50%;right:",";bottom:",";"],(function(e){return e.right?0:"unset"}),(function(e){return e.bottom?0:"unset"})),m.ZP.div.withConfig({displayName:"style__ChatContainer",componentId:"sc-l2f2mr-1"})(["width:",";background-color:"," !important;> .str-chat.str-chat-channel{> .str-chat__container{background-color:"," !important;}}"],(function(e){return e.openDetail?"0":"calc(100% - 280px)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--primary-color)"}))),g=m.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-l2f2mr-2"})(["display:flex;height:100%;background-color:"," !important;"],(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--primary-color)"})),b=m.ZP.div.withConfig({displayName:"style__ThreadContainer",componentId:"sc-l2f2mr-3"})(["border-left:",";padding:0 1px;height:100%;background-color:"," !important;box-shadow:0px 1px 4px rgb(0 0 0 / 25%);> div{height:100%;margin:0 !important;}> .str-chat__thread{background-color:"," !important;> .str-chat__thread-header{background-color:"," !important;> .str-chat__thread-header-details{color:",";> strong{font-size:16px;}}> .str-chat__square-button{background:",";> svg{fill:",";width:16px;height:16px;}}}> .str-chat__thread-list{background-color:"," !important;}> .str-chat__thread-list::-webkit-scrollbar{width:8px;background-color:",";}> .str-chat__thread-list::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> .str-chat__thread-list{-ms-overflow-style:none;scrollbar-width:none;}}"],(function(e){return e.isDarkMode?"solid 1px var(--separator-line-dm)":"solid 1px var(--separator-line"}),(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-background-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"})),k=m.ZP.div.withConfig({displayName:"style__Windows",componentId:"sc-l2f2mr-4"})(["display:flex;flex-direction:column;flex:1;height:100%;width:calc(100% - 305px);overflow-y:auto;&::-webkit-scrollbar{width:8px;background-color:",";}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> .str-chat__list{background-color:"," !important;}> .str-chat__list::-webkit-scrollbar{width:8px;background-color:",";}> .str-chat__list::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> .str-chat__list-notifications{padding:0px;border-radius:5px;> button{background:",";color:",";}> .str-chat__custom-notification.notification-error{font-family:var(--font);height:49px;font-size:14px;background:",";color:",";padding-top:15px;border:0px;&:before{content:'';}}}"],(function(e){return e.isDarkMode?"var(--scrollbar-background-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-background-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--new-message-notif-bg-dm)":"var(--new-message-notif-bg)"}),(function(e){return e.isDarkMode?"var(--new-message-notif-color-dm)":"var(--new-message-notif-color)"}),(function(e){return e.isDarkMode?"var(--notification-file-error-bg-dm)":"var(--notification-file-error-bg)"}),(function(e){return e.isDarkMode?"var(--notification-file-error-color-dm)":"var(--notification-file-error-color)"})),x=t(55431),y=t(1590),w=t(24080),j=t(70930),_=t(90954),D=t(93365),C=(t(14793),t(15709)),M=(t(25088),t(31772)),S=t(85893),I=function(e){var r=(0,i.fr)().message,t=e.camadaId,a=void 0===t?null:t,m=e.client,I=e.personalFilter,O=e.defaultFilters,Z=e.logoutClick,P=(0,w.hn)().isIFrame,F=(0,_.vs)(),q=(0,j.T)().t,G=(0,c.useState)(!1),L=G[0],N=G[1],E=(0,c.useState)(!1),R=E[0],T=E[1],U=(0,c.useState)(""),$=U[0],H=U[1],W=(0,c.useState)(""),z=W[0],A=W[1],B=(0,c.useState)([]),Q=B[0],X=B[1],J=(0,c.useRef)([]),K=(0,c.useState)(""),V=K[0],Y=K[1],ee=(0,c.useState)(!1),re=ee[0],te=ee[1],ne=(0,c.useState)(!1),ae=ne[0],oe=ne[1],ce=(0,c.useState)(!0)[0],ie=(0,c.useState)(!1),se=ie[0],le=ie[1],de=(0,c.useState)(!1),ue=de[0],he=de[1],fe=(0,c.useState)(!1),pe=fe[0],me=fe[1],ve=(0,c.useContext)(s.p5).setActiveChannel,ge=function(){var e=(0,n.Z)(o().mark((function e(){var r,t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={type:"messaging",joined:!0,member_count:{$gt:1}},t=[{last_message_at:-1}],e.next=4,m.queryChannels(r,t,{watch:!0,state:!0});case 4:return n=e.sent,e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,n.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),he(!1),e.next=4,ge();case 4:return(t=e.sent)&&(ve(t),Se(t)),(n=m.channel("messaging",localStorage.getItem("currentChannel"))).hide(),e.next=10,n.removeMembers([m.userID]);case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),ke=function(){var e=(0,n.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),le(!1),e.next=4,ge();case 4:(t=e.sent)&&(ve(t),Se(t),window.localStorage.setItem("dsmid",pe)),m.channel("messaging",localStorage.getItem("currentChannel")).hide();case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),xe={background:F?"var(--bg-modal-dm)":"var(--bg-modal)"},ye=function(){le(!se)},we=function(){he(!ue)};if(r){var je=r.user.name;P||p.fn.info("".concat(q("chat.newMessageFrom")," ").concat(je))}var _e=(0,c.useState)(!1),De=_e[0],Ce=_e[1],Me=function(){var e=(0,n.Z)(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),(t=document.querySelector(".str-chat__square-button"))&&t.click(),Ce(!De);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Se=function(e){var r=J.current;for(var t in r)r[t]&&(r[t].style.background="transparent",r[t].style.fontWeight=500,r[t].classList.remove(F?"active-channel-dm":"active-channel"));if(e){var n=r[e.cid];n&&(n.style.background=F?"var(--bg-hover-items-chat-dm)":"var(--bg-hover-items-chat)",n.style.fontWeight=400,n.classList.add(F?"active-channel-dm":"active-channel"),n.click())}};document.addEventListener("GroupCreating",(function(e){e.preventDefault();var r=e.detail,t=r.creating,n=r.channels;X(n),t?N(!0):(N(!1),Ce(!1))})),document.addEventListener("groupCreated",(function(e){e.preventDefault(),N(!1)})),document.addEventListener("GroupUpdating",(function(e){e.preventDefault();var r=e.detail,t=r.updating,n=r.channel,a=r.group;A(n),H(a),t?T(!0):(T(!1),Ce(!1))})),document.addEventListener("groupUpdated",(function(e){e.preventDefault(),T(!1)}));return(0,S.jsxs)(l.e,{client:m,children:[(0,S.jsx)(D.Z,{animation:"fade",customStyles:xe,width:744,height:180,visible:se,onClose:ye,children:(0,S.jsxs)(C.yZ,{children:[(0,S.jsxs)(C.aZ,{isDarkMode:F,children:[(0,S.jsx)("h1",{children:q("chat.deleteChannel")}),(0,S.jsx)("p",{children:q("chat.deleteChannelText")})]}),(0,S.jsxs)(C.cw,{children:[(0,S.jsxs)(C.q,{isDarkMode:F,children:[(0,S.jsx)(M.X,{id:"binary",checked:pe,onChange:function(e){me(e.target.checked)}}),(0,S.jsx)("label",{htmlFor:"binary",children:q("chat.dontShowAgain")})]}),(0,S.jsx)(C.LR,{bottom:"32px",isDarkMode:F,onClick:ye,children:q("chat.deleteChannel.cancel")}),(0,S.jsx)(C.H0,{bottom:"32px",isDarkMode:F,onClick:ke,children:q("chat.deleteChannel.hide")})]})]})}),(0,S.jsx)(D.Z,{animation:"fade",customStyles:xe,width:744,height:180,visible:ue,onClose:we,children:(0,S.jsxs)(C.yZ,{children:[(0,S.jsxs)(C.aZ,{isDarkMode:F,children:[(0,S.jsx)("h1",{children:q("chat.leaveGroup.title")}),(0,S.jsx)("p",{children:q("chat.leaveGroup.text")})]}),(0,S.jsxs)(C.cw,{children:[(0,S.jsx)(C.LR,{bottom:"32px",isDarkMode:F,onClick:we,children:q("chat.leaveGroup.cancel")}),(0,S.jsx)(C.H0,{bottom:"32px",isDarkMode:F,onClick:be,children:q("chat.leaveGroup.leave")})]})]})}),(0,S.jsxs)(g,{children:[(0,S.jsx)(y.GO,{handleInfoClick:Me,focusInCurrentChannel:Se,defaultFilters:O,personalFilters:I,logoutClick:Z,camadaId:a,channelRefs:J}),(0,S.jsx)(v,{openDetail:De,ThreadMessage:y.s0,isDarkMode:F,children:(0,S.jsxs)(d.$,{Message:y.v0,maxNumberOfFiles:3,DateSeparator:x._U,children:[L&&(0,S.jsx)(y.Nt,{channels:Q,client:m,cancelNewGroup:function(e){e.preventDefault(),N(!1)}}),R&&(0,S.jsx)(y.nv,{channel:z,group:$,client:m,cancelUpdateGroup:function(e){e.preventDefault(),T(!1)}}),!L&&!R&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(k,{isDarkMode:F,isSearching:re,children:[(0,S.jsx)(x.g$,{setOpenSearch:oe,openSearch:ae,searched:V,setSearched:Y,onChangeSearch:function(){var e,r,t;(Y(document.querySelector(".searchInput").value),(null===(e=document.querySelector(".searchInput").value)||void 0===e?void 0:e.length)>=3)?te(0!=(null===(r=document.querySelector(".searchInput"))||void 0===r||null===(t=r.value)||void 0===t?void 0:t.length)):te(!1)},handleInfoClick:Me,handleDeleteChannelClick:function(e){var r=window.localStorage.getItem("dsmid");"false"==r||null==r?le(!0):ke(e)},handleLeaveChannelClick:function(){he(!0)}}),re?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(y.jq,{setIsSearching:te,searched:V})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x.tZ,{}),(0,S.jsx)(x.qB,{}),(0,S.jsx)(u.r,{hideDeletedMessages:!0,Message:y.v0}),(0,S.jsx)(h.R,{Input:y.IG,mentionQueryParams:{options:{limit:1e3}}})]})]}),y.s0&&(0,S.jsx)(b,{ThreadMessage:y.s0,isDarkMode:F,children:(0,S.jsx)(f.j,{Input:y.M6,Message:function(){return Ce(!1),(0,S.jsx)(y.s0,{showThread:ce})},additionalMessageListProps:x._U})})]})]})}),De&&(0,S.jsx)(y.HR,{focusInCurrentChannel:Se,handleClick:Me})]})]})}},13575:function(e,r,t){t.r(r);var n=t(92809),a=t(80318),o=t(67294),c=t(11163),i=t(74255),s=t(34778),l=t(24080),d=t(85893);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}r.default=function(){var e=(0,l._)("auth"),r=(0,a.Z)(e,1)[0],t=(0,o.useState)(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},r)),h=t[0],f=t[1],p=(0,c.useRouter)();(0,o.useEffect)((function(){f(r)}),[h]),null!==h&&void 0!==h&&h.user||null!==h&&void 0!==h&&h.token||p.push("/");var m=new i.c8("ycpwvutu5n5y"),v=h.user;m.setUser({id:v._id.toString(),name:v.name,role:"admin"},v.getStreamToken);var g={type:"messaging",isPersonal:!0,members:{$in:[v._id.toString()]}},b={type:"messaging",members:{$in:[v._id.toString()]}};return(0,d.jsx)(s.Z,{client:m,personalFilter:g,defaultFilters:b,logoutClick:function(e){e.preventDefault(),window.localStorage.removeItem("auth"),f(null),p.push("/")}})}}}]);