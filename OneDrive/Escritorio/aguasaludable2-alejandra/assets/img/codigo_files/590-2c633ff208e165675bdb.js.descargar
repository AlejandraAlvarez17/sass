"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{77855:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});n(67294);var r=n(11163),o=n(41664),i=n(58804).ZP.nav.withConfig({displayName:"style__Navigation",componentId:"sc-c5f0f8-0"})(["background:",";display:flex;align-items:center;justify-content:space-around;width:100%;bottom:0;z-index:1;> a{padding:16px 0;padding-bottom:8px;text-decoration:none;width:100%;background:",";}"],(function(e){return e.isDarkMode?"var(--mobile-bg-color-dm)":"var(--mobile-bg-color)"}),(function(e){return e.isDarkMode?"var(--mobile-bg-color-dm)":"var(--mobile-bg-color)"})),a=n(55431),s=n(22368),l=n(24080),c=n(90954),d=n(70930),u=n(85893),p=function(){var e=(0,l.Il)(),t=e.user,n=e.isProd,p=(0,l.hn)().isIFrame,m=(0,r.useRouter)().pathname,f=(0,c.vs)(),h=(0,d.T)().t;return["/","/login","/support","/chat","/desktop-chat"].includes(m)?null:(window.isProd=n,(0,l.E0)(t),(0,u.jsxs)(u.Fragment,{children:[f&&(0,u.jsxs)(i,{isDarkMode:f,children:[(0,u.jsx)(o.default,{href:"/directs",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/directs"===m?"#CACACA":"#f9f9f9",borderBottom:"/directs"===m?"var(--navigation-item-active-dm)":"transparent",children:(0,u.jsx)(a.LY,{title:h("chat.directs"),colorTitle:"/directs"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)",children:(0,u.jsx)(s.ak,{color:"/directs"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)"})})})}),p&&(0,u.jsx)(o.default,{href:"/new-message",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/new-message"===m?"#CACACA":"#f9f9f9",borderBottom:"/new-message"===m?"var(--navigation-item-active-dm)":"transparent",children:(0,u.jsx)(a.LY,{title:h("chat.newMessage"),colorTitle:"/new-message"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)",children:(0,u.jsx)(s.EG,{color:"/new-message"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)"})})})}),(0,u.jsx)(o.default,{href:"/channels",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/channels"===m?"#CACACA":"#f9f9f9",borderBottom:"/channels"===m?"var(--navigation-item-active-dm)":"transparent",children:(0,u.jsx)(a.LY,{title:h("chat.channels"),colorTitle:"/channels"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)",children:(0,u.jsx)(s.kb,{color:"/channels"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)"})})})}),p&&(0,u.jsx)(o.default,{href:"/members",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/members"===m?"#CACACA":"#f9f9f9",borderBottom:"/members"===m?"var(--navigation-item-active-dm)":"transparent",children:(0,u.jsx)(a.LY,{title:h("chat.members"),colorTitle:"/members"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)",children:(0,u.jsx)(s.Nw,{color:"/members"===m?"var(--navigation-item-active-dm)":"var(--navigation-item-inactive-dm)"})})})})]}),!f&&(0,u.jsxs)(i,{isDarkMode:f,children:[(0,u.jsx)(o.default,{href:"/directs",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/directs"===m?"#CACACA":"#f9f9f9",children:(0,u.jsx)(a.LY,{title:h("chat.directs"),colorTitle:"/directs"===m?"#333":"#CACACA",children:(0,u.jsx)(s.ak,{color:"/directs"===m?"#333":"#CACACA"})})})}),p&&(0,u.jsx)(o.default,{href:"/new-message",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/new-message"===m?"#CACACA":"#f9f9f9",children:(0,u.jsx)(a.LY,{title:h("chat.newMessage"),colorTitle:"/new-message"===m?"#333":"#CACACA",children:(0,u.jsx)(s.EG,{color:"/new-message"===m?"#333":"#CACACA"})})})}),(0,u.jsx)(o.default,{href:"/channels",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/channels"===m?"#CACACA":"#f9f9f9",children:(0,u.jsx)(a.LY,{title:h("chat.channels"),colorTitle:"/channels"===m?"#333":"#CACACA",children:(0,u.jsx)(s.kb,{color:"/channels"===m?"#333":"#CACACA"})})})}),p&&(0,u.jsx)(o.default,{href:"/members",passHref:!0,children:(0,u.jsx)(a.WL,{itemBackground:"/members"===m?"#CACACA":"#f9f9f9",children:(0,u.jsx)(a.LY,{title:h("chat.members"),colorTitle:"/members"===m?"#333":"#CACACA",children:(0,u.jsx)(s.Nw,{color:"/members"===m?"#333":"#CACACA"})})})})]})]}))}},1590:function(e,t,n){n.d(t,{SD:function(){return x},HR:function(){return q},GO:function(){return O},Ee:function(){return N},z3:function(){return pe},IG:function(){return $e},M6:function(){return ct},Ad:function(){return ge},v0:function(){return ue},Nt:function(){return Et},fG:function(){return mt},jq:function(){return Lt},s0:function(){return Ct},nv:function(){return Dt}});n(77855);var r=n(92809),o=n(83789),i=n(30266),a=n(809),s=n.n(a),l=n(67294),c=n(55431),d=n(24080),u=n(58804),p=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-105ebgi-0"})(["height:100%;overflow-y:scroll;"]),m=u.ZP.div.withConfig({displayName:"style__ErrorContairner",componentId:"sc-105ebgi-1"})(["display:flex;justify-content:center;align-items:center;height:100%;"]),f=u.ZP.span.withConfig({displayName:"style__Span",componentId:"sc-105ebgi-2"})(["color:#333;"]),h=n(70930),v=n(85893);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x=function(){var e=(0,d.E0)(),t=(0,l.useState)([]),n=t[0],a=t[1],u=(0,l.useState)(null),x=u[0],b=u[1],y=(0,h.T)().t,k=function(){var t=(0,i.Z)(s().mark((function t(){var n,r,l,c,d,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={type:"messaging",isPersonal:{$ne:!0},members:{$in:[null===e||void 0===e?void 0:e.userID]},member_count:{$gt:1}},t.prev=1,t.next=4,e.queryChannels(n);case 4:return r=t.sent,l={name:1},c=[],d=r.map(function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryMembers({},l);case 2:n=e.sent,r=n.members,i=r.map((function(e){var t,n;return{_id:e.user_id,avatar:null===(t=e.user)||void 0===t?void 0:t.image,fullName:null===(n=e.user)||void 0===n?void 0:n.name}})),c.push.apply(c,(0,o.Z)(i));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=10,Promise.all(d);case 10:u=c.filter((function(t){return" "!==t.fullName&&t._id!==e.userID})),a(u),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),b(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(){return t.apply(this,arguments)}}();return(0,l.useEffect)((function(){k()}),[]),x?(0,v.jsx)(m,{children:(0,v.jsx)(f,{children:y("chat.error")})}):(0,v.jsx)(p,{children:n.map((function(e,t){return(0,v.jsx)(c.u$,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),t)}))})},b=n(83156),y=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-5678tm-0"})(["border-left:"," !important;height:100%;width:100%;background:",";box-shadow:0px 1px 4px rgb(0 0 0 / 25%);> .p-tabmenu{padding:32px 0 48px 40px;background:",";border:none;.p-tabmenu-nav{background:",";border:none;}.p-tabmenu-nav .p-tabmenuitem .p-menuitem-link{background:"," !important;color:",";border-bottom:",";font-style:normal;font-weight:400;font-size:18px;line-height:24px;border-radius:0;outline:0;box-shadow:none;transition:none;margin:0 0 -1px 0;}.p-tabmenu-nav .p-tabmenuitem.p-highlight .p-menuitem-link,.p-tabmenu-nav .p-tabmenuitem .p-menuitem-link:hover{color:"," !important;border-bottom:"," !important;outline:0 !important;box-shadow:none !important;transition:none !important;}}"],(function(e){return e.isDarkMode?"1px solid var(--primary-color-dm)":"1px solid var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--font-color)"}),(function(e){return e.isDarkMode,"1px solid var(--separator-line-dm)"}),(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--font-color-title)"}),(function(e){return e.isDarkMode?"2px solid var(--font-color-title-dm)":"2px solid var(--font-color-title)"})),k=u.ZP.div.withConfig({displayName:"style__ActionContainer",componentId:"sc-5678tm-1"})(["margin:24px 48px;display:flex;"]),w=u.ZP.div.withConfig({displayName:"style__Button",componentId:"sc-5678tm-2"})(["color:",";font-family:var(--font);font-size:16px;text-align:center;line-height:24px;margin-left:12px;&:hover{cursor:pointer;opacity:0.75;}"],(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-text-dm)":"var(--button-cancel-modal-text)")})),j=u.ZP.div.withConfig({displayName:"style__GridFiles",componentId:"sc-5678tm-3"})(["color:",";font-weight:400;font-size:16px;line-height:24px;"],(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--secondary-color)"})),M=(u.ZP.div.withConfig({displayName:"style__TitleSection",componentId:"sc-5678tm-4"})(["display:inline-block;color:",";font-weight:500;font-size:18px;line-height:28px;"],(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--secondary-color)"})),u.ZP.div.withConfig({displayName:"style__TextContainer",componentId:"sc-5678tm-5"})(["color:",";text-align:center;> img{margin-top:56px;}> h5{font-weight:500;font-size:14px;line-height:24px;margin:24px 0 8px 0px;}> h6{color:",";font-weight:400;font-size:14px;line-height:24px;margin:0px;}"],(function(e){return e.isDarkMode?"var(--font-color-title-dm)":"var(--secondary-color)"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--secondary-color)"}))),C=n(90954),_=n(15709),E=n(22368),S=n(46148),D=n(93365),q=(n(14793),function(e){var t,n,r=e.handleClick,o=e.focusInCurrentChannel,a=(0,l.useContext)(b.p5),d=a.client,u=a.channel,p=a.setActiveChannel,m=(0,C.vs)(),f=(0,h.T)().t,g=(0,l.useState)([]),x=g[0],q=g[1],N=(0,l.useState)([]),I=N[0],A=N[1],P=null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.isPersonal,T=null===u||void 0===u?void 0:u.isChannel,Z=(0,l.useState)(!1),B=Z[0],L=Z[1],F=(0,l.useState)(0),O=F[0],z=F[1],R=[{index:0,label:f("chat.files")}];P||R.push({index:1,label:f("chat.members")});var G={background:m?"var(--bg-modal-dm)":"var(--bg-modal)"},H=function(){var e=(0,i.Z)(s().mark((function e(t,n){var o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i=null===d||void 0===d?void 0:d.user,a=d.channel("messaging",{isPersonal:!0,members:[null===i||void 0===i?void 0:i.id,null===n||void 0===n||null===(o=n.user)||void 0===o?void 0:o.id]}),r(t),e.next=6,a.watch();case 6:p(a,t.persist());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={cid:u.cid},n={attachments:{$exists:!0}},e.next=4,d.search(t,n,{sort:[{relevance:-1},{updated_at:1}],limit:3});case 4:return r=e.sent,e.next=7,d.search(t,n,{sort:[{relevance:-1},{updated_at:1}]});case 7:o=e.sent,q(r),A(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){$()}),[u]);var U=function(){L(!B)},V=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r(t),n={type:"messaging",joined:!0,member_count:{$gt:1}},i=[{last_message_at:-1}],e.next=6,d.queryChannels(n,i,{watch:!0,state:!0});case 6:return a=e.sent,(l=a[0])&&(p(l),o(l)),u.hide(),e.next=12,u.removeMembers([d.userID]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(y,{isDarkMode:m,children:[(0,v.jsx)(D.Z,{animation:"fade",customStyles:G,width:744,height:180,visible:B,onClose:U,children:(0,v.jsxs)(_.yZ,{children:[(0,v.jsxs)(_.aZ,{isDarkMode:m,children:[(0,v.jsx)("h1",{children:f("chat.leaveGroup.title")}),(0,v.jsx)("p",{children:f("chat.leaveGroup.text")})]}),(0,v.jsxs)(_.cw,{children:[(0,v.jsx)(_.LR,{bottom:"32px",isDarkMode:m,onClick:U,children:f("chat.leaveGroup.cancel")}),(0,v.jsx)(_.H0,{bottom:"32px",isDarkMode:m,onClick:V,children:f("chat.leaveGroup.leave")})]})]})}),(0,v.jsx)(c.Of,{handleClick:r}),(0,v.jsx)(S.d,{model:R,activeIndex:O,onTabChange:function(e){return z(e.value.index)}}),0===O&&(0,v.jsx)(j,{isPersonal:P,isDarkMode:m,children:(null===x||void 0===x||null===(n=x.results)||void 0===n?void 0:n.length)>0?(0,v.jsx)(c.$U,{files:x,allFiles:I}):(0,v.jsxs)(M,{isDarkMode:m,children:[(0,v.jsx)("img",{src:"/Vector.png",alt:""}),(0,v.jsx)("h5",{children:f("chat.noFilesTitle")}),(0,v.jsx)("h6",{children:f("chat.noFilesSubtitle")})]})}),1===O&&!P&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.tb,{title:"",children:(0,v.jsx)(c.to,{channel:u,handlePersonalChannel:H,opts:{limit:20}})}),!T&&(0,v.jsxs)(k,{children:[(0,v.jsx)(E.kY,{isDarkMode:m,size:24,fill:!0}),(0,v.jsx)(w,{isDarkMode:m,onClick:function(){L(!B)},children:f("chat.leaveGroup")})]})]})]})}),N=l.memo((function(e){var t=e.client,n=e.filters,r=e.sort,o=e.opts,i=e.toggleInfo,a=(0,d.Yx)(t,n||{},r||{},o||{}),s=a.channels,l=a.setChannels;return(0,d.vy)(l),(0,d.MY)(l),(0,v.jsx)("div",{children:s.map((function(e,n){return(0,v.jsx)(c.BR,{channel:e,toggleInfo:i,client:t},n)}))})})),I=u.ZP.div.withConfig({displayName:"style__MainContainer",componentId:"sc-ealbko-0"})(["background-color:",";border-right:",";display:flex;flex-direction:column;height:100%;overflow-y:none;width:280px;"],(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?" 1px solid #393B43":" 1px solid var(--primary-color)"})),A=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-ealbko-1"})(["display:flex;flex-direction:column;height:100%;width:100%;overflow-y:auto;&::-webkit-scrollbar{width:8px;background-color:",";}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> div:first-child{margin-top:40px;}> div:last-child{margin-bottom:24px;}"],(function(e){return e.isDarkMode?"var(--scrollbar-background-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"})),P=u.ZP.div.withConfig({displayName:"style__InnerContainer",componentId:"sc-ealbko-2"})(["margin-top:24px;"]),T=u.ZP.div.withConfig({displayName:"style__ButtonContainer",componentId:"sc-ealbko-3"})(["margin-bottom:40px;margin-left:40px;margin-top:auto;"]),Z=u.ZP.div.withConfig({displayName:"style__HLine",componentId:"sc-ealbko-4"})(["background:#2e2f36;padding:1px;margin:16px 24px 8px 24px;"]),B=u.ZP.div.withConfig({displayName:"style__EmptyList",componentId:"sc-ealbko-5"})(["width:226px;margin:24px 24px 0 24px;padding:1px;border:solid 1px transparent;border-left-color:#83aefb;border-right-color:#eaff6a;border-radius:4px;background:linear-gradient(to left,#eaff6a,#83aefb);"]),L=u.ZP.div.withConfig({displayName:"style__Span",componentId:"sc-ealbko-6"})(["font-family:var(--font);font-style:normal;font-weight:400;font-size:14px;line-height:24px;padding:8px 16px;background:",";color:",";"],(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--font-color)"})),F={last_message_at:-1},O=l.memo((function(e){var t=e.defaultFilters,n=e.personalFilters,r=e.sort,o=void 0===r?F:r,a=e.opts,u=e.logoutClick,p=e.camadaId,m=void 0===p?null:p,f=e.handleInfoClick,g=e.focusInCurrentChannel,x=e.channelRefs,y=(0,l.useContext)(b.p5),k=y.client,w=y.setActiveChannel,j=(0,l.useState)({}),M=j[0],_=j[1],S=(0,d.hn)().isIFrame,D=(0,C.vs)(),q=(0,l.useState)(!0),N=q[0],O=q[1],z=(0,h.T)().t,R=function(e,t){var n=new CustomEvent("GroupCreating",{bubbles:!0,detail:{creating:!1}});document.dispatchEvent(n);var r=new CustomEvent("GroupUpdating",{bubbles:!0,detail:{updating:!1}});document.dispatchEvent(r);var o,i=t.state.messages[t.state.messages.length-1-t.countUnread()];setTimeout((function(){o=document.getElementById(null===i||void 0===i?void 0:i.id)})),setTimeout((function(){var e,t,n;null===(e=o)||void 0===e||e.scrollIntoView(!0),null===(t=o)||void 0===t||t.scrollIntoView({block:"start"}),null===(n=o)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),500),C.iz.logEvent("clickChannel",{channel:t.data.name}),t.watch(),w(t,e.persist()),_(t),g(t)},G=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detail,r=n.idReceiver,o=n.idTransmitter,e.prev=1,i=k.channel("messaging",{isPersonal:!0,members:[o._id,r._id]}),e.next=5,i.watch();case 5:return e.next=7,i.show();case 7:w(i),setTimeout((function(){g(i)}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("redirect-channel",G),(0,v.jsxs)(I,{isDarkMode:D,children:[m&&(0,v.jsx)(c.jk,{camadaId:m}),(0,v.jsxs)(A,{isDarkMode:D,children:[S&&(0,v.jsxs)(P,{children:[(0,v.jsx)(c.EO,{camadaId:m,focusInCurrentChannel:g}),!N&&(0,v.jsx)(B,{isDarkMode:D,children:(0,v.jsx)(L,{isDarkMode:D,children:z("chat.list.empty")})})]}),(0,v.jsx)(P,{children:(0,v.jsx)(c.ac,{client:k,filters:t,sort:o,opts:a,channelRefs:x,handleClick:R,focusInCurrentChannel:g,handleInfoClick:f})}),(0,v.jsx)(Z,{}),(0,v.jsx)(P,{children:(0,v.jsx)(c.m4,{client:k,filters:n,sort:o,opts:a,channelRefs:x,handleClick:R,currentChannel:M,focusInCurrentChannel:g,handleInfoClick:f,setHasPersonalChannels:O})}),!S&&(0,v.jsx)(T,{children:(0,v.jsx)(E.dD,{logoutClick:u})})]})]})})),z=n(52674),R=n(91351),G=n(78700),H=n(24035),$=n(84310),U=n(12239),V=n(8336),J=n(25531),Y=n(6199),Q=n(72485),K=n(15282),W=n(37495),X=n(52127),ee=n(34289),te=n(53721),ne=u.ZP.div.withConfig({displayName:"style__AvatarContainer",componentId:"sc-1kqvyjq-0"})(["visibility:",";position:absolute;left:8px;top:",";"],(function(e){return e.topMessage?"visible":"hidden"}),(function(e){return"".concat(e.pinned?"24px":"0")})),re=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-1kqvyjq-1"})(["display:flex;flex-direction:column;align-items:",";width:100%;> .str-chat__simple-reactions-list{margin:",";background:"," !important;> .str-chat__simple-reactions-list-item--last-number{color:"," !important;}}> .str-chat__simple-reactions-list + div{margin-top:0px;}"],(function(e){return e.isMyMessage?"flex-end":"flex-start"}),(function(e){return e.isMobile?"0px 0 0 var(--margins-left-chats-reactions-mobile)":"0px 0 8px 48px"}),(function(e){return e.isDarkMode?"var(--bg-reactions-dm)":"unset"}),(function(e){return e.isDarkMode?"var(--color-count-reactions-dm)":"var(--color-count-reactions)"})),oe=u.ZP.div.withConfig({displayName:"style__OptionContainer",componentId:"sc-1kqvyjq-2"})(["visibility:visible;margin:0 10px 0 0px;position:absolute;top:5px;float:right;right:0px;"]),ie=u.ZP.div.withConfig({displayName:"style__MainContainer",componentId:"sc-1kqvyjq-3"})(["display:flex;align-items:center;background-color:",";margin-right:var(--margins-right-chats);> .own-reaction .str-chat__simple-reactions-list{border-color:",";}&:hover{visibility:visible;background-color:"," !important;}"],(function(e){return e.isDarkMode?e.isMyMessage?"var(--myMessage-bg-color-dm)":"var(--notMyMessage-bg-color-dm)":e.isMyMessage?"var(--myMessage-bg-color)":"var(--notMyMessage-bg-color)"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"}),(function(e){return e.isDarkMode?"var(--hover-msg-dm)":"var(--hover-msg)"})),ae=u.ZP.div.withConfig({displayName:"style__InnerContainer",componentId:"sc-1kqvyjq-4"})(["display:flex;flex-direction:",";align-items:flex-start;width:100%;"],(function(e){return e.isMyMessage?"row-reverse":"row"})),se=u.ZP.div.withConfig({displayName:"style__MessageContainer",componentId:"sc-1kqvyjq-5"})(["position:relative;display:flex;flex-direction:column;align-items:",";margin:0;width:100%;> p{margin-top:8px;}a{color:"," !important;}> .str-chat__reaction-selector{background:"," !important;top:-56px;right:0px;}"],(function(e){return e.isMyMessage?"flex-end":"flex-start"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"}),(function(e){return e.isDarkMode?"var(--bg-reaction-selector-dm)":"var(--bg-reaction-selector)"})),le=u.ZP.div.withConfig({displayName:"style__InnerMessageContainer",componentId:"sc-1kqvyjq-6"})(["display:flex;align-items:center;flex-direction:",";"],(function(e){return e.isMyMessage?"row-reverse":"row"})),ce=(u.ZP.div.withConfig({displayName:"style__ReactionSelectorContainer",componentId:"sc-1kqvyjq-7"})(["right:60px;position:absolute;bottom:0;margin-bottom:28px;margin-right:24px;> div{position:relative;background-color:var(--secondary-color);}"]),u.ZP.div.withConfig({displayName:"style__InnerQuotedMessage",componentId:"sc-1kqvyjq-8"})(["width:100%;padding:",";"],(function(e){return e.showQuote?"8px 56px 8px 56px":"0"}))),de=function(){var e,t,n,r,o=(0,U.fr)().reactionSelectorRef,a=(0,U.fr)(),d=a.message,u=a.groupStyles,p=(0,V.j)(d).isMyMessage,m="reply"===(null===d||void 0===d?void 0:d.type),f=(0,J.t)(d),h=(0,Y.w)(),g=h.editing,x=h.setEdit,y=h.clearEdit,k=(0,Q.VF)(d),w=(0,K.K)(d),j=(0,l.useState)(!1),M=j[0],_=j[1],S=(0,l.useState)(!1),D=S[0],q=S[1],N=(0,l.useContext)(b.p5),I=N.client,A=N.channel,P=N.setActiveChannel,T=(0,l.useState)(!1),Z=T[0],B=T[1],L=(0,C.tq)(),F=!u,O=(0,C.vs)(),z=(0,W.uz)().setQuotedMessage,R="pinned-"+d.pinned;if((0,l.useEffect)((function(){u&&"top"!=u[0]&&"single"!=u[0]||q(!0)})),g)return d.isEditing=!0,(0,v.jsx)(H.R,{Input:$e,mentionQueryParams:{options:{limit:1e3}},message:d,clearEditingState:y,editing:g});var G=(0,X.KI)(d),$=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!p){e.next=3;break}return e.abrupt("return");case 3:return o=null===I||void 0===I?void 0:I.channel("messaging",{isPersonal:!0,members:[null===I||void 0===I||null===(n=I.user)||void 0===n?void 0:n.id,null===d||void 0===d||null===(r=d.user)||void 0===r?void 0:r.id]}),e.next=6,o.create();case 6:if(A.cid===o.cid){e.next=12;break}return e.next=9,o.watch();case 9:o.show(),e.next=13;break;case 12:return e.abrupt("return");case 13:P(o,t.persist());case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.pinned){e.next=5;break}return e.next=3,I.unpinMessage(d);case 3:e.next=7;break;case 5:return e.next=7,I.pinMessage(d);case 7:t=new CustomEvent("pinnedEvent",{bubbles:!0}),document.dispatchEvent(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(ie,{id:d.id,className:R,isDarkMode:O,onMouseEnter:function(){return B(!0)},onMouseLeave:function(){B(!1),_(!1)},isMyMessage:p,children:(0,v.jsxs)(re,{isDarkMode:O,isMyMessage:!1,isMobile:L,className:d.own_reactions&&d.own_reactions.length?"own-reaction":"",children:[(0,v.jsx)(ae,{isMyMessage:!1,children:(0,v.jsxs)(se,{isDarkMode:O,isMyMessage:!1,isMobile:L,children:[d.pinned&&(0,v.jsx)(E.CE,{user:d.pinned_by.name}),(0,v.jsxs)("div",{children:[(0,v.jsx)(ne,{topMessage:D,pinned:d.pinned,children:(0,v.jsx)(E.qE,{marginTop:0,size:40,name:null===d||void 0===d||null===(e=d.user)||void 0===e?void 0:e.name,image:null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.image,handleClick:$})}),d&&(0,v.jsx)(le,{isMyMessage:!1,isTopMessage:D,children:(0,v.jsx)(c.YI,{message:d,isMyMessage:!1,showName:D,unsafeHTML:!0,isThreadMessage:!1})})]}),(0,v.jsx)(ce,{showQuote:null===(n=d.quoted_message)||void 0===n?void 0:n.id,children:(null===(r=d.quoted_message)||void 0===r?void 0:r.id)&&(0,v.jsx)(c.yw,{isMessageList:!0,isDarkMode:O,isReply:!1,message:d.quoted_message})}),Z&&M&&(0,v.jsx)(ee.j,{handleReaction:k,detailedView:!0,reaction_counts:d.reaction_counts||void 0,latest_reactions:d.latest_reactions,own_reactions:d.own_reactions,ref:o}),Z&&(0,v.jsx)(oe,{isMyMessage:p,children:(0,v.jsx)(c.PA,{isMyMessage:p,isReply:m,message:d,handleDelete:f,handleThread:w,toggleQuote:function(){z(d)},handleEdit:x,toogleReaction:function(){return _(!M)},handlePinned:de})})]})}),G&&(0,v.jsx)(te.Y,{message:d,reactions:null===d||void 0===d?void 0:d.latest_reactions,reactionCounts:(null===d||void 0===d?void 0:d.reaction_counts)||void 0,isMyMessage:!1}),!F&&(null===d||void 0===d?void 0:d.reply_count)>0&&(0,v.jsx)(c.gk,{isMyMessage:!1,repliesCount:null===d||void 0===d?void 0:d.reply_count,handleClick:w,participants:null===d||void 0===d?void 0:d.thread_participants})]})})},ue=l.memo(de),pe=function(){return(0,v.jsx)(z.$,{Message:ue,maxNumberOfFiles:3,DateSeparator:c._U,children:(0,v.jsxs)(R.R,{children:[(0,v.jsx)(G.r,{}),(0,v.jsx)(H.R,{Input:$e,mentionQueryParams:{options:{limit:1e3}}}),(0,v.jsx)($.j,{Input:ct,fullWidth:!0})]})})},me=n(58533),fe=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-aizlpm-0"})(["display:flex;align-items:center;justify-content:center;height:100%;"]),he=u.ZP.div.withConfig({displayName:"style__DirectChannelsContainer",componentId:"sc-aizlpm-1"})(["height:100%;overflow-y:scroll;background:",";"],(function(e){return e.isDarkMode?"var(--primary-color-dm)":"var(--primary-color)"})),ve=u.ZP.span.withConfig({displayName:"style__Span",componentId:"sc-aizlpm-2"})(["color:",";"],(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--secondary-color)"})),ge=function(e){var t=e.client,n=e.filters,r=e.sort,o=e.opts,i=(0,C.vs)(),a=(0,h.T)().t,s=(0,d.Yx)(t,n||{},r||{},o||{limit:6}),l=s.channels,u=s.setChannels,p=s.loadNextPage,m=s.hasNextPage,f=s.status;return(0,d.vy)(u),(0,d.au)(u),(0,d.TF)(u),(0,d._X)(u),(0,d.h3)(u),f.error?(0,v.jsx)(fe,{children:(0,v.jsx)(ve,{isDarkMode:i,children:a("chat.failedRetry")})}):0===l.length?(0,v.jsx)(fe,{children:(0,v.jsx)(ve,{isDarkMode:i,children:a("chat.emptyDirectMessages")})}):(0,v.jsx)(he,{isDarkMode:i,id:"scrollableDiv",children:(0,v.jsx)(me.Z,{dataLength:l.length,hasMore:m,next:p,loader:(0,v.jsx)("span",{children:"cargando..."}),scrollableTarget:"scrollableDiv",children:l.map((function(e,n){return(0,v.jsx)(c.RQ,{channel:e,client:t},n)}))})})},xe=n(17157),be=n(87029),ye=n(21707),ke=n(69119),we=u.ZP.div.withConfig({displayName:"style__ContainerMentions",componentId:"sc-d7wqsx-0"})(["position:relative;> .p-listbox{height:200px !important;background:#27282d;border:0px solid transparent !important;.p-listbox-list-wrapper{height:200px !important;font-size:14px !important;&::-webkit-scrollbar{width:8px;background:#2e2f36;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> .p-listbox-list > .p-listbox-item{color:#bebebe !important;> span{position:absolute;top:12px;left:56px;}}> .p-listbox-list > .p-listbox-item:hover{background-color:#2e2f36 !important;}}> .p-listbox-header{color:#bebebe !important;background:#27282d;> div > input{background:#2e2f36;color:#bebebe !important;border:0px solid transparent;}> div > .p-inputtext:enabled:focus{box-shadow:none;}}}"],(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"})),je=u.ZP.div.withConfig({displayName:"style__InputTextarea",componentId:"sc-d7wqsx-1"})(["border:solid 1px "," !important;> .p-editor-container{width:100%;position:relative;> .p-editor-content{border:0px solid transparent;border-bottom:solid 1px ",";.ql-editor.ql-blank::before{left:16px !important;}.ql-editor{background:"," !important;font-family:var(--font);min-height:56px;height:56px;color:#bebebe;font-size:14px;padding:16px;border-radius:4px 4px 0px 0px;resize:none;max-height:400px !important;&::-webkit-scrollbar{display:none;}> p > code{display:block;border-radius:0;overflow:auto;}> p a{color:"," !important;}}}> .p-editor-toolbar{background:#2b2c32;border:0px solid transparent;border-radius:0px 0px 4px 4px;> .ql-formats{display:inline-flex;}}}"],(function(e){return e.isActive?e.isDarkMode?"var(--send-button-dm)":"var(--send-button)":"transparent"}),(function(e){return e.isDarkMode?"var(--input-border-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--input-textarea-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"})),Me=u.ZP.div.withConfig({displayName:"style__InputBottom",componentId:"sc-d7wqsx-2"})(["display:flex;align-items:center;justify-content:flex-start;width:100%;border-bottom-left-radius:5px;border-bottom-right-radius:5px;"]),Ce=u.ZP.div.withConfig({displayName:"style__FirstContainerButtons",componentId:"sc-d7wqsx-3"})(["flex-flow:wrap;place-content:flex-start;flex:1;> button.hover-false > svg > path,button.hover-false > svg > line,button.hover-false > svg > polyline{stroke:#bebebe !important;}> button.hover-true > svg > path,button.hover-true > svg > line,button.hover-true > svg > polyline{stroke:#eaff6a !important;}> button > svg > path,button.active-state-true > svg > path,button.active-state-true > svg > line,button.active-state-true > svg > polyline{stroke:#eaff6a !important;}button.send-message > svg > path{stroke:"," !important;}> button > svg > path.ql-fill,button > svg > path.ql-stroke.ql-thin{stroke:#bebebe !important;}button.ql-emoji{> svg{display:inline-block;position:absolute;top:0;left:0;}}label{cursor:pointer;margin:8px;width:24px;height:24px;> button{vertical-align:middle;position:absolute !important;width:100% !important;opacity:0;z-index:9;> svg{display:none;}}}label:nth-child(9){margin-left:24px;}svg{vertical-align:middle;}span{vertical-align:middle;color:#bebebe;font-size:14px;font-family:var(--font);margin-left:4px;}> button > svg > path.ql-fill,button > svg > path.ql-stroke.ql-thin{stroke:#bebebe !important;}button.ql-link{border-right:2px solid #393b43;padding-right:12px;}.send-message{margin-left:16px;flex:1 !important;> svg{float:right !important;transform:rotate(40deg);}}.rfu-file-upload-button{width:24px;height:100%;position:absolute;top:0;left:0;z-index:999;> label{svg{position:absolute;opacity:0;}}}.rfu-file-upload-button + svg{display:block !important;position:absolute !important;top:0;left:0;width:24px;}"],(function(e){return e.isActive?(e.isDarkMode,"#EAFF6A"):"#BEBEBE"})),_e=u.ZP.div.withConfig({displayName:"style__SecondContainerButtons",componentId:"sc-d7wqsx-4"})(["width:auto;"]),Ee=u.ZP.div.withConfig({displayName:"style__ButtonCancelEdit",componentId:"sc-d7wqsx-5"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;z-index:9999;font-size:16px;padding:10px 15px 0px 15px;color:",";cursor:pointer;"],(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-dm)":"var(--button-cancel-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-text-dm)":"var(--button-cancel-modal-text)")})),Se=u.ZP.div.withConfig({displayName:"style__MaxLengthContainer",componentId:"sc-d7wqsx-6"})(["position:absolute;top:40%;right:32px;background:red;padding:3px;border-radius:4px;font-size:14px;color:white;"]),De=u.ZP.div.withConfig({displayName:"style__ContainerInput",componentId:"sc-d7wqsx-7"})(["position:relative;display:flex;flex-direction:column;background:",";padding:",";width:100%;> div > .team-message-input__input{> .rfu-image-previewer{background:",";}> .rfu-file-previewer{margin:0px;background:",";> ol{background:",";}}}> .team-message-input__button{position:absolute;right:58px;}"],(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--background-input)"}),(function(e){return e.checkMobile?"0px":"16px 16px 24px 16px"}),(function(e){return e.isDarkMode?"var(--input-bottom-color-dm);":"var(--input-bottom-color)"}),(function(e){return e.isDarkMode?"var(--input-bottom-color-dm);":"var(--input-bottom-color)"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--unactive-action)"})),qe=u.ZP.div.withConfig({displayName:"style__ContainerModal",componentId:"sc-d7wqsx-8"})(["position:relative;"]),Ne=u.ZP.div.withConfig({displayName:"style__FormGroup",componentId:"sc-d7wqsx-9"})(["display:flex;flex-direction:column;margin:15px 10px;> label{margin-bottom:8px;}"]),Ie=u.ZP.div.withConfig({displayName:"style__Title",componentId:"sc-d7wqsx-10"})(["font-family:var(--font);font-weight:bold;font-size:25px;line-height:24px;margin-left:15px;margin-bottom:35px;color:#333333;color:",";"],(function(e){return"".concat(e.isDarkMode?"var(--title-modal-dm)":"var(--title-modal)")})),Ae=u.ZP.input.withConfig({displayName:"style__Input",componentId:"sc-d7wqsx-11"})(["cursor:pointer;padding:8px 12px;outline:none;"]),Pe=u.ZP.label.withConfig({displayName:"style__Label",componentId:"sc-d7wqsx-12"})(["color:",";"],(function(e){return"".concat(e.isDarkMode?"var(--title-modal-dm)":"var(--title-modal)")})),Te=u.ZP.div.withConfig({displayName:"style__ButtonModalCancelar",componentId:"sc-d7wqsx-13"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;margin-right:5px;margin-top:15px;z-index:9999;font-size:16px;padding:10px 15px 0px 15px;color:",";&:hover{border:1px solid #333333;cursor:pointer;}"],(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-dm)":"var(--button-cancel-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-text-dm)":"var(--button-cancel-modal-text)")})),Ze=u.ZP.div.withConfig({displayName:"style__ButtonModalAceptar",componentId:"sc-d7wqsx-14"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;margin-top:15px;z-index:9999;font-size:16px;padding:10px 15px 0px 15px;color:",";&:hover{border:1px solid #333333;cursor:pointer;}"],(function(e){return"".concat(e.isDarkMode?"var(--button-accept-modal-dm)":"var(--button-accept-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-accept-modal-text-dm)":"var(--button-accept-modal-text)")})),Be=n(73386),Le=n(50036),Fe=n(5152),Oe=n(37315),ze=n(20247),Re=n(55733);function Ge(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $e=function(){var e,t=(0,Fe.default)((function(){return n.e(127).then(n.t.bind(n,2138,23))}),{loadableGenerated:{webpack:function(){return[2138]},modules:["../components/Organisms/MessageInput/index.js -> emoji-picker-react"]}}),r=new Re,o=(0,be.JN)(),a=o.channel,d=o.thread,u=o.quotedMessage,p=(0,ye.Nc)(),m=(0,l.useState)(null===(e=p.parent)||void 0===e?void 0:e.id)[0],f=(0,b.mx)().client,g=new Le.Z({strikeDelimiter:"~~",preformattedCode:!0}),x=(0,l.useState)(!1),y=x[0],k=x[1],w=(0,C.vs)(),j=(0,C.tq)(),M=(0,h.T)().t,_=(0,l.useState)(!1),S=_[0],q=_[1],N=(0,l.useState)(""),I=N[0],A=N[1],P=(0,l.useState)(!1),T=P[0],Z=P[1],B=(0,l.useState)(!1),L=B[0],F=B[1],O=(0,l.useState)()[0],z=(0,l.useState)(null),R=z[0],G=z[1],H=(0,l.useState)(null),$=H[0],U=H[1],V=(0,l.useState)(null),J=V[0],Y=V[1],Q=(0,l.useState)(["saving","sending","deleting","getting"])[0],K=(0,l.useState)(!1),W=K[0],X=K[1],ee=(0,l.useState)(!1),te=ee[0],ne=ee[1],re=(0,l.useState)(!1),oe=re[0],ie=re[1],ae=(0,l.useState)(!1),se=ae[0],le=ae[1],ce=(0,l.useState)(!1),de=ce[0],ue=ce[1],pe=(0,l.useState)(!1),me=pe[0],fe=pe[1],he=(0,l.useState)(!1),ve=he[0],ge=he[1],He=(0,l.useState)(!1),$e=He[0],Ue=He[1],Ve=(0,l.useState)(!1),Je=Ve[0],Ye=Ve[1],Qe=(0,l.useState)(!1),Ke=Qe[0],We=Qe[1],Xe=(0,l.useState)(!1),et=Xe[0],tt=Xe[1],nt=(0,l.useState)(!1),rt=nt[0],ot=nt[1],it=(0,l.useState)(!1),at=it[0],st=it[1],lt=(0,l.useState)(!1),ct=lt[0],dt=lt[1],ut=(0,l.useState)(!1),pt=ut[0],mt=ut[1],ft=(0,l.useState)(!1),ht=ft[0],vt=ft[1],gt=(0,l.useState)(!1),xt=gt[0],bt=gt[1],yt=(0,l.useState)("#BEBEBE")[0],kt=(0,l.useState)(""),wt=kt[0],jt=kt[1],Mt=(0,l.useState)(""),Ct=Mt[0],_t=Mt[1],Et=(0,l.useState)(!1),St=Et[0],Dt=Et[1],qt={background:w?"var(--bg-modal-dm)":"var(--bg-modal)",width:j?"100%":"43vw"},Nt=Object.values(a.state.members).filter((function(e){return e.user.id!==f.userID}));(0,l.useEffect)((function(){var e,t,n=document.querySelector(".p-editor-toolbar"),r=document.querySelector(".p-editor-content");n.remove(),r.after(n),setTimeout((function(){var e,t=document.querySelector(".ql-editor");try{new ze.Z(".str-chat__container",{url:zt})}catch(n){console.error(n)}null!==p&&void 0!==p&&null!==(e=p.message)&&void 0!==e&&e.isEditing||Tt(Q[3]),Zt(t)}),500),null!==(e=p.message)&&void 0!==e&&e.quoted_message&&(q(p.message.quoted_message),delete p.message.quoted_message),null!==p&&void 0!==p&&null!==(t=p.message)&&void 0!==t&&t.cid&&A(p.message.html)}),[]);var It=function(){tt(!1),mt(!1),Ye(!1),fe(!1),ne(!1),le(!1),st(!1)},At=function(){Dt(!1),jt(""),_t("")},Pt=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.clipboardData.files.length&&p.onPaste(t),pt&&setTimeout((function(){var e=document.querySelector(".ql-editor"),t=Array.from(e.childNodes).length;Array.from(e.childNodes).forEach((function(e,n){e.classList.remove("ql-syntax"),e.innerHTML="<code>".concat(e.innerHTML,"</code>"),n===t-1&&"<code><br></code>"===e.innerHTML&&(e.innerHTML="")}))}),50);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt=function(e){var t,n,r,o=JSON.parse(window.localStorage.getItem("drafts"))||[],i=o.some((function(e){return e.cid===a.cid})),s=o.find((function(e){return e.cid===a.cid})),l=null===(t=document.querySelector(".ql-editor"))||void 0===t||null===(n=t.childNodes[0])||void 0===n?void 0:n.innerHTML;(e===Q[0]&&(i?o.filter((function(e){return e.cid===a.cid?e.message=l:null})):o.push({cid:a.cid,message:l}),window.localStorage.setItem("drafts",JSON.stringify(o))),e===Q[1]||e===Q[2])&&(o=null===(r=o)||void 0===r?void 0:r.filter((function(e){return(null===e||void 0===e?void 0:e.cid)!==(null===s||void 0===s?void 0:s.cid)})),window.localStorage.setItem("drafts",JSON.stringify(o)));e===Q[3]&&i&&(A(s.message),Zt())},Zt=function(){try{var e,t=document.querySelector(".ql-editor"),n="",r=Ge(t.children);try{for(r.s();!(e=r.n()).done;){n+=e.value.outerHTML}}catch(a){r.e(a)}finally{r.f()}var o=(i=(i=(i=(i=(i=n).replace(/&nbsp;/g," ")).replace(/<p><br><\/p>/g,"")).replace(/<li><br><\/li>/g,"")).replace(/<code><\/code>/g,""),i=se?(i=(i=(i=i.replace(/<li class="ql-indent-1">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<li class="ql-indent-2">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<li class="ql-indent-3">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<\/ol><ol>/g,""):(i=(i=i.replace(/<li class="ql-indent-1">(.*?)<\/li>/g,"<ul><li>$1</li></ul>")).replace(/<li class="ql-indent-2">(.*?)<\/li>/g,"<ul><li>$1</li></ul>")).replace(/<li class="ql-indent-3">(.*?)<\/li>/g,"<ul><li>$1</li></ul>"),g.addRule("strikethrough",{filter:["s","strike"],replacement:function(e){return"~~"+e+"~~"}}),g.addRule("unorderedlist",{filter:["ul"],replacement:function(e){return"<ul>"+e+"</ul>"}}),g.addRule("orderedlist",{filter:["ol"],replacement:function(e){return"<ol>"+e+"</ol>"}}),g.addRule("listitem",{filter:["li"],replacement:function(e){return"<li>"+e+"</li>"}}),g.addRule("code",{filter:["code"],replacement:function(e){return"```"+e+"```"}}),g.keep(["u"]),g.turndown(i));p.setText(o)}catch(s){console.error(s)}var i},Bt=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){var e=document.querySelector(".ql-editor");if(e.style.height=(e.children[0].clientHeight+20)*e.children.length+"px",!t.htmlValue)return Y(0),void Tt(Q[1]);A(t.htmlValue),Tt(Q[0]),Zt(e);var n,r=Ge(t.delta.ops);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.insert&&"@"===o.insert&&F(!0),void 0!=o.retain&&G(o.retain),void 0!=o.delete&&R>1&&G(R-1)}}catch(i){r.e(i)}finally{r.f()}U(!1),Ot(),F(!1),Y(t.textValue.length),k(!(J>5e3))}),100);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(e){It(),p.handleSubmit(e),document.querySelector(".ql-editor").innerHTML="",Tt(Q[1])},Ft=function(e,t,n){return[e.slice(0,n),t,e.slice(n)].join("")},Ot=function(){Z(!1),X(!1)},zt=function(e){var t,n=e?e[0]:null;null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&t.includes("svg")?r.file(n.name,n).generateAsync({type:"Blob"}).then((function(e){var t,r="".concat(null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.split(".")[0],".zip"),o=new File([e],r,{type:e.type});p.uploadNewFiles([o])})):p.uploadNewFiles(e)},Rt=function(){p.clearEditingState()},Gt=function(){var e;return(0,v.jsxs)(Me,{isDarkMode:w,colorFill:yt,children:[(0,v.jsxs)(Ce,{isActive:y,isDarkMode:w,className:"team-message-input__icons",children:[(0,v.jsx)("button",{onClick:function(){return tt(!et)},onMouseEnter:function(){T||ot(!0)},onMouseLeave:function(){T||ot(!1)},className:"ql-bold hover-".concat(rt," ").concat(et?"ql-active active-state-true":"active-state-false"),"aria-label":"Bold"}),(0,v.jsx)("button",{onClick:function(){return Ye(!Je)},onMouseEnter:function(){T||We(!0)},onMouseLeave:function(){T||We(!1)},className:"ql-italic hover-".concat(Ke," ").concat(Je?"ql-active active-state-true":"active-state-false"),"aria-label":"Italic"}),(0,v.jsx)("button",{onClick:function(){return st(!at)},onMouseEnter:function(){T||dt(!0)},onMouseLeave:function(){T||dt(!1)},className:"hover-".concat(ct," ").concat(at?"ql-underline ql-active active-state-true":"ql-underline active-state-false"),"aria-label":"Underline"}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){return fe(!me)},onMouseEnter:function(){T||ge(!0)},onMouseLeave:function(){T||ge(!1)},className:"ql-strike","aria-label":"StrikeThrought"}),(0,v.jsx)(E.Bc,{color:me||ve?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){ne(!te),le(!1)},onMouseEnter:function(){T||ie(!0)},onMouseLeave:function(){T||ie(!1)},className:"ql-list",value:"bullet","aria-label":"Unordered List"}),(0,v.jsx)(E.JZ,{color:te||oe?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){le(!se),ne(!1)},onMouseEnter:function(){T||ue(!0)},onMouseLeave:function(){T||ue(!1)},className:"ql-list",value:"ordered","aria-label":"Ordered List"}),(0,v.jsx)(E.GX,{color:se||de?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){return mt(!pt)},onMouseEnter:function(){T||vt(!0)},onMouseLeave:function(){T||vt(!1)},className:"ql-code","aria-label":"Code"}),(0,v.jsx)(E.Oi,{color:pt||ht?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{className:"ql-link",onClick:function(){return Dt(!0)},onMouseEnter:function(){T||Ue(!0)},onMouseLeave:function(){T||Ue(!1)}}),(0,v.jsx)(E.rU,{color:$e?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsx)("label",{children:(0,v.jsx)("button",{className:"ql-emoji",onClick:function(e){return function(e){e.preventDefault(),T?Ot():Z(!0)}(e)},onMouseEnter:function(){T||X(!0)},onMouseLeave:function(){T||X(!1)},children:(0,v.jsx)(E.cu,{className:"emoji","aria-label":"Emoji",color:T||W?"#EAFF6A":"#BEBEBE"})})}),(0,v.jsx)("label",{children:(0,v.jsxs)("button",{className:"ql-clip",onMouseEnter:function(){T||bt(!0)},onMouseLeave:function(){T||bt(!1)},children:[(0,v.jsx)(xe.KH,{handleFiles:zt}),(0,v.jsx)(E.Jz,{color:xt?"#EAFF6A":"#BEBEBE"})]})}),(0,v.jsx)("button",{className:"send-message",onClick:J>5e3?null:Lt,children:(0,v.jsx)(E.c7,{sendButton:y,isDarkMode:w})})]}),(0,v.jsx)(_e,{children:(null===p||void 0===p||null===(e=p.message)||void 0===e?void 0:e.cid)&&(0,v.jsx)(Ee,{isDarkMode:w,onClick:Rt,children:M("chat.cancel")})})]})}(),Ht=function(e){var t=document.createElement("span"),n=document.createElement("strong"),r=document.querySelector(".ql-editor");t.innerText=" @"+e.value.user.name,n.appendChild(t),r.lastElementChild.appendChild(t),F(!1),p.mentioned_users.push(e.value.user)};return(0,v.jsxs)(v.Fragment,{children:[St&&(0,v.jsx)(D.Z,{animation:"fade",customStyles:qt,width:300,height:300,visible:St,onClose:At,children:(0,v.jsxs)(qe,{children:[(0,v.jsx)(Ie,{isDarkMode:w,children:M("chat.addHyperlink")}),(0,v.jsxs)(Ne,{children:[(0,v.jsx)(Pe,{isDarkMode:w,children:M("chat.text")}),(0,v.jsx)(Ae,{isDarkMode:w,type:"text",value:wt,onChange:function(e){jt(e.target.value)}})]}),(0,v.jsxs)(Ne,{children:[(0,v.jsx)(Pe,{isDarkMode:w,children:M("chat.link")}),(0,v.jsx)(Ae,{isDarkMode:w,type:"text",value:Ct,onChange:function(e){_t(e.target.value)}})]}),(0,v.jsx)(Ze,{isDarkMode:w,onClick:function(e){e.preventDefault();var t=document.querySelector(".p-editor-content.ql-container");if(wt&&Ct){var n=document.createElement("a"),r=document.createTextNode(wt);n.appendChild(r),n.title=wt,n.href=Ct,t.children[0].appendChild(n)}At(),t.focus()},children:M("chat.send")}),(0,v.jsx)(Te,{isDarkMode:w,onClick:At,children:M("chat.cancel")})]})}),(0,v.jsx)(De,{isDarkMode:w,className:"team-message-input__wrapper ".concat(!!d&&"thread-open"),onPaste:Pt,children:(0,v.jsxs)(je,{isActive:y,isDarkMode:w,onBlur:function(){T||k(!1)},onClick:function(){k(!(J>5e3))},onKeyDown:function(e){"keydown"!==e.type||13!==e.keyCode||e.shiftKey||Lt(e),"Backspace"!==e.code||null!==e.target.textContent&&0!==e.target.textContent.length||(Tt(Q[1]),A(null),It(),Y(0)),"keydown"===e.type&&"@"===e.key&&(e.preventDefault(),F(!0),setTimeout((function(){document.querySelector(".p-inputtext").focus()}),200)),27===e.keyCode&&(F(!1),Ot()),("click"===e.type&&L||"click"===e.type&&T)&&(F(!1),Ot())},children:[u&&"reply"!=u.type&&(0,v.jsx)(c.yw,{isDarkMode:w,message:u}),S&&(0,v.jsx)(c.yw,{isDarkMode:w,message:S}),L&&(0,v.jsx)(we,{isDarkMode:w,children:(0,v.jsx)(Oe.w,{value:O,onClick:Ht,options:Nt,onChange:Ht,optionLabel:"user.name",itemTemplate:function(e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(E.qE,{name:e.user.name,image:e.user.image}),(0,v.jsx)("span",{children:e.user.name})]})},filter:!0})}),(0,v.jsx)(ke._,{}),(0,v.jsx)(Be.M,{headerTemplate:Gt,value:I,onTextChange:Bt,className:pt?"active-code":"",placeholder:m?M("chat.reply"):"".concat(M("chat.sendMessage")," ").concat(function(){var e,t,n=Object.values(a.state.members).filter((function(e){return e.user.id!==f.userID}));return n.length&&1!==n.length?M("chat.theChannel"):(null===(e=n[0])||void 0===e?void 0:e.user.name)||(null===(t=n[0])||void 0===t?void 0:t.user.id)||"Johnny Blaze"}()),onSelectionChange:function(e){var t;G(null===(t=e.range)||void 0===t?void 0:t.index),U(!0)}}),T&&(0,v.jsx)(t,{disableSkinTonePicker:!0,disableAutoFocus:!0,preload:!0,onEmojiClick:function(e,t){if(R>-1){for(var n=document.querySelector(".ql-editor"),r=n.children.length,o=0,i=0,a=!0;a&&i<r;){var s,l,c,d;if(o+(null===(s=n.children[i])||void 0===s||null===(l=s.outerText)||void 0===l?void 0:l.length)+i>R){var u=n.children[i].outerText,p=t.emoji;n.children[i].outerText=Ft(u,p,R-o-i+($?0:1)),a=!1}o+=null===(c=n.children[i])||void 0===c||null===(d=c.outerText)||void 0===d?void 0:d.length,i++}0===r&&0===o&&(n.children[i].outerText=t.emoji)}Ot()},native:!0}),J>5e3&&(0,v.jsx)(Se,{children:J-5e3})]})})]})},Ue=u.ZP.div.withConfig({displayName:"style__ContainerMentions",componentId:"sc-4ixtl9-0"})(["position:relative;> .p-listbox{height:200px !important;background:#27282d;border:0px solid transparent !important;.p-listbox-list-wrapper{height:200px !important;font-size:14px !important;&::-webkit-scrollbar{width:8px;background:#2e2f36;}&::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}> .p-listbox-list > .p-listbox-item{color:#bebebe !important;> span{position:absolute;top:12px;left:56px;}}> .p-listbox-list > .p-listbox-item:hover{background-color:#2e2f36 !important;}}> .p-listbox-header{color:#bebebe !important;background:#27282d;> div > input{background:#2e2f36;color:#bebebe !important;border:0px solid transparent;}> div > .p-inputtext:enabled:focus{box-shadow:none;}}}"],(function(e){return e.isDarkMode?"var(--scrollbar-scroll-dm)":"var(--background-chat)"})),Ve=u.ZP.div.withConfig({displayName:"style__InputTextarea",componentId:"sc-4ixtl9-1"})(["border:solid 1px "," !important;> .p-editor-container{width:100%;position:relative;> .p-editor-content{border:0px solid transparent;border-bottom:solid 1px ",";.ql-editor.ql-blank::before{left:16px !important;}.ql-editor{background:"," !important;font-family:var(--font);min-height:56px;height:56px;color:#bebebe;font-size:14px;padding:16px;border-radius:4px 4px 0px 0px;resize:none;max-height:400px !important;&::-webkit-scrollbar{display:none;}> p > code{display:block;border-radius:0;overflow:auto;}> p a{color:"," !important;}}}> .p-editor-toolbar{background:#2b2c32;border:0px solid transparent;border-radius:0px 0px 4px 4px;padding:8px 4px;> .ql-formats{display:inline-flex;}}}"],(function(e){return e.isActive?e.isDarkMode?"var(--send-button-dm)":"var(--send-button)":"transparent"}),(function(e){return e.isDarkMode?"var(--input-border-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--input-textarea-color-dm)":"var(--background-chat)"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"})),Je=u.ZP.div.withConfig({displayName:"style__InputBottom",componentId:"sc-4ixtl9-2"})(["display:block;width:100%;border-bottom-left-radius:5px;border-bottom-right-radius:5px;"]),Ye=u.ZP.div.withConfig({displayName:"style__FirstContainerButtons",componentId:"sc-4ixtl9-3"})(["flex-flow:wrap;place-content:flex-start;flex:1;svg > path,svg > line,svg > polyline{stroke-opacity:1 !important;}button{padding:0px 4px;width:24px;}button.hover-false > svg > path,button.hover-false > svg > line,button.hover-false > svg > polyline{stroke:#bebebe !important;}button.hover-true > svg > path,button.hover-true > svg > line,button.hover-true > svg > polyline{stroke:#eaff6a !important;}button.active-state-true > svg > path,button.active-state-true > svg > line,button.active-state-true > svg > polyline{stroke:#eaff6a !important;}button > svg > path.ql-fill,button > svg > path.ql-stroke.ql-thin{stroke:#bebebe !important;}button.ql-underline{border-right:2px solid #393b43;padding-right:16px !important;}.send-message{margin-left:16px;flex:1 !important;> svg{float:right !important;transform:rotate(40deg);}}.menu-format{visibility:visible;display:flex;flex-direction:column;position:absolute;left:16px;bottom:46px;width:190px;background:#2e2f36;box-shadow:0px 4px 2px -2px #232323;label{cursor:pointer;margin:8px 4px;}svg{vertical-align:middle;}button{vertical-align:middle;position:absolute;width:100% !important;opacity:0;> svg{display:none;}}span{vertical-align:middle;color:#bebebe;font-size:14px;font-family:var(--font);margin-left:4px;}}.menu-format.menu-format-hidden{visibility:hidden;}.rfu-file-upload-button{> label{svg{position:absolute;opacity:0;}}}"]),Qe=u.ZP.div.withConfig({displayName:"style__SecondContainerButtons",componentId:"sc-4ixtl9-4"})(["width:auto;"]),Ke=u.ZP.div.withConfig({displayName:"style__ButtonCancelEdit",componentId:"sc-4ixtl9-5"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;z-index:9999;font-size:16px;padding:8px;margin-top:8px;color:",";cursor:pointer;"],(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-dm)":"var(--button-cancel-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-text-dm)":"var(--button-cancel-modal-text)")})),We=u.ZP.div.withConfig({displayName:"style__MaxLengthContainer",componentId:"sc-4ixtl9-6"})(["position:absolute;top:40%;right:32px;background:red;padding:3px;border-radius:4px;font-size:14px;color:white;"]),Xe=u.ZP.div.withConfig({displayName:"style__ContainerInput",componentId:"sc-4ixtl9-7"})(["position:relative;display:flex;flex-direction:column;background:",";padding:",";width:100%;> div > .team-message-input__input{> .rfu-image-previewer{background:",";}> .rfu-file-previewer{margin:0px;background:",";> ol{background:",";}}}> .team-message-input__button{position:absolute;right:58px;}"],(function(e){return e.isDarkMode?"var(--secondary-color-dm)":"var(--background-input)"}),(function(e){return e.checkMobile?"0px":"16px 16px 24px 16px"}),(function(e){return e.isDarkMode?"var(--input-bottom-color-dm);":"var(--input-bottom-color)"}),(function(e){return e.isDarkMode?"var(--input-bottom-color-dm);":"var(--input-bottom-color)"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--unactive-action)"})),et=u.ZP.div.withConfig({displayName:"style__ContainerModal",componentId:"sc-4ixtl9-8"})(["position:relative;"]),tt=u.ZP.div.withConfig({displayName:"style__FormGroup",componentId:"sc-4ixtl9-9"})(["display:flex;flex-direction:column;margin:15px 10px;> label{margin-bottom:8px;}"]),nt=u.ZP.div.withConfig({displayName:"style__Title",componentId:"sc-4ixtl9-10"})(["font-family:var(--font);font-weight:bold;font-size:25px;line-height:24px;margin-left:15px;margin-bottom:35px;color:#333333;color:",";"],(function(e){return"".concat(e.isDarkMode?"var(--title-modal-dm)":"var(--title-modal)")})),rt=u.ZP.input.withConfig({displayName:"style__Input",componentId:"sc-4ixtl9-11"})(["cursor:pointer;padding:8px 12px;outline:none;"]),ot=u.ZP.label.withConfig({displayName:"style__Label",componentId:"sc-4ixtl9-12"})(["color:",";"],(function(e){return"".concat(e.isDarkMode?"var(--title-modal-dm)":"var(--title-modal)")})),it=u.ZP.div.withConfig({displayName:"style__ButtonModalCancelar",componentId:"sc-4ixtl9-13"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;margin-right:5px;margin-top:15px;z-index:9999;font-size:16px;padding:10px 15px 0px 15px;color:",";&:hover{border:1px solid #333333;cursor:pointer;}"],(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-dm)":"var(--button-cancel-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-cancel-modal-text-dm)":"var(--button-cancel-modal-text)")})),at=u.ZP.div.withConfig({displayName:"style__ButtonModalAceptar",componentId:"sc-4ixtl9-14"})(["font-family:var(--font);display:flex;justify-content:center;height:40px;background:",";border-radius:3px;border:1px solid transparent;float:right;margin-top:15px;z-index:9999;font-size:16px;padding:10px 15px 0px 15px;color:",";&:hover{border:1px solid #333333;cursor:pointer;}"],(function(e){return"".concat(e.isDarkMode?"var(--button-accept-modal-dm)":"var(--button-accept-modal)")}),(function(e){return"".concat(e.isDarkMode?"var(--button-accept-modal-text-dm)":"var(--button-accept-modal-text)")}));function st(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(){var e=(0,Fe.default)((function(){return n.e(127).then(n.t.bind(n,2138,23))}),{loadableGenerated:{webpack:function(){return[2138]},modules:["../components/Organisms/MessageThreadInput/index.js -> emoji-picker-react"]}}),t=(0,be.JN)(),r=t.channel,o=t.thread,a=(0,ye.Nc)(),d=(0,be.JN)().quotedMessage,u=d,p=(0,b.mx)().client,m=new Le.Z({strikeDelimiter:"~~",preformattedCode:!0}),f=(0,l.useState)(!1),g=f[0],x=f[1],y=(0,C.vs)(),k=(0,C.tq)(),w=(0,h.T)().t,j=(0,l.useState)(!1),M=j[0],_=j[1],S=(0,l.useState)(""),q=S[0],N=S[1],I=(0,l.useState)(!1),A=I[0],P=I[1],T=(0,l.useState)(!1),Z=T[0],B=T[1],L=(0,l.useState)()[0],F=(0,l.useState)(null),O=F[0],z=F[1],R=(0,l.useState)(null),G=R[0],H=R[1],$=(0,l.useState)(null),U=$[0],V=$[1],J=(0,l.useState)(["saving","sending","deleting","getting"])[0],Y=(0,l.useState)(!1),Q=Y[0],K=Y[1],W=(0,l.useState)(!1),X=W[0],ee=W[1],te=(0,l.useState)(!1),ne=te[0],re=te[1],oe=(0,l.useState)(!1),ie=oe[0],ae=oe[1],se=(0,l.useState)(!1),le=se[0],ce=se[1],de=(0,l.useState)(!1),ue=de[0],pe=de[1],me=(0,l.useState)(!1),fe=me[0],he=me[1],ve=(0,l.useState)(!1),ge=ve[0],we=ve[1],je=(0,l.useState)(!1),Me=je[0],Ce=je[1],_e=(0,l.useState)(!1),Ee=_e[0],Se=_e[1],De=(0,l.useState)(!1),qe=De[0],Ne=De[1],Ie=(0,l.useState)(!1),Ae=Ie[0],Pe=Ie[1],Te=(0,l.useState)(!1),Ze=Te[0],Re=Te[1],Ge=(0,l.useState)(!1),He=Ge[0],$e=Ge[1],lt=(0,l.useState)(!1),ct=lt[0],dt=lt[1],ut=(0,l.useState)(!1),pt=ut[0],mt=ut[1],ft=(0,l.useState)(!1),ht=ft[0],vt=ft[1],gt=(0,l.useState)(!1),xt=gt[0],bt=gt[1],yt=(0,l.useState)(!1),kt=yt[0],wt=yt[1],jt=(0,l.useState)("#BEBEBE")[0],Mt=(0,l.useState)(""),Ct=Mt[0],_t=Mt[1],Et=(0,l.useState)(""),St=Et[0],Dt=Et[1],qt=(0,l.useState)(!1),Nt=qt[0],It=qt[1],At={background:y?"var(--bg-modal-dm)":"var(--bg-modal)",width:k?"100%":"43vw"},Pt=Object.values(r.state.members).filter((function(e){return e.user.id!==p.userID}));(0,l.useEffect)((function(){var e,t,n=document.querySelector(".str-chat__thread .p-editor-toolbar"),r=document.querySelector(".str-chat__thread .p-editor-content");n.remove(),r.after(n),setTimeout((function(){var e,t=document.querySelector(".str-chat__thread .ql-editor");try{new ze.Z(".str-chat__container",{url:a.uploadNewFiles})}catch(n){console.error(n)}null!==a&&void 0!==a&&null!==(e=a.message)&&void 0!==e&&e.isEditing||Lt(J[3]),Ft(t)}),500),null!==(e=a.message)&&void 0!==e&&e.quoted_message&&(_(a.message.quoted_message),delete a.message.quoted_message),null!==a&&void 0!==a&&null!==(t=a.message)&&void 0!==t&&t.cid&&N(a.message.html)}),[]);var Tt=function(){Ne(!1),dt(!1),Ce(!1),pe(!1),ee(!1),ae(!1),Re(!1)},Zt=function(){It(!1),_t(""),Dt("")},Bt=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.clipboardData.files.length&&a.onPaste(t),ct&&setTimeout((function(){var e=document.querySelector(".str-chat__thread .ql-editor"),t=Array.from(e.childNodes).length;Array.from(e.childNodes).forEach((function(e,n){e.classList.remove("ql-syntax"),e.innerHTML="<code>".concat(e.innerHTML,"</code>"),n===t-1&&"<code><br></code>"===e.innerHTML&&(e.innerHTML="")}))}),50);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(e){var t,n,o,i=JSON.parse(window.localStorage.getItem("drafts"))||[],a=i.some((function(e){return e.cid===r.cid})),s=i.find((function(e){return e.cid===r.cid})),l=null===(t=document.querySelector(".ql-editor"))||void 0===t||null===(n=t.childNodes[0])||void 0===n?void 0:n.innerHTML;(e===J[0]&&(a?i.filter((function(e){return e.cid===r.cid?e.message=l:null})):i.push({cid:r.cid,message:l}),window.localStorage.setItem("drafts",JSON.stringify(i))),e===J[1]||e===J[2])&&(i=null===(o=i)||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.cid)!==(null===s||void 0===s?void 0:s.cid)})),window.localStorage.setItem("drafts",JSON.stringify(i)));e===J[3]&&a&&(N(s.message),Ft())},Ft=function(){try{var e,t=document.querySelector(".str-chat__thread .ql-editor"),n="",r=st(t.children);try{for(r.s();!(e=r.n()).done;){n+=e.value.outerHTML}}catch(s){r.e(s)}finally{r.f()}var o=(i=(i=(i=(i=(i=n).replace(/&nbsp;/g," ")).replace(/<p><br><\/p>/g,"")).replace(/<li><br><\/li>/g,"")).replace(/<code><\/code>/g,""),i=ie?(i=(i=(i=i.replace(/<li class="ql-indent-1">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<li class="ql-indent-2">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<li class="ql-indent-3">(.*?)<\/li>/g,"<ol><li>$1</li></ol>")).replace(/<\/ol><ol>/g,""):(i=(i=i.replace(/<li class="ql-indent-1">(.*?)<\/li>/g,"<ul><li>$1</li></ul>")).replace(/<li class="ql-indent-2">(.*?)<\/li>/g,"<ul><li>$1</li></ul>")).replace(/<li class="ql-indent-3">(.*?)<\/li>/g,"<ul><li>$1</li></ul>"),m.addRule("strikethrough",{filter:["s","strike"],replacement:function(e){return"~~"+e+"~~"}}),m.addRule("unorderedlist",{filter:["ul"],replacement:function(e){return"<ul>"+e+"</ul>"}}),m.addRule("orderedlist",{filter:["ol"],replacement:function(e){return"<ol>"+e+"</ol>"}}),m.addRule("listitem",{filter:["li"],replacement:function(e){return"<li>"+e+"</li>"}}),m.addRule("code",{filter:["code"],replacement:function(e){return"```"+e+"```"}}),m.keep(["u"]),m.turndown(i));a.setText(o)}catch(s){console.error(s)}var i},Ot=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){var e=document.querySelector(".str-chat__thread .ql-editor");if(e.style.height=(e.children[0].clientHeight+20)*e.children.length+"px",!t.htmlValue)return V(0),void Lt(J[1]);N(t.htmlValue),Lt(J[0]),Ft(e);var n,r=st(t.delta.ops);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.insert&&"@"===o.insert&&B(!0),void 0!=o.retain&&z(o.retain),void 0!=o.delete&&O>1&&z(O-1)}}catch(i){r.e(i)}finally{r.f()}H(!1),Gt(),B(!1),V(t.textValue.length),x(!(U>5e3))}),100);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zt=function(e){Tt(),a.handleSubmit(e),document.querySelector(".str-chat__thread .ql-editor").innerHTML="",Lt(J[1])},Rt=function(e,t,n){return[e.slice(0,n),t,e.slice(n)].join("")},Gt=function(){P(!1),K(!1)},Ht=function(){a.clearEditingState()},$t=function(){var e;return(0,v.jsxs)(Je,{isDarkMode:y,colorFill:jt,children:[(0,v.jsxs)(Ye,{isDarkMode:y,className:"team-message-input__icons",children:[(0,v.jsx)("button",{onClick:function(){return wt(!kt)},onMouseEnter:function(){A||bt(!0)},onMouseLeave:function(){A||bt(!1)},"aria-label":"Plus",children:(0,v.jsx)(E.jx,{color:kt||xt?"#EAFF6A":"#BEBEBE"})}),(0,v.jsx)("button",{onClick:function(){return Ne(!qe)},onMouseEnter:function(){A||Pe(!0)},onMouseLeave:function(){A||Pe(!1)},className:"ql-bold hover-".concat(Ae," ").concat(qe?"ql-active active-state-true":"active-state-false"),"aria-label":"Bold"}),(0,v.jsx)("button",{onClick:function(){return Ce(!Me)},onMouseEnter:function(){A||Se(!0)},onMouseLeave:function(){A||Se(!1)},className:"ql-italic hover-".concat(Ee," ").concat(Me?"ql-active active-state-true":"active-state-false"),"aria-label":"Italic"}),(0,v.jsx)("button",{onClick:function(){return Re(!Ze)},onMouseEnter:function(){A||$e(!0)},onMouseLeave:function(){A||$e(!1)},className:"hover-".concat(He," ").concat(Ze?"ql-underline ql-active active-state-true":"ql-underline active-state-false"),"aria-label":"Underline"}),(0,v.jsxs)("div",{className:kt?"menu-format":"menu-format menu-format-hidden",onClick:function(){return wt(!1)},children:[(0,v.jsxs)("label",{onMouseEnter:function(){return he(!0)},onMouseLeave:function(){return he(!1)},children:[(0,v.jsx)("button",{onClick:function(){return pe(!ue)},className:"ql-strike","aria-label":"StrikeThrought"}),(0,v.jsx)(E.Bc,{color:ue||fe?"#EAFF6A":"#BEBEBE"}),(0,v.jsx)("span",{style:{color:ue||fe?"#EAFF6A":"#BEBEBE"},children:w("chat.strikeThrough")})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){ee(!X),ae(!1)},onMouseEnter:function(){return re(!0)},onMouseLeave:function(){return re(!1)},className:"ql-list",value:"bullet","aria-label":"Unordered List"}),(0,v.jsx)(E.JZ,{color:X||ne?"#EAFF6A":"#BEBEBE"}),(0,v.jsx)("span",{style:{color:X||ne?"#EAFF6A":"#BEBEBE"},children:w("chat.bulletList")})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){ae(!ie),ee(!1)},onMouseEnter:function(){return ce(!0)},onMouseLeave:function(){return ce(!1)},className:"ql-list",value:"ordered","aria-label":"Ordered List"}),(0,v.jsx)(E.GX,{color:ie||le?"#EAFF6A":"#BEBEBE"}),(0,v.jsx)("span",{style:{color:ie||le?"#EAFF6A":"#BEBEBE"},children:w("chat.orderedList")})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){return dt(!ct)},onMouseEnter:function(){return mt(!0)},onMouseLeave:function(){return mt(!1)},className:"ql-code","aria-label":"Code"}),(0,v.jsx)(E.Oi,{color:ct||pt?"#EAFF6A":"#BEBEBE"}),(0,v.jsx)("span",{style:{color:ct||pt?"#EAFF6A":"#BEBEBE"},children:w("chat.code")})]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("button",{onClick:function(){return It(!0)},onMouseEnter:function(){A||we(!0)},onMouseLeave:function(){A||we(!1)}}),(0,v.jsx)(E.rU,{color:ge?"#EAFF6A":"#BEBEBE"}),(0,v.jsx)("span",{style:{color:ge?"#EAFF6A":"#BEBEBE"},children:w("chat.link")})]})]}),(0,v.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),A?Gt():P(!0)}(e)},onMouseEnter:function(){A||K(!0)},onMouseLeave:function(){A||K(!1)},children:(0,v.jsx)(E.cu,{className:"emoji","aria-label":"Emoji",color:A||Q?"#EAFF6A":"#BEBEBE"})}),(0,v.jsxs)("button",{onMouseEnter:function(){A||vt(!0)},onMouseLeave:function(){A||vt(!1)},children:[(0,v.jsx)(xe.KH,{handleFiles:a.uploadNewFiles}),(0,v.jsx)(E.Jz,{color:ht?"#EAFF6A":"#BEBEBE"})]}),(0,v.jsx)("button",{className:"send-message",onClick:U>5e3?null:zt,children:(0,v.jsx)(E.c7,{sendButton:g,isDarkMode:y})})]}),(0,v.jsx)(Qe,{children:(null===a||void 0===a||null===(e=a.message)||void 0===e?void 0:e.cid)&&(0,v.jsx)(Ke,{isDarkMode:y,onClick:Ht,children:w("chat.cancel")})})]})}(),Ut=function(e){var t=document.createElement("span"),n=document.createElement("strong"),r=document.querySelector(".str-chat__thread .ql-editor");t.innerText=" @"+e.value.user.name,n.appendChild(t),r.lastElementChild.appendChild(t),B(!1),a.mentioned_users.push(e.value.user)};return(0,v.jsxs)(v.Fragment,{children:[Nt&&(0,v.jsx)(D.Z,{animation:"fade",customStyles:At,width:300,height:300,visible:Nt,onClose:Zt,children:(0,v.jsxs)(et,{children:[(0,v.jsx)(nt,{isDarkMode:y,children:w("chat.addHyperlink")}),(0,v.jsxs)(tt,{children:[(0,v.jsx)(ot,{isDarkMode:y,children:w("chat.text")}),(0,v.jsx)(rt,{isDarkMode:y,type:"text",value:Ct,onChange:function(e){_t(e.target.value)}})]}),(0,v.jsxs)(tt,{children:[(0,v.jsx)(ot,{isDarkMode:y,children:w("chat.link")}),(0,v.jsx)(rt,{isDarkMode:y,type:"text",value:St,onChange:function(e){Dt(e.target.value)}})]}),(0,v.jsx)(at,{isDarkMode:y,onClick:function(e){e.preventDefault();var t=document.querySelector(".str-chat__thread .p-editor-content.ql-container");if(Ct&&St){var n=document.createElement("a"),r=document.createTextNode(Ct);n.appendChild(r),n.title=Ct,n.href=St,t.children[0].appendChild(n)}Zt(),t.focus()},children:w("chat.send")}),(0,v.jsx)(it,{isDarkMode:y,onClick:Zt,children:w("chat.cancel")})]})}),(0,v.jsxs)(Xe,{checkMobile:k,isDarkMode:y,className:"team-message-input__wrapper ".concat(!!o&&"thread-open"),onPaste:Bt,children:[(0,v.jsx)(ke._,{}),(0,v.jsxs)(Ve,{isActive:g,isDarkMode:y,onBlur:function(){A||x(!1)},onClick:function(){x(!(U>5e3))},onKeyDown:function(e){"keydown"!==e.type||13!==e.keyCode||e.shiftKey||zt(e),"Backspace"!==e.code||null!==e.target.textContent&&0!==e.target.textContent.length||(Lt(J[1]),N(null),Tt(),V(0)),"keydown"===e.type&&"@"===e.key&&(e.preventDefault(),B(!0),setTimeout((function(){document.querySelector(".str-chat__thread .p-inputtext").focus()}),200)),27===e.keyCode&&(B(!1),Gt()),("click"===e.type&&Z||"click"===e.type&&A)&&(B(!1),Gt())},children:[d&&"reply"===d.type&&(0,v.jsx)(c.yw,{isDarkMode:y,message:u}),M&&(0,v.jsx)(c.yw,{isDarkMode:y,message:M}),Z&&(0,v.jsx)(Ue,{isDarkMode:y,children:(0,v.jsx)(Oe.w,{value:L,onClick:Ut,options:Pt,onChange:Ut,optionLabel:"user.name",itemTemplate:function(e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(E.qE,{name:e.user.name,image:e.user.image}),(0,v.jsx)("span",{children:e.user.name})]})},filter:!0})}),(0,v.jsx)(Be.M,{headerTemplate:$t,value:q,onTextChange:Ot,className:ct?"active-code":"",placeholder:w("chat.reply"),onSelectionChange:function(e){var t;z(null===(t=e.range)||void 0===t?void 0:t.index),H(!0)}}),A&&(0,v.jsx)(e,{disableSkinTonePicker:!0,disableAutoFocus:!0,preload:!0,onEmojiClick:function(e,t){if(O>-1){for(var n=document.querySelector(".str-chat__thread .ql-editor"),r=n.children.length,o=0,i=0,a=!0;a&&i<r;){var s,l,c,d;if(o+(null===(s=n.children[i])||void 0===s||null===(l=s.outerText)||void 0===l?void 0:l.length)+i>O){var u=n.children[i].outerText,p=t.emoji;n.children[i].outerText=Rt(u,p,O-o-i+(G?0:1)),a=!1}o+=null===(c=n.children[i])||void 0===c||null===(d=c.outerText)||void 0===d?void 0:d.length,i++}0===r&&0===o&&(n.children[i].outerText=t.emoji)}Gt()},native:!0}),U>5e3&&(0,v.jsx)(We,{children:U-5e3})]})]})]})},dt=u.ZP.div.withConfig({displayName:"style__FilterContainer",componentId:"sc-v70cfc-0"})(["box-shadow:0px 4px 10px rgba(124,124,124,0.1);border-radius:0 0 20px 20px;box-sizing:border-box;margin:0 auto;max-height:65%;overflow-y:scroll;width:100%;"]),ut=n(34155);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mt=l.memo((function(){var e=(0,d.E0)(),t=(0,l.useState)(""),n=t[0],a=t[1],u=(0,l.useState)(!1),p=u[0],m=u[1],f=(0,l.useState)([]),g=f[0],x=f[1],b=(0,l.useState)([]),y=b[0],k=b[1],w=(0,l.useRef)(null),j=(0,h.T)().t,M=ut.env.MAX_USERS_SEARCH||10,C=function(){var t=(0,i.Z)(s().mark((function t(){var n,r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={type:"messaging",members:{$in:[e.userID]},member_count:{$gt:1}},r=[{last_message_at:-1}],t.next=4,e.queryChannels(n,r,{watch:!0,state:!0});case 4:o=t.sent,k(o);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();y.length||C();var _=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a(t.target.value),t.target.value&&!(t.target.value.length<3)){e.next=6;break}return x([]),m(!1),e.abrupt("return");case 6:if(!p){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,E(t.target.value);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=(0,i.Z)(s().mark((function t(){var n,r,a,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,n=w.current.value,r=[],a=y.map(function(){var t=(0,i.Z)(s().mark((function t(i){var a,l,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.queryMembers({id:{$ne:e.userID},$and:[{name:{$autocomplete:n}}]},{name:1},{limit:M});case 2:a=t.sent,l=a.members,c=l.map((function(e){var t,n;return{_id:e.user_id,avatar:null===(t=e.user)||void 0===t?void 0:t.image,fullName:null===(n=e.user)||void 0===n?void 0:n.name}})),r.push.apply(r,(0,o.Z)(c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7,Promise.all(a);case 7:if(l=r.filter((function(e,t,n){return n.findIndex((function(t){return t._id===e._id}))===t})).slice(0,M),x(l),m(!1),n===w.current.value){t.next=13;break}return t.next=13,E(w.current.value);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),m(!1),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(){return t.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.E1,{input:n,ref:w,handleOnChange:_,placeholderText:j("chat.textTo")}),(0,v.jsx)(dt,{children:g.map((function(e,t){return(0,v.jsx)(c.u$,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),t)}))})]})})),ft=n(89874),ht=u.ZP.div.withConfig({displayName:"style__AvatarContainerThread",componentId:"sc-1qks6rw-0"})(["visibility:",";position:absolute;left:8px;"],(function(e){return e.topMessage?"visible":"hidden"})),vt=u.ZP.div.withConfig({displayName:"style__ContainerThread",componentId:"sc-1qks6rw-1"})(["padding:",";text-align:",";padding:4px 0px;height:auto;border-radius:4px;min-height:40px;width:100%;margin-left:",";> p{font-size:14px;margin:0;white-space:pre-line;font-family:var(--font);font-style:normal;font-weight:normal;line-height:20px;margin-left:var(--margins-left-chats);margin-top:",";margin-bottom:",";width:auto;color:",";}a{color:"," !important;}"],(function(e){return e.areEmojis?"0px":"8px"}),(function(e){return e.isMyMessage?"right":"left"}),(function(e){return e.isMobile?"8vw":"unset"}),(function(e){return e.areEmojis?"10px":"2px"}),(function(e){return e.areEmojis?"6px":"unset"}),(function(e){return e.isDarkMode?"var(--font-color-dm)":"var(--font-color)"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"})),gt=u.ZP.div.withConfig({displayName:"style__MessageThreadContainer",componentId:"sc-1qks6rw-2"})(["display:flex;flex-direction:column;align-items:",";margin:0;width:100%;position:relative;> p{margin-top:8px;}> .str-chat__message-attachment.str-chat__message-attachment--gallery.str-chat__message-attachment--gallery.str-chat__message-attachment--gallery--{display:none;}> .str-chat__message-attachment{display:none;}.str-chat__message-attachment--media{width:auto;}"],(function(e){return e.isMyMessage?"flex-end":"flex-start"})),xt=u.ZP.div.withConfig({displayName:"style__ReactionSelectorContainer",componentId:"sc-1qks6rw-3"})(["position:absolute;right:",";margin-bottom:28px;right:20px;margin-right:0px;> div{position:relative;background-color:var(--primary-color);}> .str-chat__reaction-selector{background:"," !important;top:-1px;}"],(function(e){return e.isMyMessage?"0":"auto"}),(function(e){return e.isDarkMode?"var(--bg-reaction-selector-dm)":"var(--bg-reaction-selector)"})),bt=(u.ZP.div.withConfig({displayName:"style__TimestampContainer",componentId:"sc-1qks6rw-4"})(["background-color:#e8e8e8;padding:4px 10px 4px 10px;border-radius:6px;font-weight:bold;font-size:18px;position:relative;width:45%;margin:0 auto;text-align:center;"]),u.ZP.div.withConfig({displayName:"style__InnerContainerThread",componentId:"sc-1qks6rw-5"})(["display:flex;flex-direction:",";align-items:flex-start;width:100%;overflow:hidden;"],(function(e){return e.isMyMessage?"row-reverse":"row"}))),yt=u.ZP.div.withConfig({displayName:"style__InnerMessageContainerThread",componentId:"sc-1qks6rw-6"})(["position:relative;margin-top:10px;width:100%;background:",";> .str-chat__simple-reactions-list{margin:",";margin-left:48px;background:"," !important;> .str-chat__simple-reactions-list-item--last-number{color:"," !important;}}"],(function(e){return e.isDarkMode?e.isMyMessage?"var(--myMessage-bg-color-dm)":"var(--notMyMessage-bg-color-dm)":e.isMyMessage?"var(--myMessage-bg-color)":"var(--notMyMessage-bg-color)"}),(function(e){return e.isMobile?"4px 0 0 var(--margins-left-chats-reactions-mobile)":"0px 0 0 var(--margins-left-chats-reactions)"}),(function(e){return e.isDarkMode?"var(--bg-reactions-dm)":"unset"}),(function(e){return e.isDarkMode?"var(--color-count-reactions-dm)":"var(--color-count-reactions)"})),kt=u.ZP.div.withConfig({displayName:"style__MainContainerThread",componentId:"sc-1qks6rw-7"})(["display:flex;align-items:center;background-color:",";padding:0;> .own-reaction .str-chat__simple-reactions-list{border-color:",";}"],(function(e){return e.isMyMessage?"var(--myMessage-bg-color)":"var(--notMyMessage-bg-color)"}),(function(e){return e.isDarkMode?"var(--brand-color-dm)":"var(--brand-color)"})),wt=u.ZP.div.withConfig({displayName:"style__OptionContainerThread",componentId:"sc-1qks6rw-8"})(["visibility:visible;position:absolute;right:0;top:0;"]),jt=u.ZP.div.withConfig({displayName:"style__InnerQuotedMessage",componentId:"sc-1qks6rw-9"})(["width:100%;padding:",";"],(function(e){return e.showQuote?"8px 56px 8px 56px":"0"})),Mt=function(e){var t,n,r,o,a=e.style,d=(0,U.fr)().message,u=(0,V.j)(d).isMyMessage,p=(0,J.t)(d),m=(0,Y.w)(),f=m.editing,h=m.setEdit,g=m.clearEdit,x=(0,Q.VF)(d),y=(0,K.K)(d),k=(0,l.useState)(!1),w=k[0],j=k[1],M=(0,l.useMemo)((function(){return["single","top"].includes(a)}),[a]),_=(0,l.useContext)(b.p5),S=_.client,D=_.setActiveChannel,q="reply"===(null===d||void 0===d?void 0:d.type),N=(0,be.JN)().channel,I=(0,C.vs)(),A=(0,l.useState)(!1),P=A[0],T=A[1],Z=(0,l.useState)(!0),B=Z[0],L=Z[1],F=(0,W.uz)().setQuotedMessage,O=function(){var e=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.message.parent_id?t.message.parent_id:t.message.id)){e.next=4;break}return e.next=4,N.getReplies(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if((0,l.useEffect)((function(){var e;(null===d||void 0===d||null===(e=d.created_at)||void 0===e?void 0:e.getDay())==(new Date).getDay()&&L(!1);var t=N.on("message.new",O),n=N.on("message.updated",O);(t||n)&&setTimeout((function(){t.unsubscribe(),n.unsubscribe()}),500)}),[]),f)return(0,v.jsx)(H.R,{Input:ct,mentionQueryParams:{options:{limit:1e3}},message:d,clearEditingState:g});var z=(0,X.ue)(d),R=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u){e.next=3;break}return e.abrupt("return");case 3:return o=S.channel("messaging",{isPersonal:!0,members:[null===S||void 0===S||null===(n=S.user)||void 0===n?void 0:n.id,null===d||void 0===d||null===(r=d.user)||void 0===r?void 0:r.id]}),e.next=6,o.create();case 6:D(o,t.persist());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)(kt,{isDarkMode:I,onMouseEnter:function(){return T(!0)},onMouseLeave:function(){T(!1),j(!1)},children:(0,v.jsx)(vt,{isDarkMode:I,className:d.own_reactions&&d.own_reactions.length?"own-reaction":"",children:(0,v.jsxs)(bt,{children:[w&&(0,v.jsx)(xt,{isDarkMode:I,isMyMessage:!1,onClick:function(){return j(!w)},children:(0,v.jsx)(ee.j,{handleReaction:x,detailedView:!0,reaction_counts:d.reaction_counts||void 0,latest_reactions:d.latest_reactions,own_reactions:d.own_reactions})}),(0,v.jsxs)(gt,{children:[z&&(0,v.jsx)(ft.P,{attachments:d.attachments}),q&&B&&(0,v.jsx)(yt,{children:(0,v.jsx)(c._U,{date:d.created_at})}),(0,v.jsxs)(yt,{isDarkMode:I,isMyMessage:u,isTopMessage:M,children:[(0,v.jsx)(ht,{topMessage:!0,children:(0,v.jsx)(E.qE,{size:40,name:null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.name,image:null===d||void 0===d||null===(n=d.user)||void 0===n?void 0:n.image,handleClick:R})}),(0,v.jsx)(c.YI,{message:d,showName:!0,unsafeHTML:!0,isThreadMessage:!0}),(0,v.jsx)(jt,{showQuote:null===(r=d.quoted_message)||void 0===r?void 0:r.id,children:(null===(o=d.quoted_message)||void 0===o?void 0:o.id)&&(0,v.jsx)(c.yw,{isMessageList:!0,isDarkMode:I,message:d.quoted_message,isReply:!0})}),P&&q&&(0,v.jsx)(wt,{children:(0,v.jsx)(c.PA,{isMyMessage:u,isReply:q,message:d,handleDelete:p,handleThread:y,handleEdit:h,toggleQuote:function(){F(d)},toogleReaction:function(){return j(!w)}})}),(0,v.jsx)(te.Y,{})]})]})]})})})},Ct=l.memo(Mt),_t=u.ZP.div.withConfig({displayName:"style__ContainerNewGroup",componentId:"sc-1sfzd4v-0"})(["width:100%;"]),Et=function(e){var t=e.channels,n=e.client,r=e.cancelNewGroup,o=(0,l.useState)(t.filter((function(e){return!e.data.isPersonal})))[0],a=(0,l.useState)(""),d=a[0],u=a[1],p=(0,l.useState)([]),m=p[0],f=p[1],g=(0,l.useState)(0),x=g[0],b=g[1],y=(0,l.useState)(),k=y[0],w=y[1],j=(0,h.T)().t,M={buttons:[j("chat.newGroup.next"),j("chat.newGroup.finalize")],createGroup:j("chat.newGroup.createGroup"),cancel:j("chat.newGroup.cancel"),contacts:j("chat.newGroup.contacts")},C=(0,l.useState)([{label:M.buttons[0],disabled:!0},{label:M.buttons[0],disabled:!0}])[0],_=function(){var e=(0,i.Z)(s().mark((function e(){var t,r,o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===x&&d.id&&(t=(t=Object.values(d.state.members)).map((function(e){return e.user})),f(t.filter((function(e){return e.id!=n.user.id}))),b(1)),1!==x){e.next=14;break}if(k){e.next=4;break}return e.abrupt("return");case 4:return k.push(n.user),r=k.map((function(e){return{user:{id:e.id,name:e.name}}})),o=r.map((function(e){return e.user.name})).join(", "),i=n.channel("messaging","".concat(n.user.id,"-").concat((new Date).getTime()),{members:r,name:o,extraData:{originChannelId:null===d||void 0===d?void 0:d.id,hidden:!1,disabled:!1,groupType:{isCommissionGroup:!1,isTeachersGroup:!1,isTutorGroup:!1,isStudentsGroup:!0,isPersonal:!1}}}),w([]),e.next=11,i.watch();case 11:i.show(),a=new CustomEvent("groupCreated",{bubbles:!0,detail:i}),document.dispatchEvent(a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k&&function(e){e.length>=1?C[1].disabled=!1:C[1].disabled=!0}(k),(0,v.jsxs)(_t,{children:[(0,v.jsx)(c.g$,{next:_,button:C[x],groupCreating:!0,cancelNewGroup:r,translates:M}),0===x&&(0,v.jsx)(c.qn,{onSelectChannel:function(e){u(t.find((function(t){return e.target.name===t.id}))),C[0].disabled=!1},channels:o,selectedChannel:d.id}),1===x&&(0,v.jsx)(c.ne,{translates:M,members:m,selectedMembers:k,setSelectedMembers:w})]})},St=u.ZP.div.withConfig({displayName:"style__ContainerUpdateGroup",componentId:"sc-1b30hoa-0"})(["width:100%;"]),Dt=function(e){var t=e.group,n=e.channel,r=e.client,o=e.cancelUpdateGroup,a=(0,l.useState)([]),d=a[0],u=a[1],p=(0,l.useState)(0),m=p[0],f=p[1],g=(0,l.useState)([]),x=g[0],b=g[1],y=(0,l.useState)([]),k=y[0],w=y[1],j=(0,h.T)().t,M={buttons:[j("chat.newGroup.next"),j("chat.newGroup.finalize")],updateGroup:j("chat.addUserGroup"),cancel:j("chat.newGroup.cancel"),contacts:j("chat.newGroup.contacts")},_=(0,l.useState)([{label:M.buttons[0],disabled:!0},{label:M.buttons[0],disabled:!0}])[0];(0,l.useEffect)((function(){if(t.id){var e=Object.values(t.state.members);e=e.map((function(e){return e.user})),b(e),w(e.filter((function(e){return e.id!=r.user.id})))}if(n.id){var o=Object.values(n.state.members);o=o.map((function(e){return e.user})),u(o.filter((function(e){return e.id!=r.user.id}))),f(1)}}),[]);var E=function(){var e=(0,i.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==m){e.next=8;break}if(k){e.next=3;break}return e.abrupt("return");case 3:return n=k.slice(x.length-1).map((function(e){return e.id})),e.next=6,C.mD.addMembers(t,n);case 6:r=new CustomEvent("groupUpdated",{bubbles:!0,detail:t}),document.dispatchEvent(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k&&function(e){_[1].disabled=e.length<=x.length-1}(k),(0,v.jsxs)(St,{children:[(0,v.jsx)(c.g$,{next:E,button:_[m],groupUpdating:!0,cancelUpdateGroup:o,translates:M}),1===m&&(0,v.jsx)(c.ne,{translates:M,members:d,groupMembers:x,selectedMembers:k,setSelectedMembers:w})]})},qt=u.ZP.div.withConfig({displayName:"style__ContainerMessages",componentId:"sc-1hydcx4-0"})(["height:",";background:#27282d;margin:24px 16px;border-radius:4px;position:relative;cursor:pointer;"],(function(e){return"".concat(e.height||100,"px")})),Nt=u.ZP.div.withConfig({displayName:"style__UserMessage",componentId:"sc-1hydcx4-1"})(["font-family:'Untitled Sans';position:absolute;margin:32px 16px;color:#ffffff;font-weight:600;font-size:16px;"]),It=u.ZP.div.withConfig({displayName:"style__Message",componentId:"sc-1hydcx4-2"})(["font-family:'Untitled Sans';position:absolute;margin:72px 16px;color:#ffffff;font-weight:400;font-size:16px;> .coincidence{color:#eaff6a;font-family:'Untitled Sans';font-weight:400;font-size:16px;}"]),At=u.ZP.hr.withConfig({displayName:"style__Separator",componentId:"sc-1hydcx4-3"})(["border:1px solid var(--separator-line-dm) !important;"]),Pt=u.ZP.div.withConfig({displayName:"style__Container",componentId:"sc-1hydcx4-4"})([""]),Tt=u.ZP.div.withConfig({displayName:"style__NoResultsContainer",componentId:"sc-1hydcx4-5"})(["position:relative;display:flex;align-items:center;flex-flow:column;img{margin-top:20%;width:102px;height:102px;margin-bottom:40px;}"]),Zt=u.ZP.div.withConfig({displayName:"style__TextNoResultTitle",componentId:"sc-1hydcx4-6"})(["font-size:24px;line-height:34px;color:var(--active-action-dm);font-family:var(--font);font-weight:bold;width:408px;text-align:center;"]),Bt=u.ZP.div.withConfig({displayName:"style__TextNoResultSubTitle",componentId:"sc-1hydcx4-7"})(["font-size:20px;line-height:30px;color:var(--font-color-dm);font-family:var(--font);font-weight:normal;margin-top:20px;"]),Lt=function(e){var t=e.searched,n=e.setIsSearching,r=(0,be.JN)().channel,o=(0,l.useState)(),i=o[0],a=o[1],s=(0,h.T)().t;(0,l.useEffect)((function(){return a(c()),null===i||void 0===i||i.map((function(e,t){var n;e.height=(null===(n=document.querySelector(".coloredMessage-".concat(t)))||void 0===n?void 0:n.offsetHeight)+100})),function(){a(c())}}),[t]);var c=function(){var e,n;return null===(e=r.state)||void 0===e||null===(n=e.messages)||void 0===n?void 0:n.filter((function(e){return e.text.toLowerCase().includes(t.toLowerCase())}))},d=function(e){return e.toLowerCase().replace(t.toLowerCase(),'<span class="coincidence">'+t+"</span>")};return(0,v.jsxs)(Pt,{children:[i&&i.map((function(e,t){var r;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(qt,{onClick:function(){return function(e){var t;n(!1),setTimeout((function(){t=document.getElementById(e.id)})),setTimeout((function(){t&&(t.scrollIntoView(!0),t.scrollIntoView({block:"start"}),t.scrollIntoView({behavior:"smooth"}))}),500)}(e)},height:e.height,children:[(0,v.jsx)(Nt,{children:null===(r=e.user)||void 0===r?void 0:r.name}),(0,v.jsx)(It,{className:"coloredMessage-".concat(t),dangerouslySetInnerHTML:{__html:d(e.text)}},t)]}),(0,v.jsx)(At,{})]})})),i&&0===i.length&&t.length>0&&(0,v.jsxs)(Tt,{children:[(0,v.jsx)("img",{src:"/NoResults.png",alt:""}),(0,v.jsx)(Zt,{children:s("chat.noResultsTitle")}),(0,v.jsx)(Bt,{children:s("chat.noResultsSubTitle")})]})]})}}}]);